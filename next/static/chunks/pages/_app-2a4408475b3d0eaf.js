(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{4444:function(e,t,r){"use strict";r.d(t,{BH:function(){return w},L:function(){return u},LL:function(){return A},P0:function(){return g},Pz:function(){return v},Sg:function(){return b},ZR:function(){return N},aH:function(){return y},b$:function(){return I},eu:function(){return S},hl:function(){return C},m9:function(){return F},ne:function(){return M},pd:function(){return P},q4:function(){return m},ru:function(){return T},tV:function(){return c},uI:function(){return _},vZ:function(){return function e(t,r){if(t===r)return!0;let n=Object.keys(t),i=Object.keys(r);for(let s of n){if(!i.includes(s))return!1;let n=t[s],o=r[s];if(R(n)&&R(o)){if(!e(n,o))return!1}else if(n!==o)return!1}for(let e of i)if(!n.includes(e))return!1;return!0}},w1:function(){return x},xO:function(){return D},xb:function(){return O},z$:function(){return E},zd:function(){return L}});var n=r(4155);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let i=function(e){let t=[],r=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);i<128?t[r++]=i:i<2048?(t[r++]=i>>6|192,t[r++]=63&i|128):(64512&i)==55296&&n+1<e.length&&(64512&e.charCodeAt(n+1))==56320?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n)),t[r++]=i>>18|240,t[r++]=i>>12&63|128,t[r++]=i>>6&63|128,t[r++]=63&i|128):(t[r++]=i>>12|224,t[r++]=i>>6&63|128,t[r++]=63&i|128)}return t},s=function(e){let t=[],r=0,n=0;for(;r<e.length;){let i=e[r++];if(i<128)t[n++]=String.fromCharCode(i);else if(i>191&&i<224){let s=e[r++];t[n++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){let s=e[r++],o=e[r++],a=e[r++],l=((7&i)<<18|(63&s)<<12|(63&o)<<6|63&a)-65536;t[n++]=String.fromCharCode(55296+(l>>10)),t[n++]=String.fromCharCode(56320+(1023&l))}else{let s=e[r++],o=e[r++];t[n++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let t=0;t<e.length;t+=3){let i=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,l=a?e[t+2]:0,u=i>>2,c=(3&i)<<4|o>>4,h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),n.push(r[u],r[c],r[h],r[d])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):s(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let t=0;t<e.length;){let i=r[e.charAt(t++)],s=t<e.length,o=s?r[e.charAt(t)]:0;++t;let l=t<e.length,u=l?r[e.charAt(t)]:64;++t;let c=t<e.length,h=c?r[e.charAt(t)]:64;if(++t,null==i||null==o||null==u||null==h)throw new a;let d=i<<2|o>>4;if(n.push(d),64!==u){let e=o<<4&240|u>>2;if(n.push(e),64!==h){let e=u<<6&192|h;n.push(e)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class a extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}let l=function(e){let t=i(e);return o.encodeByteArray(t,!0)},u=function(e){return l(e).replace(/\./g,"")},c=function(e){try{return o.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},h=()=>/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw Error("Unable to locate global object.")})().__FIREBASE_DEFAULTS__,d=()=>{if(void 0===n||void 0===n.env)return;let e=n.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},f=()=>{let e;if("undefined"==typeof document)return;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}let t=e&&c(e[1]);return t&&JSON.parse(t)},p=()=>{try{return h()||d()||f()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},m=e=>{var t,r;return null===(r=null===(t=p())||void 0===t?void 0:t.emulatorHosts)||void 0===r?void 0:r[e]},g=e=>{let t=m(e);if(!t)return;let r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw Error(`Invalid host ${t} with no separate hostname and port!`);let n=parseInt(t.substring(r+1),10);return"["===t[0]?[t.substring(1,r-1),n]:[t.substring(0,r),n]},y=()=>{var e;return null===(e=p())||void 0===e?void 0:e.config},v=e=>{var t;return null===(t=p())||void 0===t?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b(e,t){if(e.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let r=t||"demo-project",n=e.iat||0,i=e.sub||e.user_id;if(!i)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:n,exp:n+3600,auth_time:n,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[u(JSON.stringify({alg:"none",type:"JWT"})),u(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function _(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(E())}function T(){let e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function I(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function x(){let e=E();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function C(){try{return"object"==typeof indexedDB}catch(e){return!1}}function S(){return new Promise((e,t)=>{try{let r=!0,n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}})}class N extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,N.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,A.prototype.create)}}class A{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},n=`${this.service}/${e}`,i=this.errors[e],s=i?i.replace(k,(e,t)=>{let n=r[t];return null!=n?String(n):`<${t}?>`}):"Error",o=`${this.serviceName}: ${s} (${n}).`,a=new N(n,o,r);return a}}let k=/\{\$([^}]+)}/g;function O(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function R(e){return null!==e&&"object"==typeof e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D(e){let t=[];for(let[r,n]of Object.entries(e))Array.isArray(n)?n.forEach(e=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function L(e){let t={},r=e.replace(/^\?/,"").split("&");return r.forEach(e=>{if(e){let[r,n]=e.split("=");t[decodeURIComponent(r)]=decodeURIComponent(n)}}),t}function P(e){let t=e.indexOf("?");if(!t)return"";let r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}function M(e,t){let r=new j(e,t);return r.subscribe.bind(r)}class j{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let n;if(void 0===e&&void 0===t&&void 0===r)throw Error("Missing Observer.");void 0===(n=!function(e,t){if("object"!=typeof e||null===e)return!1;for(let r of t)if(r in e&&"function"==typeof e[r])return!0;return!1}(e,["next","error","complete"])?{next:e,error:t,complete:r}:e).next&&(n.next=U),void 0===n.error&&(n.error=U),void 0===n.complete&&(n.complete=U);let i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?n.error(this.finalError):n.complete()}catch(e){}}),this.observers.push(n),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function U(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F(e){return e&&e._delegate?e._delegate:e}},1982:function(e,t,r){var n=r(8541);e.exports=n.EventSourcePolyfill},6803:function(e){e.exports=function(){function e(){return(e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var r="image-Tb9Ew8CXIwaY6R1kjMvI0uRR-2000x3000-jpg";function n(e){return("image-"+e.split("/").slice(-1)[0]).replace(/\.([a-z]+)$/,"-$1")}var i=[["width","w"],["height","h"],["format","fm"],["download","dl"],["blur","blur"],["sharpen","sharp"],["invert","invert"],["orientation","or"],["minHeight","min-h"],["maxHeight","max-h"],["minWidth","min-w"],["maxWidth","max-w"],["quality","q"],["fit","fit"],["crop","crop"],["saturation","sat"],["auto","auto"],["dpr","dpr"],["pad","pad"]],s=["clip","crop","fill","fillmax","max","scale","min"],o=["top","bottom","left","right","center","focalpoint","entropy"],a=["format"],l=function(){function l(t,r){this.options=void 0,this.options=t?e({},t.options||{},r||{}):e({},r||{})}var u=l.prototype;return u.withOptions=function(r){var n=r.baseUrl||this.options.baseUrl,s={baseUrl:n};for(var o in r)r.hasOwnProperty(o)&&(s[function(e){for(var r,n=function(e,r){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,r){if(e){if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,r)}}(e))){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(i);!(r=n()).done;){var s=r.value,o=s[0],a=s[1];if(e===o||e===a)return o}return e}(o)]=r[o]);return new l(this,e({baseUrl:n},s))},u.image=function(e){return this.withOptions({source:e})},u.dataset=function(e){return this.withOptions({dataset:e})},u.projectId=function(e){return this.withOptions({projectId:e})},u.bg=function(e){return this.withOptions({bg:e})},u.dpr=function(e){return this.withOptions(e&&1!==e?{dpr:e}:{})},u.width=function(e){return this.withOptions({width:e})},u.height=function(e){return this.withOptions({height:e})},u.focalPoint=function(e,t){return this.withOptions({focalPoint:{x:e,y:t}})},u.maxWidth=function(e){return this.withOptions({maxWidth:e})},u.minWidth=function(e){return this.withOptions({minWidth:e})},u.maxHeight=function(e){return this.withOptions({maxHeight:e})},u.minHeight=function(e){return this.withOptions({minHeight:e})},u.size=function(e,t){return this.withOptions({width:e,height:t})},u.blur=function(e){return this.withOptions({blur:e})},u.sharpen=function(e){return this.withOptions({sharpen:e})},u.rect=function(e,t,r,n){return this.withOptions({rect:{left:e,top:t,width:r,height:n}})},u.format=function(e){return this.withOptions({format:e})},u.invert=function(e){return this.withOptions({invert:e})},u.orientation=function(e){return this.withOptions({orientation:e})},u.quality=function(e){return this.withOptions({quality:e})},u.forceDownload=function(e){return this.withOptions({download:e})},u.flipHorizontal=function(){return this.withOptions({flipHorizontal:!0})},u.flipVertical=function(){return this.withOptions({flipVertical:!0})},u.ignoreImageParams=function(){return this.withOptions({ignoreImageParams:!0})},u.fit=function(e){if(-1===s.indexOf(e))throw Error('Invalid fit mode "'+e+'"');return this.withOptions({fit:e})},u.crop=function(e){if(-1===o.indexOf(e))throw Error('Invalid crop mode "'+e+'"');return this.withOptions({crop:e})},u.saturation=function(e){return this.withOptions({saturation:e})},u.auto=function(e){if(-1===a.indexOf(e))throw Error('Invalid auto mode "'+e+'"');return this.withOptions({auto:e})},u.pad=function(e){return this.withOptions({pad:e})},u.url=function(){return function(t){var s=e({},t||{}),o=s.source;delete s.source;var a=function(t){var r;if(!t)return null;if("string"==typeof t&&/^https?:\/\//.test(""+t))r={asset:{_ref:n(t)}};else if("string"==typeof t)r={asset:{_ref:t}};else if(t&&"string"==typeof t._ref)r={asset:t};else if(t&&"string"==typeof t._id)r={asset:{_ref:t._id||""}};else if(t&&t.asset&&"string"==typeof t.asset.url)r={asset:{_ref:n(t.asset.url)}};else{if("object"!=typeof t.asset)return null;r=e({},t)}return t.crop&&(r.crop=t.crop),t.hotspot&&(r.hotspot=t.hotspot),function(t){if(t.crop&&t.hotspot)return t;var r=e({},t);return r.crop||(r.crop={left:0,top:0,bottom:0,right:0}),r.hotspot||(r.hotspot={x:.5,y:.5,height:1,width:1}),r}(r)}(o);if(!a)throw Error("Unable to resolve image URL from source ("+JSON.stringify(o)+")");var l=function(e){var t=e.split("-"),n=t[1],i=t[2],s=t[3];if(!n||!i||!s)throw Error("Malformed asset _ref '"+e+"'. Expected an id like \""+r+'".');var o=i.split("x"),a=o[0],l=o[1],u=+a,c=+l;if(!(isFinite(u)&&isFinite(c)))throw Error("Malformed asset _ref '"+e+"'. Expected an id like \""+r+'".');return{id:n,width:u,height:c,format:s}}(a.asset._ref||a.asset._id||""),u=Math.round(a.crop.left*l.width),c=Math.round(a.crop.top*l.height),h={left:u,top:c,width:Math.round(l.width-a.crop.right*l.width-u),height:Math.round(l.height-a.crop.bottom*l.height-c)},d=a.hotspot.height*l.height/2,f=a.hotspot.width*l.width/2,p=a.hotspot.x*l.width,m=a.hotspot.y*l.height;return s.rect||s.focalPoint||s.ignoreImageParams||s.crop||(s=e({},s,function(e,t){var r,n=t.width,i=t.height;if(!(n&&i))return{width:n,height:i,rect:e.crop};var s=e.crop,o=e.hotspot,a=n/i;if(s.width/s.height>a){var l=Math.round(s.height),u=Math.round(l*a),c=Math.max(0,Math.round(s.top)),h=Math.max(0,Math.round(Math.round((o.right-o.left)/2+o.left)-u/2));h<s.left?h=s.left:h+u>s.left+s.width&&(h=s.left+s.width-u),r={left:h,top:c,width:u,height:l}}else{var d=s.width,f=Math.round(d/a),p=Math.max(0,Math.round(s.left)),m=Math.max(0,Math.round(Math.round((o.bottom-o.top)/2+o.top)-f/2));m<s.top?m=s.top:m+f>s.top+s.height&&(m=s.top+s.height-f),r={left:p,top:m,width:d,height:f}}return{width:n,height:i,rect:r}}({crop:h,hotspot:{left:p-f,top:m-d,right:p+f,bottom:m+d}},s))),function(e){var t=(e.baseUrl||"https://cdn.sanity.io").replace(/\/+$/,""),r=e.asset.id+"-"+e.asset.width+"x"+e.asset.height+"."+e.asset.format,n=t+"/images/"+e.projectId+"/"+e.dataset+"/"+r,s=[];if(e.rect){var o=e.rect,a=o.left,l=o.top,u=o.width,c=o.height;(0!==a||0!==l||c!==e.asset.height||u!==e.asset.width)&&s.push("rect="+a+","+l+","+u+","+c)}e.bg&&s.push("bg="+e.bg),e.focalPoint&&(s.push("fp-x="+e.focalPoint.x),s.push("fp-y="+e.focalPoint.y));var h=[e.flipHorizontal&&"h",e.flipVertical&&"v"].filter(Boolean).join("");return(h&&s.push("flip="+h),i.forEach(function(t){var r=t[0],n=t[1];void 0!==e[r]?s.push(n+"="+encodeURIComponent(e[r])):void 0!==e[n]&&s.push(n+"="+encodeURIComponent(e[n]))}),0===s.length)?n:n+"?"+s.join("&")}(e({},s,{asset:l}))}(this.options)},u.toString=function(){return this.url()},l}();return function(e){if(e&&"config"in e&&"function"==typeof e.config){var t=e.config(),r=t.apiHost,n=t.projectId,i=t.dataset;return new l(null,{baseUrl:(r||"https://api.sanity.io").replace(/^https:\/\/api\./,"https://cdn."),projectId:n,dataset:i})}if(e&&"clientConfig"in e&&"object"==typeof e.clientConfig){var s=e.clientConfig,o=s.apiHost,a=s.projectId,u=s.dataset;return new l(null,{baseUrl:(o||"https://api.sanity.io").replace(/^https:\/\/api\./,"https://cdn."),projectId:a,dataset:u})}return new l(null,e)}}()},9742:function(e,t){"use strict";t.byteLength=function(e){var t=l(e),r=t[0],n=t[1];return(r+n)*3/4-n},t.toByteArray=function(e){var t,r,s=l(e),o=s[0],a=s[1],u=new i((o+a)*3/4-a),c=0,h=a>0?o-4:o;for(r=0;r<h;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;return 2===a&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,u[c++]=255&t),1===a&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t),u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,s=[],o=0,a=n-i;o<a;o+=16383)s.push(function(e,t,n){for(var i,s=[],o=t;o<n;o+=3)s.push(r[(i=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]))>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return s.join("")}(e,o,o+16383>a?a:o+16383));return 1===i?s.push(r[(t=e[n-1])>>2]+r[t<<4&63]+"=="):2===i&&s.push(r[(t=(e[n-2]<<8)+e[n-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),s.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=s.length;o<a;++o)r[o]=s[o],n[s.charCodeAt(o)]=o;function l(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},8764:function(e,t,r){"use strict";/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var n=r(9742),i=r(645),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function o(e){if(e>2147483647)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,a.prototype),t}function a(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return c(e)}return l(e,t,r)}function l(e,t,r){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!a.isEncoding(t))throw TypeError("Unknown encoding: "+t);var r=0|p(e,t),n=o(r),i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(A(e,Uint8Array)){var t=new Uint8Array(e);return d(t.buffer,t.byteOffset,t.byteLength)}return h(e)}(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(A(e,ArrayBuffer)||e&&A(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(A(e,SharedArrayBuffer)||e&&A(e.buffer,SharedArrayBuffer)))return d(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return a.from(n,t,r);var i=function(e){if(a.isBuffer(e)){var t,r=0|f(e.length),n=o(r);return 0===n.length||e.copy(n,0,0,r),n}return void 0!==e.length?"number"!=typeof e.length||(t=e.length)!=t?o(0):h(e):"Buffer"===e.type&&Array.isArray(e.data)?h(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return u(e),o(e<0?0:0|f(e))}function h(e){for(var t=e.length<0?0:0|f(e.length),r=o(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function d(e,t,r){var n;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),a.prototype),n}function f(e){if(e>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function p(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||A(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return C(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return S(e).length;default:if(i)return n?-1:C(e).length;t=(""+t).toLowerCase(),i=!0}}function m(e,t,r){var i,s,o=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",s=t;s<r;++s)i+=k[e[s]];return i}(this,t,r);case"utf8":case"utf-8":return w(this,t,r);case"ascii":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}(this,t,r);case"latin1":case"binary":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}(this,t,r);case"base64":return i=t,s=r,0===i&&s===this.length?n.fromByteArray(this):n.fromByteArray(this.slice(i,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){for(var n=e.slice(t,r),i="",s=0;s<n.length-1;s+=2)i+=String.fromCharCode(n[s]+256*n[s+1]);return i}(this,t,r);default:if(o)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function g(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function y(e,t,r,n,i){var s;if(0===e.length)return -1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),(s=r=+r)!=s&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return -1;r=e.length-1}else if(r<0){if(!i)return -1;r=0}if("string"==typeof t&&(t=a.from(t,n)),a.isBuffer(t))return 0===t.length?-1:v(e,t,r,n,i);if("number"==typeof t)return(t&=255,"function"==typeof Uint8Array.prototype.indexOf)?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):v(e,[t],r,n,i);throw TypeError("val must be string, number or Buffer")}function v(e,t,r,n,i){var s,o=1,a=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return -1;o=2,a/=2,l/=2,r/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var c=-1;for(s=r;s<a;s++)if(u(e,s)===u(t,-1===c?0:s-c)){if(-1===c&&(c=s),s-c+1===l)return c*o}else -1!==c&&(s-=s-c),c=-1}else for(r+l>a&&(r=a-l),s=r;s>=0;s--){for(var h=!0,d=0;d<l;d++)if(u(e,s+d)!==u(t,d)){h=!1;break}if(h)return s}return -1}function w(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var s,o,a,l,u=e[i],c=null,h=u>239?4:u>223?3:u>191?2:1;if(i+h<=r)switch(h){case 1:u<128&&(c=u);break;case 2:(192&(s=e[i+1]))==128&&(l=(31&u)<<6|63&s)>127&&(c=l);break;case 3:s=e[i+1],o=e[i+2],(192&s)==128&&(192&o)==128&&(l=(15&u)<<12|(63&s)<<6|63&o)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:s=e[i+1],o=e[i+2],a=e[i+3],(192&s)==128&&(192&o)==128&&(192&a)==128&&(l=(15&u)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&l<1114112&&(c=l)}null===c?(c=65533,h=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=h}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}function b(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function E(e,t,r,n,i,s){if(!a.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw RangeError('"value" argument is out of bounds');if(r+n>e.length)throw RangeError("Index out of range")}function _(e,t,r,n,i,s){if(r+n>e.length||r<0)throw RangeError("Index out of range")}function T(e,t,r,n,s){return t=+t,r>>>=0,s||_(e,t,r,4,34028234663852886e22,-34028234663852886e22),i.write(e,t,r,n,23,4),r+4}function I(e,t,r,n,s){return t=+t,r>>>=0,s||_(e,t,r,8,17976931348623157e292,-17976931348623157e292),i.write(e,t,r,n,52,8),r+8}t.lW=a,t.h2=50,a.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(e,t,r){return(u(e),e<=0)?o(e):void 0!==t?"string"==typeof r?o(e).fill(t,r):o(e).fill(t):o(e)},a.allocUnsafe=function(e){return c(e)},a.allocUnsafeSlow=function(e){return c(e)},a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(A(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),A(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;var r,n=a.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var s=e[r];if(A(s,Uint8Array))i+s.length>n.length?a.from(s).copy(n,i):Uint8Array.prototype.set.call(n,s,i);else if(a.isBuffer(s))s.copy(n,i);else throw TypeError('"list" argument must be an Array of Buffers');i+=s.length}return n},a.byteLength=p,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},a.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?w(this,0,e):m.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",r=t.h2;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},s&&(a.prototype[s]=a.prototype.inspect),a.prototype.compare=function(e,t,r,n,i){if(A(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var s=i-n,o=r-t,l=Math.min(s,o),u=this.slice(n,i),c=e.slice(t,r),h=0;h<l;++h)if(u[h]!==c[h]){s=u[h],o=c[h];break}return s<o?-1:o<s?1:0},a.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},a.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},a.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},a.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var i,s,o,a,l,u,c,h,d=this.length-t;if((void 0===r||r>d)&&(r=d),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var f=!1;;)switch(n){case"hex":return function(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var s=t.length;n>s/2&&(n=s/2);for(var o=0;o<n;++o){var a=parseInt(t.substr(2*o,2),16);if(a!=a)break;e[r+o]=a}return o}(this,e,t,r);case"utf8":case"utf-8":return i=t,s=r,N(C(e,this.length-i),this,i,s);case"ascii":case"latin1":case"binary":return o=t,a=r,N(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(e),this,o,a);case"base64":return l=t,u=r,N(S(e),this,l,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c=t,h=r,N(function(e,t){for(var r,n,i=[],s=0;s<e.length&&!((t-=2)<0);++s)n=(r=e.charCodeAt(s))>>8,i.push(r%256),i.push(n);return i}(e,this.length-c),this,c,h);default:if(f)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),f=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},a.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,a.prototype),n},a.prototype.readUintLE=a.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||b(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return n},a.prototype.readUintBE=a.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||b(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},a.prototype.readUint8=a.prototype.readUInt8=function(e,t){return e>>>=0,t||b(e,1,this.length),this[e]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||b(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||b(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||b(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||b(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||b(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},a.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||b(e,t,this.length);for(var n=t,i=1,s=this[e+--n];n>0&&(i*=256);)s+=this[e+--n]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*t)),s},a.prototype.readInt8=function(e,t){return(e>>>=0,t||b(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||b(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt16BE=function(e,t){e>>>=0,t||b(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||b(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||b(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return e>>>=0,t||b(e,4,this.length),i.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||b(e,4,this.length),i.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||b(e,8,this.length),i.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||b(e,8,this.length),i.read(this,e,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){var i=Math.pow(2,8*r)-1;E(this,e,t,r,i,0)}var s=1,o=0;for(this[t]=255&e;++o<r&&(s*=256);)this[t+o]=e/s&255;return t+r},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){var i=Math.pow(2,8*r)-1;E(this,e,t,r,i,0)}var s=r-1,o=1;for(this[t+s]=255&e;--s>=0&&(o*=256);)this[t+s]=e/o&255;return t+r},a.prototype.writeUint8=a.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);E(this,e,t,r,i-1,-i)}var s=0,o=1,a=0;for(this[t]=255&e;++s<r&&(o*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+r},a.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);E(this,e,t,r,i-1,-i)}var s=r-1,o=1,a=0;for(this[t+s]=255&e;--s>=0&&(o*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+r},a.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeFloatLE=function(e,t,r){return T(this,e,t,!0,r)},a.prototype.writeFloatBE=function(e,t,r){return T(this,e,t,!1,r)},a.prototype.writeDoubleLE=function(e,t,r){return I(this,e,t,!0,r)},a.prototype.writeDoubleBE=function(e,t,r){return I(this,e,t,!1,r)},a.prototype.copy=function(e,t,r,n){if(!a.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},a.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!a.isEncoding(n))throw TypeError("Unknown encoding: "+n);if(1===e.length){var i,s=e.charCodeAt(0);("utf8"===n&&s<128||"latin1"===n)&&(e=s)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var o=a.isBuffer(e)?e:a.from(e,n),l=o.length;if(0===l)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=o[i%l]}return this};var x=/[^+/0-9A-Za-z-_]/g;function C(e,t){t=t||1/0;for(var r,n=e.length,i=null,s=[],o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319||o+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return s}function S(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(x,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function N(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length)&&!(i>=e.length);++i)t[i+r]=e[i];return i}function A(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}var k=function(){for(var e="0123456789abcdef",t=Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)t[n+i]=e[r]+e[i];return t}()},1227:function(e,t,r){let n;var i=r(4155);t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&void 0!==i&&"env"in i&&(e=i.env.DEBUG),e},t.useColors=function(){return"undefined"!=typeof window&&!!window.process&&("renderer"===window.process.type||!!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(n=!1,()=>{n||(n=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(2447)(t);let{formatters:s}=e.exports;s.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},2447:function(e,t,r){e.exports=function(e){function t(e){let r,i,s;let o=null;function a(...e){if(!a.enabled)return;let n=a,i=Number(new Date),s=i-(r||i);n.diff=s,n.prev=r,n.curr=i,r=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(r,i)=>{if("%%"===r)return"%";o++;let s=t.formatters[i];if("function"==typeof s){let t=e[o];r=s.call(n,t),e.splice(o,1),o--}return r}),t.formatArgs.call(n,e);let l=n.log||t.log;l.apply(n,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=n,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(i!==t.namespaces&&(i=t.namespaces,s=t.enabled(e)),s),set:e=>{o=e}}),"function"==typeof t.init&&t.init(a),a}function n(e,r){let n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){let e=[...t.names.map(i),...t.skips.map(i).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];let n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(RegExp("^"+e.slice(1)+"$")):t.names.push(RegExp("^"+e+"$")))},t.enabled=function(e){let r,n;if("*"===e[e.length-1])return!0;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(7824),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(r=>{t[r]=e[r]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t)|0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},8541:function(e,t){var r,n;/** @license
 * eventsource.js
 * Available under MIT License (MIT)
 * https://github.com/Yaffle/EventSource/
 */!function(i){"use strict";var s=i.setTimeout,o=i.clearTimeout,a=i.XMLHttpRequest,l=i.XDomainRequest,u=i.ActiveXObject,c=i.EventSource,h=i.document,d=i.Promise,f=i.fetch,p=i.Response,m=i.TextDecoder,g=i.TextEncoder,y=i.AbortController;if("undefined"==typeof window||void 0===h||"readyState"in h||null!=h.body||(h.readyState="loading",window.addEventListener("load",function(e){h.readyState="complete"},!1)),null==a&&null!=u&&(a=function(){return new u("Microsoft.XMLHTTP")}),void 0==Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),Date.now||(Date.now=function(){return new Date().getTime()}),void 0==y){var v=f;f=function(e,t){var r=t.signal;return v(e,{headers:t.headers,credentials:t.credentials,cache:t.cache}).then(function(e){var t=e.body.getReader();return r._reader=t,r._aborted&&r._reader.cancel(),{status:e.status,statusText:e.statusText,headers:e.headers,body:{getReader:function(){return t}}}})},y=function(){this.signal={_reader:null,_aborted:!1},this.abort=function(){null!=this.signal._reader&&this.signal._reader.cancel(),this.signal._aborted=!0}}}function w(){this.bitsNeeded=0,this.codePoint=0}w.prototype.decode=function(e){function t(e,t,r){if(1===r)return e>=128>>t&&e<<t<=2047;if(2===r)return e>=2048>>t&&e<<t<=55295||e>=57344>>t&&e<<t<=65535;if(3===r)return e>=65536>>t&&e<<t<=1114111;throw Error()}function r(e,t){if(6===e)return t>>6>15?3:t>31?2:1;if(12===e)return t>15?3:2;if(18===e)return 3;throw Error()}for(var n="",i=this.bitsNeeded,s=this.codePoint,o=0;o<e.length;o+=1){var a=e[o];0!==i&&(a<128||a>191||!t(s<<6|63&a,i-6,r(i,s)))&&(i=0,n+=String.fromCharCode(s=65533)),0===i?(a>=0&&a<=127?(i=0,s=a):a>=192&&a<=223?(i=6,s=31&a):a>=224&&a<=239?(i=12,s=15&a):a>=240&&a<=247?(i=18,s=7&a):(i=0,s=65533),0===i||t(s,i,r(i,s))||(i=0,s=65533)):(i-=6,s=s<<6|63&a),0===i&&(s<=65535?n+=String.fromCharCode(s):n+=String.fromCharCode(55296+(s-65535-1>>10))+String.fromCharCode(56320+(s-65535-1&1023)))}return this.bitsNeeded=i,this.codePoint=s,n},(void 0==m||void 0==g||!function(){try{return"test"===new m().decode(new g().encode("test"),{stream:!0})}catch(e){console.debug("TextDecoder does not support streaming option. Using polyfill instead: "+e)}return!1}())&&(m=w);var b=function(){};function E(e){this.withCredentials=!1,this.readyState=0,this.status=0,this.statusText="",this.responseText="",this.onprogress=b,this.onload=b,this.onerror=b,this.onreadystatechange=b,this._contentType="",this._xhr=e,this._sendTimeout=0,this._abort=b}function _(e){return e.replace(/[A-Z]/g,function(e){return String.fromCharCode(e.charCodeAt(0)+32)})}function T(e){for(var t=Object.create(null),r=e.split("\r\n"),n=0;n<r.length;n+=1){var i=r[n].split(": "),s=i.shift(),o=i.join(": ");t[_(s)]=o}this._map=t}function I(){}function x(e){this._headers=e}function C(){}function S(){this._listeners=Object.create(null)}function N(e){s(function(){throw e},0)}function A(e){this.type=e,this.target=void 0}function k(e,t){A.call(this,e),this.data=t.data,this.lastEventId=t.lastEventId}function O(e,t){A.call(this,e),this.status=t.status,this.statusText=t.statusText,this.headers=t.headers}function R(e,t){A.call(this,e),this.error=t.error}E.prototype.open=function(e,t){this._abort(!0);var r=this,n=this._xhr,i=1,l=0;this._abort=function(e){0!==r._sendTimeout&&(o(r._sendTimeout),r._sendTimeout=0),1!==i&&2!==i&&3!==i||(i=4,n.onload=b,n.onerror=b,n.onabort=b,n.onprogress=b,n.onreadystatechange=b,n.abort(),0!==l&&(o(l),l=0),e||(r.readyState=4,r.onabort(null),r.onreadystatechange())),i=0};var u=function(){if(1===i){var e=0,t="",s=void 0;if("contentType"in n)e=200,t="OK",s=n.contentType;else try{e=n.status,t=n.statusText,s=n.getResponseHeader("Content-Type")}catch(r){e=0,t="",s=void 0}0!==e&&(i=2,r.readyState=2,r.status=e,r.statusText=t,r._contentType=s,r.onreadystatechange())}},c=function(){if(u(),2===i||3===i){i=3;var e="";try{e=n.responseText}catch(e){}r.readyState=3,r.responseText=e,r.onprogress()}},h=function(e,t){if((null==t||null==t.preventDefault)&&(t={preventDefault:b}),c(),1===i||2===i||3===i){if(i=4,0!==l&&(o(l),l=0),r.readyState=4,"load"===e)r.onload(t);else if("error"===e)r.onerror(t);else if("abort"===e)r.onabort(t);else throw TypeError();r.onreadystatechange()}},d=function(e){void 0==n||(4===n.readyState?"onload"in n&&"onerror"in n&&"onabort"in n||h(""===n.responseText?"error":"load",e):3===n.readyState?"onprogress"in n||c():2===n.readyState&&u())},f=function(){l=s(function(){f()},500),3===n.readyState&&c()};"onload"in n&&(n.onload=function(e){h("load",e)}),"onerror"in n&&(n.onerror=function(e){h("error",e)}),"onabort"in n&&(n.onabort=function(e){h("abort",e)}),"onprogress"in n&&(n.onprogress=c),"onreadystatechange"in n&&(n.onreadystatechange=function(e){d(e)}),("contentType"in n||!("ontimeout"in a.prototype))&&(t+=(-1===t.indexOf("?")?"?":"&")+"padding=true"),n.open(e,t,!0),"readyState"in n&&(l=s(function(){f()},0))},E.prototype.abort=function(){this._abort(!1)},E.prototype.getResponseHeader=function(e){return this._contentType},E.prototype.setRequestHeader=function(e,t){var r=this._xhr;"setRequestHeader"in r&&r.setRequestHeader(e,t)},E.prototype.getAllResponseHeaders=function(){return void 0!=this._xhr.getAllResponseHeaders&&this._xhr.getAllResponseHeaders()||""},E.prototype.send=function(){if((!("ontimeout"in a.prototype)||!("sendAsBinary"in a.prototype)&&!("mozAnon"in a.prototype))&&void 0!=h&&void 0!=h.readyState&&"complete"!==h.readyState){var e=this;e._sendTimeout=s(function(){e._sendTimeout=0,e.send()},4);return}var t=this._xhr;"withCredentials"in t&&(t.withCredentials=this.withCredentials);try{t.send(void 0)}catch(e){throw e}},T.prototype.get=function(e){return this._map[_(e)]},null!=a&&null==a.HEADERS_RECEIVED&&(a.HEADERS_RECEIVED=2),I.prototype.open=function(e,t,r,n,i,s,o){e.open("GET",i);var l=0;for(var u in e.onprogress=function(){var t=e.responseText.slice(l);l+=t.length,r(t)},e.onerror=function(e){e.preventDefault(),n(Error("NetworkError"))},e.onload=function(){n(null)},e.onabort=function(){n(null)},e.onreadystatechange=function(){if(e.readyState===a.HEADERS_RECEIVED){var r=e.status,n=e.statusText,i=e.getResponseHeader("Content-Type"),s=e.getAllResponseHeaders();t(r,n,i,new T(s))}},e.withCredentials=s,o)Object.prototype.hasOwnProperty.call(o,u)&&e.setRequestHeader(u,o[u]);return e.send(),e},x.prototype.get=function(e){return this._headers.get(e)},C.prototype.open=function(e,t,r,n,i,s,o){var a=null,l=new y,u=l.signal,c=new m;return f(i,{headers:o,credentials:s?"include":"same-origin",signal:u,cache:"no-store"}).then(function(e){return a=e.body.getReader(),t(e.status,e.statusText,e.headers.get("Content-Type"),new x(e.headers)),new d(function(e,t){var n=function(){a.read().then(function(t){t.done?e(void 0):(r(c.decode(t.value,{stream:!0})),n())}).catch(function(e){t(e)})};n()})}).catch(function(e){if("AbortError"!==e.name)return e}).then(function(e){n(e)}),{abort:function(){null!=a&&a.cancel(),l.abort()}}},S.prototype.dispatchEvent=function(e){e.target=this;var t=this._listeners[e.type];if(void 0!=t)for(var r=t.length,n=0;n<r;n+=1){var i=t[n];try{"function"==typeof i.handleEvent?i.handleEvent(e):i.call(this,e)}catch(e){N(e)}}},S.prototype.addEventListener=function(e,t){e=String(e);var r=this._listeners,n=r[e];void 0==n&&(n=[],r[e]=n);for(var i=!1,s=0;s<n.length;s+=1)n[s]===t&&(i=!0);i||n.push(t)},S.prototype.removeEventListener=function(e,t){e=String(e);var r=this._listeners,n=r[e];if(void 0!=n){for(var i=[],s=0;s<n.length;s+=1)n[s]!==t&&i.push(n[s]);0===i.length?delete r[e]:r[e]=i}},k.prototype=Object.create(A.prototype),O.prototype=Object.create(A.prototype),R.prototype=Object.create(A.prototype);var D=/^text\/event\-stream(;.*)?$/i,L=function(e,t){var r=null==e?t:parseInt(e,10);return r!=r&&(r=t),P(r)},P=function(e){return Math.min(Math.max(e,1e3),18e6)},M=function(e,t,r){try{"function"==typeof t&&t.call(e,r)}catch(e){N(e)}};function j(e,t){var r,n,i,u,c,h,d,f,p,m,g,y,v,w,b,_,T,x,N,A,j,F,V,B,q,z,$,H,K,G;S.call(this),t=t||{},this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url=void 0,this.readyState=void 0,this.withCredentials=void 0,this.headers=void 0,this._close=void 0,r=this,n=e,i=t,n=String(n),u=Boolean(i.withCredentials),c=i.lastEventIdQueryParameterName||"lastEventId",h=P(1e3),d=L(i.heartbeatTimeout,45e3),f="",p=h,m=!1,g=0,y=i.headers||{},v=i.Transport,w=U&&void 0==v?void 0:new E(void 0!=v?new v:void 0!=a&&"withCredentials"in a.prototype||void 0==l?new a:new l),b=null!=v&&"string"!=typeof v?new v:void 0==w?new C:new I,_=void 0,T=0,x=-1,N="",A="",j="",F="",V=0,B=0,q=0,z=function(e,t,n,i){if(0===x){if(200===e&&void 0!=n&&D.test(n)){x=1,m=Date.now(),p=h,r.readyState=1;var s=new O("open",{status:e,statusText:t,headers:i});r.dispatchEvent(s),M(r,r.onopen,s)}else{var o="";200!==e?(t&&(t=t.replace(/\s+/g," ")),o="EventSource's response has a status "+e+" "+t+" that is not 200. Aborting the connection."):o="EventSource's response has a Content-Type specifying an unsupported type: "+(void 0==n?"-":n.replace(/\s+/g," "))+". Aborting the connection.",K();var s=new O("error",{status:e,statusText:t,headers:i});r.dispatchEvent(s),M(r,r.onerror,s),console.error(o)}}},$=function(e){if(1===x){for(var t=-1,n=0;n<e.length;n+=1){var i=e.charCodeAt(n);(10===i||13===i)&&(t=n)}var a=(-1!==t?F:"")+e.slice(0,t+1);F=(-1===t?F:"")+e.slice(t+1),""!==e&&(m=Date.now(),g+=e.length);for(var l=0;l<a.length;l+=1){var i=a.charCodeAt(l);if(-1===V&&10===i)V=0;else if(-1===V&&(V=0),13===i||10===i){if(0!==V){1===V&&(q=l+1);var u=a.slice(B,q-1),c=a.slice(q+(q<l&&32===a.charCodeAt(q)?1:0),l);"data"===u?N+="\n"+c:"id"===u?A=c:"event"===u?j=c:"retry"===u?p=h=L(c,h):"heartbeatTimeout"===u&&(d=L(c,d),0!==T&&(o(T),T=s(function(){G()},d)))}if(0===V){if(""!==N){f=A,""===j&&(j="message");var y=new k(j,{data:N.slice(1),lastEventId:A});if(r.dispatchEvent(y),"open"===j?M(r,r.onopen,y):"message"===j?M(r,r.onmessage,y):"error"===j&&M(r,r.onerror,y),2===x)return}N="",j=""}V=13===i?-1:0}else 0===V&&(B=l,V=1),1===V?58===i&&(q=l+1,V=2):2===V&&(V=3)}}},H=function(e){if(1===x||0===x){x=-1,0!==T&&(o(T),T=0),T=s(function(){G()},p),p=P(Math.min(16*h,2*p)),r.readyState=0;var t=new R("error",{error:e});r.dispatchEvent(t),M(r,r.onerror,t),void 0!=e&&console.error(e)}},K=function(){x=2,void 0!=_&&(_.abort(),_=void 0),0!==T&&(o(T),T=0),r.readyState=2},G=function(){if(T=0,-1!==x){if(m||void 0==_){var e=Math.max((m||Date.now())+d-Date.now(),1);m=!1,T=s(function(){G()},e)}else H(Error("No activity within "+d+" milliseconds. "+(0===x?"No response received.":g+" chars received.")+" Reconnecting.")),void 0!=_&&(_.abort(),_=void 0);return}m=!1,g=0,T=s(function(){G()},d),x=0,N="",j="",A=f,F="",B=0,q=0,V=0;var t=n;if("data:"!==n.slice(0,5)&&"blob:"!==n.slice(0,5)&&""!==f){var i=n.indexOf("?");t=(-1===i?n:n.slice(0,i+1)+n.slice(i+1).replace(/(?:^|&)([^=&]*)(?:=[^&]*)?/g,function(e,t){return t===c?"":e}))+((-1===n.indexOf("?")?"?":"&")+c)+"="+encodeURIComponent(f)}var o=r.withCredentials,a={};a.Accept="text/event-stream";var l=r.headers;if(void 0!=l)for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u]);try{_=b.open(w,z,$,H,t,o,a)}catch(e){throw K(),e}},r.url=n,r.readyState=0,r.withCredentials=u,r.headers=y,r._close=K,G()}var U=void 0!=f&&void 0!=p&&"body"in p.prototype;j.prototype=Object.create(S.prototype),j.prototype.CONNECTING=0,j.prototype.OPEN=1,j.prototype.CLOSED=2,j.prototype.close=function(){this._close()},j.CONNECTING=0,j.OPEN=1,j.CLOSED=2,j.prototype.withCredentials=void 0;var F=c;void 0==a||void 0!=c&&"withCredentials"in c.prototype||(F=j),function(i){if("object"==typeof e.exports){var s=i(t);void 0!==s&&(e.exports=s)}else r=[t],void 0!==(n="function"==typeof i?i.apply(t,r):i)&&(e.exports=n)}(function(e){e.EventSourcePolyfill=j,e.NativeEventSource=c,e.EventSource=F})}("undefined"==typeof globalThis?"undefined"!=typeof window?window:"undefined"!=typeof self?self:this:globalThis)},7288:function(e,t,r){"use strict";function n(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];let i=e.length-1;return e.slice(0,i).reduce((e,t,n)=>e+t+r[n],"")+e[i]}r.d(t,{Z:function(){return n}})},645:function(e,t){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */t.read=function(e,t,r,n,i){var s,o,a=8*i-n-1,l=(1<<a)-1,u=l>>1,c=-7,h=r?i-1:0,d=r?-1:1,f=e[t+h];for(h+=d,s=f&(1<<-c)-1,f>>=-c,c+=a;c>0;s=256*s+e[t+h],h+=d,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=n;c>0;o=256*o+e[t+h],h+=d,c-=8);if(0===s)s=1-u;else{if(s===l)return o?NaN:(f?-1:1)*(1/0);o+=Math.pow(2,n),s-=u}return(f?-1:1)*o*Math.pow(2,s-n)},t.write=function(e,t,r,n,i,s){var o,a,l,u=8*s-i-1,c=(1<<u)-1,h=c>>1,d=23===i?5960464477539062e-23:0,f=n?0:s-1,p=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(isNaN(t=Math.abs(t))||t===1/0?(a=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?t+=d/l:t+=d*Math.pow(2,1-h),t*l>=2&&(o++,l/=2),o+h>=c?(a=0,o=c):o+h>=1?(a=(t*l-1)*Math.pow(2,i),o+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;e[r+f]=255&a,f+=p,a/=256,i-=8);for(o=o<<i|a,u+=i;u>0;e[r+f]=255&o,f+=p,o/=256,u-=8);e[r+f-p]|=128*m}},7824:function(e){function t(e,t,r,n){return Math.round(e/r)+" "+n+(t>=1.5*r?"s":"")}e.exports=function(e,r){r=r||{};var n,i,s=typeof e;if("string"===s&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"weeks":case"week":case"w":return 6048e5*r;case"days":case"day":case"d":return 864e5*r;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*r;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*r;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}(e);if("number"===s&&isFinite(e))return r.long?(n=Math.abs(e))>=864e5?t(e,n,864e5,"day"):n>=36e5?t(e,n,36e5,"hour"):n>=6e4?t(e,n,6e4,"minute"):n>=1e3?t(e,n,1e3,"second"):e+" ms":(i=Math.abs(e))>=864e5?Math.round(e/864e5)+"d":i>=36e5?Math.round(e/36e5)+"h":i>=6e4?Math.round(e/6e4)+"m":i>=1e3?Math.round(e/1e3)+"s":e+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},1118:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return r(2886)}])},6186:function(e,t,r){"use strict";r.d(t,{Z:function(){return _}});var n=r(7297),i=r(5893),s=r(5675),o=r.n(s),a=r(6803),l=r.n(a),u=r(6888),c=r(7294),h=r(1664),d=r.n(h),f=r(7288),p=r(1359),m=r(661),g=r(2844),y=r(9783),v=r(3247),w=r(6318),b=r(6353);function E(){let e=(0,n.Z)(["*[_type == 'computer' ]"]);return E=function(){return e},e}function _(e){let{computer:t}=e,r=l()(u.L),[n,s]=(0,c.useState)(0),a=(t.mrp-t.saleprice)/t.mrp*100,[h,_]=(0,c.useState)(),[T,I]=(0,c.useState)(t.category),[x,C]=(0,c.useState)(!1),{currentUser:S,getrate:N}=(0,y.E)(),[A,k]=(0,c.useState)(null),[O,R]=(0,c.useState)();(0,c.useEffect)(()=>{!async function(){let e=(0,f.Z)(E()),t=await u.L.fetch(e);_(t)}()},[]);let D=(h||[]).filter(e=>e.slug.current!==t.slug.current);(0,c.useEffect)(()=>{!async function(){if(S){let e=(0,v.IO)((0,v.hJ)(w.db,"ratings"),(0,v.ar)("userid","==",S.uid),(0,v.ar)("pid","==",t.slug.current));(0,v.cf)(e,e=>{e.docs.forEach(e=>{k(e.data().rate)})})}}()},[t.slug.current]);let L=()=>{C(!1)};return(0,c.useEffect)(()=>{let e=(0,v.IO)((0,v.hJ)(w.db,"ratings"),(0,v.ar)("pid","==",t.slug.current));(0,v.cf)(e,e=>{let t=[];e.docs.forEach(e=>{t.push(e.data().rate);let r=0;for(let e=0;e<t.length;e++)r+=t[e];R(r/t.length)})})},[t.slug.current]),(0,i.jsxs)("div",{className:"w-full mt-12 ",children:[(0,i.jsx)("div",{className:"w-full text-center py-3",children:(0,i.jsx)("h1",{className:"text-xl font-bold text-themed4",children:t.name})}),(0,i.jsxs)("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row itmes-center justify-center  px-2 ",children:[(0,i.jsxs)("div",{className:"flex-1 flex  items-center gap-8 justify-center",children:[(0,i.jsx)("div",{className:"grid grid-cols-1 gap-2 ",children:t.image&&t.image.map((e,a)=>(0,i.jsx)(o(),{className:a==n?"border-2 border-themered":"border border-themed3",style:{cursor:"pointer"},src:r.image(e).width(70).height(90).url(),width:70,height:90,alt:t.name,onClick:()=>s(a)}))}),(0,i.jsx)("div",{className:" flex items-center justify-center  ",children:(0,i.jsx)(o(),{className:"object-cover",src:r.image(t.image[n]).width(450).height(500).url(),width:450,height:500,alt:t.name})})]}),(0,i.jsxs)("div",{className:"flex-1 flex flex-col px-6  mt-10 md:mt-0 items-start",children:[(0,i.jsx)("p",{className:"text-2xl font-extrabold text-themed4",children:t.shortdesc}),(0,i.jsx)(m.Z,{rate:O}),(0,i.jsx)("p",{className:"text-sm font-medium text-gray-500",children:t.fulldesc[0]}),(0,i.jsxs)("div",{className:"flex flex-col mt-8 items-start space-y-2",children:[(0,i.jsxs)("p",{className:"px-4 py-1 bg-themered rounded-lg text-white text-xl",children:[Math.trunc(a)," % off"]}),(0,i.jsxs)("p",{className:"text-2xl font-bold text-gray-900 ",children:[" ",t.saleprice," ",(0,i.jsxs)("span",{className:"text-xs font-thin text-gray-600 line-through",children:["mrp : ",t.mrp]})]}),(0,i.jsxs)("p",{className:"text-xs font-bold text-gray-400",children:["( ",t.mrp-t.saleprice," off )"]})]}),(0,i.jsxs)("div",{className:" flex items-start mt-8 justify-sgart gap-2",children:[(0,i.jsx)("button",{className:"text-md rounded-lg font-thin bg-themered text-themel4 px-4 py-2",children:"By Now"}),(0,i.jsx)("button",{className:"text-md rounded-lg font-thin bg-themeblue text-themel4 px-4 py-2 ",children:"Add to cart"})]}),(0,i.jsx)("div",{className:"flex items-start mt-8 justify-sgart",children:(0,i.jsx)("p",{className:"text-xl font-bold text-themed4",children:"About the product"})}),(0,i.jsx)("div",{className:" flex flex-col items-start mt-8 justify-sgart gap-2",children:t.fulldesc&&t.fulldesc.map((e,t)=>(0,i.jsxs)("p",{className:"text-sm font-semibold text-gray-600",children:[t+1,". ",e]},t))})]})]}),(0,i.jsxs)("div",{className:"max-w-7xl mx-auto my-8 ",children:[(0,i.jsx)("hr",{className:"w-full h-1 bg-themed4 "}),(0,i.jsxs)("div",{className:"w-full text-center",children:[(0,i.jsx)("h1",{className:"text-xl font-bold text-themed4 my-5",children:"Other related products"}),(0,i.jsx)("div",{className:"w-full flex flex-col md:flex-row items-center justify-center gap-2",children:D&&D.map((e,t)=>(0,i.jsx)(d(),{href:"/computer/".concat(e.slug.current),children:(0,i.jsx)(b.Z,{other:e},t)}))})]})]}),(0,i.jsx)("div",{className:" max-w-7xl mx-auto  my-2 flex items-start px-2",children:(0,i.jsxs)("div",{className:"max-w-4xl py-2",children:[S&&(0,i.jsxs)("div",{className:"flex items-center justify-center gap-4 mb-5",children:[(0,i.jsx)("p",{className:"text-xl font-bold text-themed4 ",children:"Reviews"}),(0,i.jsxs)("div",{className:"mt-2 text-left",children:[(0,i.jsx)("p",{onClick:()=>C(!0),className:"text-sm font-medium text-themed4 cursor-pointer",children:"Rate and review this product"}),x&&(0,i.jsx)(g.Z,{handleClose:L,pid:t._id})]})]}),S&&!A&&(0,i.jsx)(p.Z,{pid:t.slug.current}),(0,i.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[S&&A&&(0,i.jsx)("p",{children:"your rating is"}),A&&(0,i.jsx)(m.Z,{rate:A})]})]})})]})}},6939:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(5893);function i(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"hidden md:block w-full bg-orange-200",children:(0,n.jsxs)("div",{className:" max-w-7xl mx-auto flex items-center justify-center gap-7 bg-orange-200",style:{height:"450px"},children:[(0,n.jsx)("div",{children:(0,n.jsx)("img",{src:"http://localhost:3000/img13.png",alt:"sirilsaree",className:" h-96 w-auto"})}),(0,n.jsxs)("div",{className:"flex flex-col items-center ",children:[(0,n.jsx)("p",{className:" text-2xl font-bold text-themed4 shadow-md",children:"Festive Season sales"}),(0,n.jsx)("p",{className:" mt-3 text-5xl font-extrabold text-themed3 text-center ",children:"SIRIL Women's Printed Poly Silk Sarees"}),(0,n.jsx)("p",{className:" mt-3 text-2xl font-thin text-themed4",children:"50% off during the offer"}),(0,n.jsx)("p",{className:" mt-10",children:"From 15th to 22 March 2023"})]})]})}),(0,n.jsx)("div",{className:"md:hidden w-full bg-orange-200",children:(0,n.jsxs)("div",{className:" max-w-5xl mx-auto flex flex-col items-center justify-center gap-7 bg-orange-200 mt-11",style:{height:"450px"},children:[(0,n.jsx)("div",{children:(0,n.jsx)("img",{src:"http://localhost:3000/img13.png",alt:"sirilsaree",className:" h-36 w-auto"})}),(0,n.jsxs)("div",{className:"flex flex-col items-center ",children:[(0,n.jsx)("p",{className:" text-xl font-bold text-themed4 shadow-md",children:"Festive Season sales"}),(0,n.jsx)("p",{className:" mt-2 text-2xl font-extrabold text-themed3 text-center ",children:"SIRIL Women's Printed Poly Silk Sarees"}),(0,n.jsx)("p",{className:" mt-2 text-xl font-thin text-themed4",children:"50% off during the offer"}),(0,n.jsx)("p",{className:" mt-5",children:"From 15th to 22 March 2023"})]})]})})]})}},9894:function(e,t,r){"use strict";r.d(t,{Z:function(){return _}});var n=r(7297),i=r(5893),s=r(5675),o=r.n(s),a=r(6803),l=r.n(a),u=r(6888),c=r(7294),h=r(7288),d=r(1664),f=r.n(d),p=r(3247),m=r(6318),g=r(661),y=r(2844),v=r(1359),w=r(9783),b=r(6353);function E(){let e=(0,n.Z)(["*[_type == 'mobile']"]);return E=function(){return e},e}function _(e){let{mobile:t}=e,r=l()(u.L),[n,s]=(0,c.useState)(0),a=(t.mrp-t.saleprice)/t.mrp*100,[d,_]=(0,c.useState)(),[T,I]=(0,c.useState)(t.category),{currentUser:x,getrate:C}=(0,w.E)(),[S,N]=(0,c.useState)(null),[A,k]=(0,c.useState)(!1),[O,R]=(0,c.useState)();(0,c.useEffect)(()=>{!async function(){let e=(0,h.Z)(E()),t=await u.L.fetch(e);_(t)}()},[]);let D=(d||[]).filter(e=>e.slug.current!==t.slug.current);(0,c.useEffect)(()=>{!async function(){if(x){let e=(0,p.IO)((0,p.hJ)(m.db,"ratings"),(0,p.ar)("userid","==",x.uid),(0,p.ar)("pid","==",t.slug.current));(0,p.cf)(e,e=>{e.docs.forEach(e=>{N(e.data().rate)})})}}()},[t.slug.current]);let L=()=>{k(!1)};return(0,c.useEffect)(()=>{let e=(0,p.IO)((0,p.hJ)(m.db,"ratings"),(0,p.ar)("pid","==",t.slug.current));(0,p.cf)(e,e=>{let t=[];e.docs.forEach(e=>{t.push(e.data().rate);let r=0;for(let e=0;e<t.length;e++)r+=t[e];R(r/t.length)})})},[t.slug.current]),(0,i.jsxs)("div",{className:"w-full mt-12 ",children:[(0,i.jsx)("div",{className:"w-full text-center py-3",children:(0,i.jsx)("h1",{className:"text-xl font-bold text-themed4",children:t.name})}),(0,i.jsxs)("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row itmes-center justify-center px-2 mt-8 mb-8 ",children:[(0,i.jsxs)("div",{className:"flex-1 flex gap-3  items-center justify-center",children:[(0,i.jsx)("div",{className:"grid grid-cols-1 gap-2 ",children:t.image&&t.image.map((e,a)=>(0,i.jsx)(o(),{className:a==n?"border-2 border-themered":"border border-themed3",style:{cursor:"pointer"},src:r.image(e).width(70).height(90).url(),width:70,height:90,alt:t.name,onClick:()=>s(a)}))}),(0,i.jsx)("div",{className:" flex items-center justify-center  ",children:(0,i.jsx)(o(),{className:"object-cover",src:r.image(t.image[n]).width(450).height(500).url(),width:450,height:500,alt:t.name})})]}),(0,i.jsxs)("div",{className:"flex-1 flex flex-col px-6 mt-10 md:mt-0 items-start ",children:[(0,i.jsx)("p",{className:"text-2xl font-extrabold text-themed4",children:t.shortdesc}),(0,i.jsx)(g.Z,{rate:O}),(0,i.jsx)("p",{className:"text-sm font-medium text-gray-500",children:t.fulldesc[0]}),(0,i.jsxs)("div",{className:"flex flex-col mt-8 items-start space-y-2",children:[(0,i.jsxs)("p",{className:"px-4 py-1 bg-themered rounded-lg text-white text-xl",children:[Math.trunc(a)," % off"]}),(0,i.jsxs)("p",{className:"text-2xl font-bold text-gray-900 ",children:[" ",t.saleprice," ",(0,i.jsxs)("span",{className:"text-xs font-thin text-gray-600 line-through",children:["mrp : ",t.mrp]})]}),(0,i.jsxs)("p",{className:"text-xs font-bold text-gray-400",children:["( ",t.mrp-t.saleprice," off )"]})]}),(0,i.jsxs)("div",{className:" flex items-start mt-8 justify-sgart gap-2",children:[(0,i.jsx)("button",{className:"text-md rounded-lg font-thin bg-themered text-themel4 px-4 py-2",children:"By Now"}),(0,i.jsx)("button",{className:"text-md rounded-lg font-thin bg-themeblue text-themel4 px-4 py-2 ",children:"Add to cart"})]}),(0,i.jsx)("div",{className:"flex items-start mt-8 justify-sgart",children:(0,i.jsx)("p",{className:"text-xl font-bold text-themed4",children:"About the product"})}),(0,i.jsx)("div",{className:" flex flex-col items-start mt-8 justify-sgart gap-2",children:t.fulldesc&&t.fulldesc.map((e,t)=>(0,i.jsxs)("p",{className:"text-sm font-semibold text-gray-600",children:[t+1,". ",e]},t))})]})]}),(0,i.jsxs)("div",{className:"max-w-7xl mx-auto my-8 ",children:[(0,i.jsx)("hr",{className:"w-full h-1 bg-themed4 "}),(0,i.jsxs)("div",{className:"w-full text-center",children:[(0,i.jsx)("h1",{className:"text-xl font-bold text-themed4 my-5",children:"Other related products"}),(0,i.jsx)("div",{className:"w-full flex flex-col md:flex-row items-center justify-center gap-2",children:D&&D.map((e,t)=>(0,i.jsx)(f(),{href:"/mobile/".concat(e.slug.current),children:(0,i.jsx)(b.Z,{other:e})}))})]})]}),(0,i.jsx)("div",{className:" max-w-7xl mx-auto  my-2 flex items-start px-2",children:(0,i.jsxs)("div",{className:"max-w-4xl py-2",children:[x&&(0,i.jsxs)("div",{className:"flex items-center justify-center gap-4 mb-5",children:[(0,i.jsx)("p",{className:"text-xl font-bold text-themed4 ",children:"Reviews"}),(0,i.jsxs)("div",{className:"mt-2 text-left",children:[(0,i.jsx)("p",{onClick:()=>k(!0),className:"text-sm font-medium text-themed4 cursor-pointer",children:"Rate and review this product"}),A&&(0,i.jsx)(y.Z,{handleClose:L,pid:t._id})]})]}),x&&!S&&(0,i.jsx)(v.Z,{pid:t.slug.current}),(0,i.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[x&&S&&(0,i.jsx)("p",{children:"your rating is"}),S&&(0,i.jsx)(g.Z,{rate:S})]})]})})]})}},6353:function(e,t,r){"use strict";r.d(t,{Z:function(){return f}});var n=r(5893);r(1664);var i=r(6888),s=r(6803),o=r.n(s),a=r(5675),l=r.n(a),u=r(3247),c=r(6318),h=r(7294),d=r(661);function f(e){let{other:t}=e,r=o()(i.L),[s,a]=(0,h.useState)();return(0,h.useEffect)(()=>{let e=(0,u.IO)((0,u.hJ)(c.db,"ratings"),(0,u.ar)("pid","==",t.slug.current));(0,u.cf)(e,e=>{let t=[];e.docs.forEach(e=>{t.push(e.data().rate);let r=0;for(let e=0;e<t.length;e++)r+=t[e];a(r/t.length)})})},[t.slug.current]),(0,n.jsxs)("div",{className:"max-w-xl flex flex-col items-center",children:[(0,n.jsx)(l(),{className:" object-cover",src:r.image(t.image[0]).width(200).height(250).url(),width:200,height:150,alt:t.name}),(0,n.jsx)("p",{className:" w-48 text-sm font-bold text-themed4 ",children:t.name}),(0,n.jsx)(d.Z,{rate:s}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"text-sm font-light text-gray-800",children:"Color:"}),"\xa0",(0,n.jsx)("span",{className:"text-sm text-bold text-gray-600",children:t.color})]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"text-sm font-light text-gray-800",children:"Size:"}),"\xa0",(0,n.jsx)("span",{className:"text-sm text-bold text-gray-600",children:t.size})]})]})}},661:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(5893);function i(e){let{rate:t}=e,r=t/5*100;return(0,n.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[r>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"flex items-center h-5 w-24 bg-gray-300",children:(0,n.jsxs)("div",{className:" flex items-center bg-themeorange h-5",style:{width:r},children:[(0,n.jsx)("img",{src:"http://localhost:3000/star.png",className:"w-5 h-5"}),(0,n.jsx)("img",{src:"http://localhost:3000/star.png",className:"w-5 h-5"}),(0,n.jsx)("img",{src:"http://localhost:3000/star.png",className:"w-5 h-5"}),(0,n.jsx)("img",{src:"http://localhost:3000/star.png",className:"w-5 h-5"}),(0,n.jsx)("img",{src:"http://localhost:3000/star.png",className:"w-5 h-5"})]})}),(0,n.jsx)("div",{className:"text-xs font-bold",children:Math.round(10*t)/10})]}),!r>0&&(0,n.jsx)("p",{className:"text-xs font-bold bg-gray-300 px-2 py-1",children:"no rating"})]})}},2844:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(5893),i=r(9783),s=r(7294);function o(e){let{handleClose:t,pid:r,name:o}=e,[a,l]=(0,s.useState)(),{currentUser:u,updatereview:c,isLoading:h,success:d}=(0,i.E)(),[f,p]=(0,s.useState)(""),m=e=>{if(e.preventDefault(),!a){p("you have to write something");return}c(r,u.uid,u.displayName,a)};if(!d)return(0,n.jsx)("div",{className:"fixed top-0 left-0 bottom-0 right-0 flex items-center justify-center bg-themed3 opacity-95 ",children:(0,n.jsxs)("div",{className:"w-full md:w-2/3 bg-white px-3 py-2 opacity-100 rounded-lg mx-2 ",children:[(0,n.jsx)("div",{className:"w-full text-right",children:(0,n.jsx)("p",{onClick:t,className:"text-sm font-bold text-themed4 cursor-pointer",children:"close"})}),(0,n.jsxs)("div",{className:"flex flex-col items-center space-y-2 ",children:[(0,n.jsx)("p",{className:"text-xl font-bold text-themed3",children:"Rate this product"}),(0,n.jsxs)("form",{onSubmit:m,className:"w-full",children:[(0,n.jsxs)("div",{className:"w-full ",children:[(0,n.jsx)("p",{children:"Write your review of the product"}),(0,n.jsx)("textarea",{placeholder:"write something ",className:" w-full h-24 py-2 px-3 text-sm font-medium rounded border border-gray-300",onChange:e=>l(e.target.value),value:a,required:!0}),f&&(0,n.jsx)("p",{className:"text-xs text-red-500 font-bold",children:f})]}),!h&&(0,n.jsx)("button",{onClick:m,type:"submit",className:"px-3 py-2 bg-themed4 text-xs font-thin text-white rounded-md ",children:"Submit"}),h&&(0,n.jsx)("button",{type:"submit",className:"px-3 py-2 bg-themed4 text-xs font-thin text-white rounded-md ",children:"Please wait..."})]})]})]})});t()}r(661),r(1359)},5080:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var n=r(7297),i=r(5893),s=r(7288),o=r(6888);r(6186),r(9894);var a=r(7294),l=r(1163);function u(){let e=(0,n.Z)(["*['",'\' in tags]{"stags":name, "slug":slug}']);return u=function(){return e},e}function c(){let[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)([]),[c,h]=(0,a.useState)([]),d=(0,l.useRouter)(),f=async()=>{h(""),d.push({pathname:"/searchresult",query:{searchvalue:r}})},p=async()=>{let e=(0,s.Z)(u(),r),t=await o.L.fetch(e),n=[];t.map(e=>{n.push(e),h(n)})};return(0,i.jsx)("div",{className:"w-80 ml-6 md:ml-44 lg:ml-96 flex items-center justify-center absolute top-2  ",children:(0,i.jsxs)("div",{className:" w-80 md:w-96 ",children:[(0,i.jsxs)("div",{className:"w-full flex items-center justify-center",children:[(0,i.jsx)("input",{onKeyDown:()=>p(),onChange:e=>n(e.target.value),placeholder:"search here for anything",className:" w-3/4 md:w-full px-3 rounded-l-lg py-2  bg-themel4 text-xs font-bold text-themed4 text-center"}),(0,i.jsx)("div",{onClick:f,className:" w-8 h-8 bg-themed1 flex items-center justify-center",children:(0,i.jsx)("img",{src:"http://localhost:3000/search.png",className:" w-5 h-5 cursor-pointer"})})]}),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{className:"flex flex-col space-y-2 items-center  bg-white rounded-b-xl px-3",children:c&&r&&c.map((e,t)=>(0,i.jsx)("p",{onClick:f,className:"text-xs font-bold text-themed4 cursor-pointer  ",children:e.stags},t))})})]})})}},1359:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var n=r(5893),i=r(7294),s={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},o=i.createContext&&i.createContext(s),a=function(){return(a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},l=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};function u(e){var t=function(t){var r,n=e.attr,s=e.size,o=e.title,u=l(e,["attr","size","title"]),c=s||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),i.createElement("svg",a({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,u,{className:r,style:a(a({color:e.color||t.color},t.style),e.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),o&&i.createElement("title",null,o),e.children)};return void 0!==o?i.createElement(o.Consumer,null,function(e){return t(e)}):t(s)}function c(e){var t;return(t={tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"}}]},function(e){return i.createElement(u,a({attr:a({},t.attr)},e),function e(t){return t&&t.map(function(t,r){return i.createElement(t.tag,a({key:r},t.attr),e(t.child))})}(t.child))})(e)}r(3042);var h=r(9783);function d(e){let{pid:t}=e,[r,s]=(0,i.useState)(0),[o,a]=(0,i.useState)(void 0),{rate:l,isLoading:u,loginError:d,currentUser:f}=(0,h.E)();[,,,,,].fill(0);let p=e=>{s(e),l(t,f.uid,e)},m=e=>{a(e)},g=()=>{a(void 0)},y={orange:"#E5AE1C",gray:"#E9E9E8"};return(0,n.jsxs)("div",{className:"flex flex-col items-start justify-start cursor-pointer gap-1",children:[(0,n.jsx)("p",{children:"Give Your rating"}),!u&&(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(c,{size:25,color:o>0||r>0?y.orange:y.gray,onClick:()=>p(1),onMouseOver:()=>m(1),onMouseLeave:g}),(0,n.jsx)(c,{size:25,color:o>1||r>1?y.orange:y.gray,onClick:()=>p(2),onMouseOver:()=>m(2),onMouseLeave:g}),(0,n.jsx)(c,{size:25,color:o>2||r>2?y.orange:y.gray,onClick:()=>p(3),onMouseOver:()=>m(3),onMouseLeave:g}),(0,n.jsx)(c,{size:25,color:o>3||r>3?y.orange:y.gray,onClick:()=>p(4),onMouseOver:()=>m(4),onMouseLeave:g}),(0,n.jsx)(c,{size:25,color:o>4||r>4?y.orange:y.gray,onClick:()=>p(5),onMouseOver:()=>m(5),onMouseLeave:g}),(0,n.jsx)("div",{className:" ml-2 p-1 rounded-full font-bold bg-themed4 text-sm text-white",children:o})]}),u&&(0,n.jsx)("p",{className:"text-xs font-bold text-red-500",children:"Please wait ..."})]})}},4002:function(e,t,r){"use strict";let n;r.d(t,{Vo:function(){return m},HD:function(){return y}});var i=r(5893),s=r(7294),o=r(6383),a=r(3247),l=r(6318);let u="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var c={randomUUID:u};let h=new Uint8Array(16);function d(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(h)}let f=[];for(let e=0;e<256;++e)f.push((e+256).toString(16).slice(1));var p=function(e,t,r){if(c.randomUUID&&!t&&!e)return c.randomUUID();e=e||{};let n=e.random||(e.rng||d)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return function(e,t=0){return(f[e[t+0]]+f[e[t+1]]+f[e[t+2]]+f[e[t+3]]+"-"+f[e[t+4]]+f[e[t+5]]+"-"+f[e[t+6]]+f[e[t+7]]+"-"+f[e[t+8]]+f[e[t+9]]+"-"+f[e[t+10]]+f[e[t+11]]+f[e[t+12]]+f[e[t+13]]+f[e[t+14]]+f[e[t+15]]).toLowerCase()}(n)};let m=(0,s.createContext)(),g=(e,t)=>{switch(t.type){case"SIGNUP":case"LOGIN":case"LOGOUT":case"ONCHANGE":return{...e,currentUser:t.payload};default:return{...e}}},y=e=>{let{children:t}=e,[r,n]=(0,s.useState)(!1),[u,c]=(0,s.useState)(),[h,d]=(0,s.useState)(),[f,y]=(0,s.useState)(null),[v,w]=(0,s.useReducer)(g,{currentUser:null,isAuthReady:!1});(0,s.useEffect)(()=>{let e=(0,o.Aj)(l.I,e=>{e&&(0,a.QT)((0,a.JU)(l.db,"users",e.uid)).then(t=>{w({type:"ONCHANGE",payload:{uid:e.uid,displayName:t.data().displayName,email:t.data().email,mobile:t.data().mobile,premises:t.data().premises,street:t.data().street,area:t.data().area,landmark:t.data().landmark,city:t.data().city,state:t.data().state,pin:t.data().pin}})})});return()=>{e()}},[]);let b=async e=>{n(!0);try{await (0,o.Xb)(l.I,e.email,e.password).then(t=>{(0,o.ck)(l.I.currentUser,{displayName:e.name,email:e.email}),(0,a.pl)((0,a.JU)(l.db,"users",t.user.uid),{displayName:e.name,email:e.name,mobile:e.mobile,premises:e.premises,street:e.street,area:e.area,landmark:e.landmark,city:e.city,state:e.state,pin:e.pin}),w({type:"SIGNUP",payload:{uid:t.user.uid,displayName:e.name,email:e.email,mobile:e.mobile,premises:e.premises,street:e.street,area:e.area,landmark:e.landmark,city:e.city,state:e.state,pin:e.pin}})}),n(!1)}catch(e){n(!0),d(e.message),n(!1)}},E=async(e,t)=>{try{n(!0),await (0,o.e5)(l.I,e,t).then(e=>{let t=(0,a.JU)(l.db,"users",e.user.uid);(0,a.QT)(t).then(t=>{w({type:"LOGIN",payload:{uid:e.user.uid,displayName:t.data().displayName,email:t.data().email,mobile:t.data().mobile,premises:t.data().premises,street:t.data().street,area:t.data().area,landmark:t.data().landmark,city:t.data().city,state:t.data().state,pin:t.data().pin}})})}),n(!1)}catch(e){n(!0),d("invalid email or password "),n(!1)}},_=async e=>{n(!0),(0,o.w7)(l.I).then(()=>{w({type:"LOGOUT",payload:null})}),n(!1)},T=async()=>{let e=new o.hJ;try{await (0,o.rh)(l.I,e).then(e=>{let t=o.hJ.credentialFromResult(e);t.accessToken,(0,a.pl)((0,a.JU)(l.db,"users",e.user.uid),{displayName:e.user.displayName,email:e.user.email}),w({type:"SIGNUP",payload:{uid:e.user.uid,displayName:e.user.displayName,email:e.user.email}}),c(!0)})}catch(e){d(e.message)}},I=async(e,t,r,i)=>{try{n(!0),await (0,a.pl)((0,a.JU)(l.db,"reviews",p()),{pid:e,userid:t,name:r,rev:i,date:Date.now()}),c(!0),n(!1)}catch(e){n(!0),d(e.message),n(!1)}},x=async e=>{if(v.currentUser){let t=(0,a.IO)((0,a.hJ)(l.db,"ratings"),(0,a.ar)("userid","==",v.currentUser.uid),(0,a.ar)("pid","==",e));(0,a.cf)(t,e=>{e.docs.forEach(e=>{y(e.data().rate),console.log(e.data().rate)})})}},C=async(e,t,r)=>{console.log(t);try{n(!0),await (0,a.pl)((0,a.JU)(l.db,"ratings",p()),{pid:e,userid:t,rate:r}),n(!1)}catch(e){n(!0),d(e.message),n(!1)}};return(0,i.jsx)(m.Provider,{value:{isLoading:r,success:u,signup:b,loginError:h,...v,logout:_,login:E,signupWithGoogle:T,updatereview:I,rate:C,getrate:x,userrate:f},children:t})}},6318:function(e,t,r){"use strict";r.d(t,{I:function(){return A},db:function(){return k}});var n,i,s,o,a=r(5816);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(0,a.KN)("firebase","9.18.0","app");var l=r(6383),u=r(4444),c=r(740);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let h="firebasestorage.googleapis.com";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d extends u.ZR{constructor(e,t,r=0){super(f(e),`Firebase Storage: ${t} (${f(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,d.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return f(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}function f(e){return"storage/"+e}function p(e){return new d(s.INVALID_ARGUMENT,e)}function m(){return new d(s.APP_DELETED,"The Firebase app was deleted.")}(n=s||(s={})).UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=g.makeFromUrl(e,t)}catch(t){return new g(e,"")}if(""===r.path)return r;throw new d(s.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}static makeFromUrl(e,t){let r=null,n="([A-Za-z0-9.\\-_]+)",i=RegExp("^gs://"+n+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}let a=t.replace(/[.]/g,"\\."),l=RegExp(`^https?://${a}/v[A-Za-z0-9_]+/b/${n}/o(/([^?#]*).*)?$`,"i"),u=RegExp(`^https?://${t===h?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${n}/([^?#]*)`,"i"),c=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:l,indices:{bucket:1,path:3},postModify:o},{regex:u,indices:{bucket:1,path:2},postModify:o}];for(let t=0;t<c.length;t++){let n=c[t],i=n.regex.exec(e);if(i){let e=i[n.indices.bucket],t=i[n.indices.path];t||(t=""),r=new g(e,t),n.postModify(r);break}}if(null==r)throw new d(s.INVALID_URL,"Invalid URL '"+e+"'.");return r}}class y{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function v(e,t,r,n){if(n<t)throw p(`Invalid value for '${e}'. Expected ${t} or greater.`);if(n>r)throw p(`Invalid value for '${e}'. Expected ${r} or less.`)}(i=o||(o={}))[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w{constructor(e,t,r,n,i,s,o,a,l,u,c,h=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=n,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=u,this.connectionFactory_=c,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){let e=(e,t)=>{if(t){e(!1,new b(!1,null,!0));return}let r=this.connectionFactory_();this.pendingConnection_=r;let n=e=>{let t=e.loaded,r=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,r)};null!==this.progressCallback_&&r.addUploadProgressListener(n),r.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&r.removeUploadProgressListener(n),this.pendingConnection_=null;let t=r.getErrorCode()===o.NO_ERROR,i=r.getStatus();if(!t||/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,t){let r=-1!==[408,429].indexOf(e),n=-1!==t.indexOf(e);return e>=500&&e<600||r||n}(i,this.additionalRetryCodes_)&&this.retry){let t=r.getErrorCode()===o.ABORT;e(!1,new b(!1,null,t));return}let s=-1!==this.successCodes_.indexOf(i);e(!0,new b(s,r))})},t=(e,t)=>{let r=this.resolve_,n=this.reject_,i=t.connection;if(t.wasSuccessCode)try{let e=this.callback_(i,i.getResponse());void 0!==e?r(e):r()}catch(e){n(e)}else if(null!==i){let e=new d(s.UNKNOWN,"An unknown error occurred, please check the error payload for server response.");e.serverResponse=i.getErrorText(),n(this.errorCallback_?this.errorCallback_(i,e):e)}else if(t.canceled){let e=this.appDelete_?m():new d(s.CANCELED,"User canceled the upload/download.");n(e)}else{let e=new d(s.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.");n(e)}};this.canceled_?t(!1,new b(!1,null,!0)):this.backoffId_=/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,t,r){let n=1,i=null,s=null,o=!1,a=0,l=!1;function u(...e){l||(l=!0,t.apply(null,e))}function c(t){i=setTimeout(()=>{i=null,e(d,2===a)},t)}function h(){s&&clearTimeout(s)}function d(e,...t){let r;if(l){h();return}if(e){h(),u.call(null,e,...t);return}let i=2===a||o;if(i){h(),u.call(null,e,...t);return}n<64&&(n*=2),1===a?(a=2,r=0):r=(n+Math.random())*1e3,c(r)}let f=!1;function p(e){!f&&(f=!0,h(),!l&&(null!==i?(e||(a=2),clearTimeout(i),c(0)):e||(a=1)))}return c(0),s=setTimeout(()=>{o=!0,p(!0)},r),p}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class b{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E{constructor(e,t){this._service=e,t instanceof g?this._location=t:this._location=g.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new E(e,t)}get root(){let e=new g(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return function(e){let t=e.lastIndexOf("/",e.length-2);return -1===t?e:e.slice(t+1)}(this._location.path)}get storage(){return this._service}get parent(){let e=/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){if(0===e.length)return null;let t=e.lastIndexOf("/");if(-1===t)return"";let r=e.slice(0,t);return r}(this._location.path);if(null===e)return null;let t=new g(this._location.bucket,e);return new E(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw new d(s.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}}function _(e,t){let r=null==t?void 0:t.storageBucket;return null==r?null:g.makeFromBucketSpec(r,e)}class T{constructor(e,t,r,n,i){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=n,this._firebaseVersion=i,this._bucket=null,this._host=h,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,null!=n?this._bucket=g.makeFromBucketSpec(n,this._host):this._bucket=_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=g.makeFromBucketSpec(this._url,e):this._bucket=_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){v("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){v("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){let e=this._appCheckProvider.getImmediate({optional:!0});if(e){let t=await e.getToken();return t.token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new E(this,e)}_makeRequest(e,t,r,n,i=!0){if(this._deleted)return new y(m());{let s=function(e,t,r,n,i,s,o=!0){var a,l,u;let c=function(e){let t=encodeURIComponent,r="?";for(let n in e)if(e.hasOwnProperty(n)){let i=t(n)+"="+t(e[n]);r=r+i+"&"}return r.slice(0,-1)}(e.urlParams),h=e.url+c,d=Object.assign({},e.headers);return a=d,t&&(a["X-Firebase-GMPID"]=t),l=d,null!==r&&r.length>0&&(l.Authorization="Firebase "+r),d["X-Firebase-Storage-Version"]="webjs/"+(null!=s?s:"AppManager"),u=d,null!==n&&(u["X-Firebase-AppCheck"]=n),new w(h,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,r,n,t,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,t){let[r,n]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,n).getPromise()}}let I="@firebase/storage",x="0.11.2",C="storage";(0,a.Xd)(new c.wA(C,function(e,{instanceIdentifier:t}){let r=e.getProvider("app").getImmediate(),n=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new T(r,n,i,t,a.Jn)},"PUBLIC").setMultipleInstances(!0)),(0,a.KN)(I,x,""),(0,a.KN)(I,x,"esm2017");var S=r(3247);let N=(0,a.ZF)({apiKey:"AIzaSyA-_y4uAnE50r5bbnvuMk51RMRCtuXXEZE",authDomain:"ecomnext-fcb05.firebaseapp.com",projectId:"ecomnext-fcb05",storageBucket:"ecomnext-fcb05.appspot.com",messagingSenderId:"42861101678",appId:"1:42861101678:web:8e81ec0bf67797a136dc7f"}),A=(0,l.v0)(N);!function(e=(0,a.Mq)(),t){e=(0,u.m9)(e);let r=(0,a.qX)(e,C),n=r.getImmediate({identifier:void 0}),i=(0,u.P0)("storage");i&&function(e,t,r,n={}){!function(e,t,r,n={}){e.host=`${t}:${r}`,e._protocol="http";let{mockUserToken:i}=n;i&&(e._overrideAuthToken="string"==typeof i?i:(0,u.Sg)(i,e.app.options.projectId))}(e,t,r,n)}(n,...i)}();let k=(0,S.ad)()},9783:function(e,t,r){"use strict";r.d(t,{E:function(){return s}});var n=r(4002),i=r(7294);let s=()=>{let e=(0,i.useContext)(n.Vo);if(!e)throw Error("useAutheCOtext must be inside an ContextProvider");return e}},6888:function(e,t,r){"use strict";r.d(t,{L:function(){return rg}});let n="undefined"!=typeof navigator&&"ReactNative"===navigator.product,i={timeout:n?6e4:12e4};function s(e){let t="string"==typeof e?Object.assign({url:e},i):Object.assign({},i,e),r=new URL(t.url,"http://localhost");if(t.timeout=function e(t){if(!1===t||0===t)return!1;if(t.connect||t.socket)return t;let r=Number(t);return isNaN(r)?e(i.timeout):{connect:r,socket:r}}(t.timeout),t.query){for(let[e,n]of Object.entries(t.query))if(void 0!==n){if(Array.isArray(n))for(let t of n)r.searchParams.append(e,t);else r.searchParams.append(e,n)}}return t.method=t.body&&!t.method?"POST":(t.method||"GET").toUpperCase(),t.url="http://localhost"===r.origin?"".concat(r.pathname,"?").concat(r.searchParams):r.toString(),t}let o=/^https?:\/\//i;function a(e){if(!o.test(e.url))throw Error('"'.concat(e.url,'" is not a valid URL'))}var l,u,c,h,d,f,p,m,g,y,v,w,b,E,_,T,I,x,C,S,N,A,k,O,R,D,L,P,M,j=r(4947),U=e=>function(t,r){let n="onError"===t,i=r;for(var s=arguments.length,o=Array(s>2?s-2:0),a=2;a<s;a++)o[a-2]=arguments[a];for(let r=0;r<e[t].length;r++){let s=e[t][r];if(i=s(i,...o),n&&!i)break}return i};let F=["request","response","progress","error","abort"],V=["processOptions","validateOptions","interceptRequest","finalizeOptions","onRequest","onResponse","onError","onReturn","onHeaders"];var B=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},q=(e,t,r)=>(B(e,t,"read from private field"),r?r.call(e):t.get(e)),z=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},$=(e,t,r,n)=>(B(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);l=new WeakMap,u=new WeakMap,c=new WeakMap,h=new WeakMap,d=new WeakMap;let H="function"==typeof XMLHttpRequest?"xhr":"fetch",K="xhr"===H?XMLHttpRequest:class{constructor(){this.readyState=0,z(this,l,void 0),z(this,u,void 0),z(this,c,void 0),z(this,h,{}),z(this,d,void 0)}open(e,t,r){$(this,l,e),$(this,u,t),$(this,c,""),this.readyState=1,this.onreadystatechange(),$(this,d,void 0)}abort(){q(this,d)&&q(this,d).abort()}getAllResponseHeaders(){return q(this,c)}setRequestHeader(e,t){q(this,h)[e]=t}send(e){let t="arraybuffer"!==this.responseType,r={method:q(this,l),headers:q(this,h),signal:null,body:e};"function"==typeof AbortController&&($(this,d,new AbortController),r.signal=q(this,d).signal),"undefined"!=typeof document&&(r.credentials=this.withCredentials?"include":"omit"),fetch(q(this,u),r).then(e=>(e.headers.forEach((e,t)=>{$(this,c,q(this,c)+"".concat(t,": ").concat(e,"\r\n"))}),this.status=e.status,this.statusText=e.statusText,this.readyState=3,t?e.text():e.arrayBuffer())).then(e=>{"string"==typeof e?this.responseText=e:this.response=e,this.readyState=4,this.onreadystatechange()}).catch(e=>{var t;if("AbortError"===e.name){this.onabort();return}null==(t=this.onerror)||t.call(this,e)})}};var G=(e,t)=>{let r=e.options,n=e.applyMiddleware("finalizeOptions",r),i={},s=e.applyMiddleware("interceptRequest",void 0,{adapter:H,context:e});if(s){let e=setTimeout(t,0,null,s),r=()=>clearTimeout(e);return{abort:r}}let o=new K,a=n.headers,l=n.timeout,u=!1,c=!1,h=!1;if(o.onerror=p,o.ontimeout=p,o.onabort=()=>{f(!0),u=!0},o.onreadystatechange=()=>{l&&(f(),i.socket=setTimeout(()=>d("ESOCKETTIMEDOUT"),l.socket)),u||4!==o.readyState||0===o.status||function(){if(!u&&!c&&!h){if(0===o.status){p(Error("Unknown XHR error"));return}f(),c=!0,t(null,{body:o.response||o.responseText,url:n.url,method:n.method,headers:j(o.getAllResponseHeaders()),statusCode:o.status,statusMessage:o.statusText})}}()},o.open(n.method,n.url,!0),o.withCredentials=!!n.withCredentials,a&&o.setRequestHeader)for(let e in a)a.hasOwnProperty(e)&&o.setRequestHeader(e,a[e]);return n.rawBody&&(o.responseType="arraybuffer"),e.applyMiddleware("onRequest",{options:n,adapter:H,request:o,context:e}),o.send(n.body||null),l&&(i.connect=setTimeout(()=>d("ETIMEDOUT"),l.connect)),{abort:function(){u=!0,o&&o.abort()}};function d(t){h=!0,o.abort();let r=Error("ESOCKETTIMEDOUT"===t?"Socket timed out on request to ".concat(n.url):"Connection timed out on request to ".concat(n.url));r.code=t,e.channels.error.publish(r)}function f(e){(e||u||o.readyState>=2&&i.connect)&&clearTimeout(i.connect),i.socket&&clearTimeout(i.socket)}function p(e){if(c)return;f(!0),c=!0,o=null;let r=e||Error("Network error while attempting to reach ".concat(n.url));r.isNetworkError=!0,r.request=n,t(r)}};let W=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G;return function e(t,r){let n=[],i=V.reduce((e,t)=>(e[t]=e[t]||[],e),{processOptions:[s],validateOptions:[a]});function o(e){let t=F.reduce((e,t)=>(e[t]=function(){let e=Object.create(null),t=0;return{publish:function(t){for(let r in e)e[r](t)},subscribe:function(r){let n=t++;return e[n]=r,function(){delete e[n]}}}}(),e),{}),n=U(i),s=n("processOptions",e);n("validateOptions",s);let o={options:s,channels:t,applyMiddleware:n},a=null,l=t.request.subscribe(e=>{a=r(e,(r,i)=>(function(e,r,i){let s=e,o=r;if(!s)try{o=n("onResponse",r,i)}catch(e){o=null,s=e}(s=s&&n("onError",s,i))?t.error.publish(s):o&&t.response.publish(o)})(r,i,e))});t.abort.subscribe(()=>{l(),a&&a.abort()});let u=n("onReturn",t,o);return u===t&&t.request.publish(o),u}return o.use=function(e){if(!e)throw Error("Tried to add middleware that resolved to falsey value");if("function"==typeof e)throw Error("Tried to add middleware that was a function. It probably expects you to pass options to it.");if(e.onReturn&&i.onReturn.length>0)throw Error("Tried to add new middleware with `onReturn` handler, but another handler has already been registered for this event");return V.forEach(t=>{e[t]&&i[t].push(e[t])}),n.push(e),o},o.clone=function(){return e(n,r)},t.forEach(o.use),o}(e,t)};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function Q(e){return"[object Object]"===Object.prototype.toString.call(e)}r(1227);var X=r(8764).lW;Object.prototype.hasOwnProperty;let J=void 0===X?()=>!1:e=>X.isBuffer(e),Y=["boolean","string","number"];var Z="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};let ee=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.implementation||Promise;if(!t)throw Error("`Promise` is not available in global scope, and no implementation was passed");return{onReturn:(r,n)=>new t((t,i)=>{let s=n.options.cancelToken;s&&s.promise.then(e=>{r.abort.publish(e),i(e)}),r.error.subscribe(i),r.response.subscribe(r=>{t(e.onlyBody?r.body:r)}),setTimeout(()=>{try{r.request.publish(n)}catch(e){i(e)}},0)})}};class et{constructor(e){this.__CANCEL__=!0,this.message=e}toString(){return"Cancel".concat(this.message?": ".concat(this.message):"")}}let er=class{constructor(e){if("function"!=typeof e)throw TypeError("executor must be a function.");let t=null;this.promise=new Promise(e=>{t=e}),e(e=>{this.reason||(this.reason=new et(e),t(this.reason))})}},en=er;en.source=()=>{let e;let t=new er(t=>{e=t});return{token:t,cancel:e}},ee.Cancel=et,ee.CancelToken=en,ee.isCancel=e=>!!(e&&e.__CANCEL__);var ei=(e,t,r)=>("GET"===r.method||"HEAD"===r.method)&&(e.isNetworkError||!1);let es=e=>null!==e&&"object"==typeof e&&"function"==typeof e.pipe;var eo=e=>{let t=e.maxRetries||5,r=e.retryDelay||ea,n=e.shouldRetry;return{onError:(e,i)=>{let s=i.options,o=s.maxRetries||t,a=s.shouldRetry||n,l=s.attemptNumber||0;if(es(s.body)||!a(e,l,s)||l>=o)return e;let u=Object.assign({},i,{options:Object.assign({},s,{attemptNumber:l+1})});return setTimeout(()=>i.channels.request.publish(u),r(l)),null}}};function ea(e){return 100*Math.pow(2,e)+100*Math.random()}let el=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return eo({shouldRetry:ei,...e})};el.shouldRetry=ei;var eu=r(655);function ec(e){return"function"==typeof e}function eh(e){var t=e(function(e){Error.call(e),e.stack=Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var ed=eh(function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}});function ef(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var ep=function(){var e;function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e,t,r,n,i,s=this._parentage;if(s){if(this._parentage=null,Array.isArray(s))try{for(var o=(0,eu.XA)(s),a=o.next();!a.done;a=o.next())a.value.remove(this)}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}else s.remove(this)}var l=this.initialTeardown;if(ec(l))try{l()}catch(e){i=e instanceof ed?e.errors:[e]}var u=this._finalizers;if(u){this._finalizers=null;try{for(var c=(0,eu.XA)(u),h=c.next();!h.done;h=c.next()){var d=h.value;try{eg(d)}catch(e){i=null!=i?i:[],e instanceof ed?i=(0,eu.ev)((0,eu.ev)([],(0,eu.CR)(i)),(0,eu.CR)(e.errors)):i.push(e)}}}catch(e){r={error:e}}finally{try{h&&!h.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}}if(i)throw new ed(i)}},t.prototype.add=function(e){var r;if(e&&e!==this){if(this.closed)eg(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(e)}}},t.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},t.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},t.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&ef(t,e)},t.prototype.remove=function(e){var r=this._finalizers;r&&ef(r,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t}();function em(e){return e instanceof ep||e&&"closed"in e&&ec(e.remove)&&ec(e.add)&&ec(e.unsubscribe)}function eg(e){ec(e)?e():e.unsubscribe()}ep.EMPTY;var ey={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ev={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=ev.delegate;return(null==i?void 0:i.setTimeout)?i.setTimeout.apply(i,(0,eu.ev)([e,t],(0,eu.CR)(r))):setTimeout.apply(void 0,(0,eu.ev)([e,t],(0,eu.CR)(r)))},clearTimeout:function(e){var t=ev.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function ew(){}var eb=eE("C",void 0,void 0);function eE(e,t,r){return{kind:e,value:t,error:r}}var e_=null,eT=function(e){function t(t){var r=e.call(this)||this;return r.isStopped=!1,t?(r.destination=t,em(t)&&t.add(r)):r.destination=ek,r}return(0,eu.ZT)(t,e),t.create=function(e,t,r){return new eS(e,t,r)},t.prototype.next=function(e){this.isStopped?eA(eE("N",e,void 0),this):this._next(e)},t.prototype.error=function(e){this.isStopped?eA(eE("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?eA(eb,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(ep),eI=Function.prototype.bind;function ex(e,t){return eI.call(e,t)}var eC=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){eN(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){eN(e)}else eN(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){eN(e)}},e}(),eS=function(e){function t(t,r,n){var i,s,o=e.call(this)||this;return ec(t)||!t?i={next:null!=t?t:void 0,error:null!=r?r:void 0,complete:null!=n?n:void 0}:o&&ey.useDeprecatedNextContext?((s=Object.create(t)).unsubscribe=function(){return o.unsubscribe()},i={next:t.next&&ex(t.next,s),error:t.error&&ex(t.error,s),complete:t.complete&&ex(t.complete,s)}):i=t,o.destination=new eC(i),o}return(0,eu.ZT)(t,e),t}(eT);function eN(e){ey.useDeprecatedSynchronousErrorHandling?ey.useDeprecatedSynchronousErrorHandling&&e_&&(e_.errorThrown=!0,e_.error=e):ev.setTimeout(function(){var t=ey.onUnhandledError;if(t)t(e);else throw e})}function eA(e,t){var r=ey.onStoppedNotification;r&&ev.setTimeout(function(){return r(e,t)})}var ek={closed:!0,next:ew,error:function(e){throw e},complete:ew},eO="function"==typeof Symbol&&Symbol.observable||"@@observable";function eR(e){return e}var eD=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n,i=this,s=(n=e)&&n instanceof eT||n&&ec(n.next)&&ec(n.error)&&ec(n.complete)&&em(n)?e:new eS(e,t,r);return function(e){if(ey.useDeprecatedSynchronousErrorHandling){var t=!e_;if(t&&(e_={errorThrown:!1,error:null}),e(),t){var r=e_,n=r.errorThrown,i=r.error;if(e_=null,n)throw i}}else e()}(function(){var e=i.operator,t=i.source;s.add(e?e.call(s,t):t?i._subscribe(s):i._trySubscribe(s))}),s},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=eL(t))(function(t,n){var i=new eS({next:function(t){try{e(t)}catch(e){n(e),i.unsubscribe()}},error:n,complete:t});r.subscribe(i)})},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[eO]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0===e.length?eR:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)})(this)},e.prototype.toPromise=function(e){var t=this;return new(e=eL(e))(function(e,r){var n;t.subscribe(function(e){return n=e},function(e){return r(e)},function(){return e(n)})})},e.create=function(t){return new e(t)},e}();function eL(e){var t;return null!==(t=null!=e?e:ey.Promise)&&void 0!==t?t:Promise}var eP=eh(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});function eM(e,t){var r="object"==typeof t;return new Promise(function(n,i){var s,o=!1;e.subscribe({next:function(e){s=e,o=!0},error:i,complete:function(){o?n(s):r?n(t.defaultValue):i(new eP)}})})}function ej(e){return function(t){if(ec(null==t?void 0:t.lift))return t.lift(function(t){try{return e(t,this)}catch(e){this.error(e)}});throw TypeError("Unable to lift unknown Observable type")}}var eU=function(e){function t(t,r,n,i,s,o){var a=e.call(this,t)||this;return a.onFinalize=s,a.shouldUnsubscribe=o,a._next=r?function(e){try{r(e)}catch(e){t.error(e)}}:e.prototype._next,a._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=n?function(){try{n()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,a}return(0,eu.ZT)(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),r||null===(t=this.onFinalize)||void 0===t||t.call(this)}},t}(eT);function eF(e,t){return ej(function(r,n){var i=0;r.subscribe(new eU(n,function(r){n.next(e.call(t,r,i++))},void 0,void 0,void 0))})}function eV(e,t){return ej(function(r,n){var i=0;r.subscribe(new eU(n,function(r){return e.call(t,r,i++)&&n.next(r)},void 0,void 0,void 0))})}var eB=r(1982);class eq extends Error{constructor(e){let t=e$(e);super(t.message),this.statusCode=400,Object.assign(this,t)}}class ez extends Error{constructor(e){let t=e$(e);super(t.message),this.statusCode=500,Object.assign(this,t)}}function e$(e){let t=e.body,r={response:e,statusCode:e.statusCode,responseBody:function(e,t){let r=(t.headers["content-type"]||"").toLowerCase(),n=-1!==r.indexOf("application/json");return n?JSON.stringify(e,null,2):e}(t,e),message:"",details:void 0};if(t.error&&t.message)return r.message="".concat(t.error," - ").concat(t.message),r;if(eH(t)&&eH(t.error)&&"mutationError"===t.error.type&&"string"==typeof t.error.description){let e=t.error.items||[],n=e.slice(0,5).map(e=>{var t;return null==(t=e.error)?void 0:t.description}).filter(Boolean),i=n.length?":\n- ".concat(n.join("\n- ")):"";return e.length>5&&(i+="\n...and ".concat(e.length-5," more")),r.message="".concat(t.error.description).concat(i),r.details=t.error,r}return t.error&&t.error.description?(r.message=t.error.description,r.details=t.error,r):(r.message=t.error||t.message||function(e){let t=e.statusMessage?" ".concat(e.statusMessage):"";return"".concat(e.method,"-request to ").concat(e.url," resulted in HTTP ").concat(e.statusCode).concat(t)}(e),r)}function eH(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}let eK={onResponse:e=>{if(e.statusCode>=500)throw new ez(e);if(e.statusCode>=400)throw new eq(e);return e}},eG={onResponse:e=>{let t=e.headers["x-sanity-warning"],r=Array.isArray(t)?t:[t];return r.filter(Boolean).forEach(e=>console.warn(e)),e}};function eW(e){if("string"==typeof e||Array.isArray(e))return{id:e};if("object"==typeof e&&null!==e&&"query"in e&&"string"==typeof e.query)return"params"in e&&"object"==typeof e.params&&null!==e.params?{query:e.query,params:e.params}:{query:e.query};throw Error("Unknown selection - must be one of:\n\n".concat("* Document ID (<docId>)\n* Array of document IDs\n* Object containing `query`"))}let eQ=["image","file"],eX=["before","after","replace"],eJ=e=>{if(!/^(~[a-z0-9]{1}[-\w]{0,63}|[a-z0-9]{1}[-\w]{0,63})$/.test(e))throw Error("Datasets can only contain lowercase characters, numbers, underscores and dashes, and start with tilde, and be maximum 64 characters")},eY=e=>{if(!/^[-a-z0-9]+$/i.test(e))throw Error("`projectId` can only contain only a-z, 0-9 and dashes")},eZ=e=>{if(-1===eQ.indexOf(e))throw Error("Invalid asset type: ".concat(e,". Must be one of ").concat(eQ.join(", ")))},e0=(e,t)=>{if(null===t||"object"!=typeof t||Array.isArray(t))throw Error("".concat(e,"() takes an object of properties"))},e1=(e,t)=>{if("string"!=typeof t||!/^[a-z0-9_][a-z0-9_.-]{0,127}$/i.test(t)||t.includes(".."))throw Error("".concat(e,'(): "').concat(t,'" is not a valid document ID'))},e2=(e,t)=>{if(!t._id)throw Error("".concat(e,'() requires that the document contains an ID ("_id" property)'));e1(e,t._id)},e3=(e,t,r)=>{let n="insert(at, selector, items)";if(-1===eX.indexOf(e)){let e=eX.map(e=>'"'.concat(e,'"')).join(", ");throw Error("".concat(n,' takes an "at"-argument which is one of: ').concat(e))}if("string"!=typeof t)throw Error("".concat(n,' takes a "selector"-argument which must be a string'));if(!Array.isArray(r))throw Error("".concat(n,' takes an "items"-argument which must be an array'))},e4=e=>{if(!e.dataset)throw Error("`dataset` must be provided to perform queries");return e.dataset||""},e6=e=>{if("string"!=typeof e||!/^[a-z0-9._-]{1,75}$/i.test(e))throw Error("Tag can only contain alphanumeric characters, underscores, dashes and dots, and be between one and 75 characters long.");return e},e5=e=>{let{query:t,params:r={},options:n={}}=e,i=new URLSearchParams,{tag:s,...o}=n;for(let[e,n]of(s&&i.set("tag",s),i.set("query",t),Object.entries(r)))i.set("$".concat(e),JSON.stringify(n));for(let[e,t]of Object.entries(o))t&&i.set(e,"".concat(t));return"?".concat(i)};var e8=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},e9=(e,t,r)=>(e8(e,t,"read from private field"),r?r.call(e):t.get(e)),e7=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},te=(e,t,r,n)=>(e8(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);class tt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.selection=e,this.operations=t}set(e){return this._assign("set",e)}setIfMissing(e){return this._assign("setIfMissing",e)}diffMatchPatch(e){return e0("diffMatchPatch",e),this._assign("diffMatchPatch",e)}unset(e){if(!Array.isArray(e))throw Error("unset(attrs) takes an array of attributes to unset, non-array given");return this.operations=Object.assign({},this.operations,{unset:e}),this}inc(e){return this._assign("inc",e)}dec(e){return this._assign("dec",e)}insert(e,t,r){return e3(e,t,r),this._assign("insert",{[e]:t,items:r})}append(e,t){return this.insert("after","".concat(e,"[-1]"),t)}prepend(e,t){return this.insert("before","".concat(e,"[0]"),t)}splice(e,t,r,n){let i=t<0?t-1:t,s=void 0===r||-1===r?-1:Math.max(0,t+r),o="".concat(e,"[").concat(i,":").concat(i<0&&s>=0?"":s,"]");return this.insert("replace",o,n||[])}ifRevisionId(e){return this.operations.ifRevisionID=e,this}serialize(){return{...eW(this.selection),...this.operations}}toJSON(){return this.serialize()}reset(){return this.operations={},this}_assign(e,t){let r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];return e0(e,t),this.operations=Object.assign({},this.operations,{[e]:Object.assign({},r&&this.operations[e]||{},t)}),this}_set(e,t){return this._assign(e,t,!1)}}let tr=class extends tt{constructor(e,t,r){super(e,t),e7(this,f,void 0),te(this,f,r)}clone(){return new tr(this.selection,{...this.operations},e9(this,f))}commit(e){if(!e9(this,f))throw Error("No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method");let t="string"==typeof this.selection,r=Object.assign({returnFirst:t,returnDocuments:!0},e);return e9(this,f).mutate({patch:this.serialize()},r)}};f=new WeakMap;let tn=class extends tt{constructor(e,t,r){super(e,t),e7(this,p,void 0),te(this,p,r)}clone(){return new tn(this.selection,{...this.operations},e9(this,p))}commit(e){if(!e9(this,p))throw Error("No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method");let t="string"==typeof this.selection,r=Object.assign({returnFirst:t,returnDocuments:!0},e);return e9(this,p).mutate({patch:this.serialize()},r)}};p=new WeakMap;var ti=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},ts=(e,t,r)=>(ti(e,t,"read from private field"),r?r.call(e):t.get(e)),to=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},ta=(e,t,r,n)=>(ti(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);let tl={returnDocuments:!1};class tu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;this.operations=e,this.trxId=t}create(e){return e0("create",e),this._add({create:e})}createIfNotExists(e){let t="createIfNotExists";return e0(t,e),e2(t,e),this._add({[t]:e})}createOrReplace(e){let t="createOrReplace";return e0(t,e),e2(t,e),this._add({[t]:e})}delete(e){return e1("delete",e),this._add({delete:{id:e}})}transactionId(e){return e?(this.trxId=e,this):this.trxId}serialize(){return[...this.operations]}toJSON(){return this.serialize()}reset(){return this.operations=[],this}_add(e){return this.operations.push(e),this}}let tc=class extends tu{constructor(e,t,r){super(e,r),to(this,m,void 0),ta(this,m,t)}clone(){return new tc([...this.operations],ts(this,m),this.trxId)}commit(e){if(!ts(this,m))throw Error("No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method");return ts(this,m).mutate(this.serialize(),Object.assign({transactionId:this.trxId},tl,e||{}))}patch(e,t){if("string"!=typeof e&&e instanceof tn)return this._add({patch:e.serialize()});if("function"==typeof t){let r=t(new tn(e,{},ts(this,m)));if(!(r instanceof tn))throw Error("function passed to `patch()` must return the patch");return this._add({patch:r.serialize()})}return this._add({patch:{id:e,...t}})}};m=new WeakMap;let th=class extends tu{constructor(e,t,r){super(e,r),to(this,g,void 0),ta(this,g,t)}clone(){return new th([...this.operations],ts(this,g),this.trxId)}commit(e){if(!ts(this,g))throw Error("No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method");return ts(this,g).mutate(this.serialize(),Object.assign({transactionId:this.trxId},tl,e||{}))}patch(e,t){if("string"!=typeof e&&e instanceof tr)return this._add({patch:e.serialize()});if("function"==typeof t){let r=t(new tr(e,{},ts(this,g)));if(!(r instanceof tr))throw Error("function passed to `patch()` must return the patch");return this._add({patch:r.serialize()})}return this._add({patch:{id:e,...t}})}};g=new WeakMap;let td=(e,t)=>!1===e?void 0:void 0===e?t:e,tf=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{dryRun:e.dryRun,returnIds:!0,returnDocuments:td(e.returnDocuments,!0),visibility:e.visibility||"sync",autoGenerateArrayKeys:e.autoGenerateArrayKeys,skipCrossDatasetReferenceValidation:e.skipCrossDatasetReferenceValidation}},tp=e=>"response"===e.type,tm=e=>e.body,tg=(e,t)=>e.reduce((e,r)=>(e[t(r)]=r,e),Object.create(null));function ty(e,t,r,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=!1===i.filterResponse?e=>e:e=>e.result;return tI(e,t,"query",{query:r,params:n},i).pipe(eF(s))}function tv(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i={uri:tN(e,"doc",r),json:!0,tag:n.tag};return tC(e,t,i).pipe(eV(tp),eF(e=>e.body.documents&&e.body.documents[0]))}function tw(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i={uri:tN(e,"doc",r.join(",")),json:!0,tag:n.tag};return tC(e,t,i).pipe(eV(tp),eF(e=>{let t=tg(e.body.documents||[],e=>e._id);return r.map(e=>t[e]||null)}))}function tb(e,t,r,n){return e2("createIfNotExists",r),tx(e,t,r,"createIfNotExists",n)}function tE(e,t,r,n){return e2("createOrReplace",r),tx(e,t,r,"createOrReplace",n)}function t_(e,t,r,n){return tI(e,t,"mutate",{mutations:[{delete:eW(r)}]},n)}function tT(e,t,r,n){let i=r instanceof tn||r instanceof tr||r instanceof tc||r instanceof th?r.serialize():r,s=Array.isArray(i)?i:[i],o=n&&n.transactionId;return tI(e,t,"mutate",{mutations:s,transactionId:o},n)}function tI(e,t,r,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s="mutate"===r,o=s?"":e5(n),a=!s&&o.length<11264,l=i.returnFirst,{timeout:u,token:c,tag:h,headers:d}=i,f=tN(e,r,a?o:""),p={method:a?"GET":"POST",uri:f,json:!0,body:a?void 0:n,query:s&&tf(i),timeout:u,headers:d,token:c,tag:h,canUseCdn:"query"===r,signal:i.signal};return tC(e,t,p).pipe(eV(tp),eF(tm),eF(e=>{if(!s)return e;let t=e.results||[];if(i.returnDocuments)return l?t[0]&&t[0].document:t.map(e=>e.document);let r=l?t[0]&&t[0].id:t.map(e=>e.id);return{transactionId:e.transactionId,results:t,[l?"documentId":"documentIds"]:r}}))}function tx(e,t,r,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=Object.assign({returnFirst:!0,returnDocuments:!0},i);return tI(e,t,"mutate",{mutations:[{[n]:r}]},s)}function tC(e,t,r){var n;let i=r.url||r.uri,s=e.config(),o=void 0===r.canUseCdn?["GET","HEAD"].indexOf(r.method||"GET")>=0&&0===i.indexOf("/data/"):r.canUseCdn,a=s.useCdn&&o,l=r.tag&&s.requestTagPrefix?[s.requestTagPrefix,r.tag].join("."):r.tag||s.requestTagPrefix;l&&(r.query={tag:e6(l),...r.query});let u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},n=t.token||e.token;n&&(r.Authorization="Bearer ".concat(n)),t.useGlobalApi||e.useProjectHostname||!e.projectId||(r["X-Sanity-Project-ID"]=e.projectId);let i=Boolean(void 0===t.withCredentials?e.token||e.withCredentials:t.withCredentials),s=void 0===t.timeout?e.timeout:t.timeout;return Object.assign({},t,{headers:Object.assign({},r,t.headers||{}),timeout:void 0===s?3e5:s,proxy:t.proxy||e.proxy,json:!0,withCredentials:i})}(s,Object.assign({},r,{url:tA(e,i,a)})),c=new eD(e=>t(u,s.requester).subscribe(e));return r.signal?c.pipe((n=r.signal,e=>new eD(t=>{let r=()=>t.error(function(e){var t,r;if(tk)return new DOMException(null!=(t=null==e?void 0:e.reason)?t:"The operation was aborted.","AbortError");let n=Error(null!=(r=null==e?void 0:e.reason)?r:"The operation was aborted.");return n.name="AbortError",n}(n));if(n&&n.aborted){r();return}let i=e.subscribe(t);return n.addEventListener("abort",r),()=>{n.removeEventListener("abort",r),i.unsubscribe()}}))):c}function tS(e,t,r){let n=tC(e,t,r).pipe(eV(e=>"response"===e.type),eF(e=>e.body));return n}function tN(e,t,r){let n=e.config(),i=e4(n),s="/".concat(t,"/").concat(i),o=r?"".concat(s,"/").concat(r):s;return"/data".concat(o).replace(/\/($|\?)/,"$1")}function tA(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{url:n,cdnUrl:i}=e.config();return"".concat(r?i:n,"/").concat(t.replace(/^\//,""))}let tk=Boolean(globalThis.DOMException);var tO=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},tR=(e,t,r)=>(tO(e,t,"read from private field"),r?r.call(e):t.get(e)),tD=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},tL=(e,t,r,n)=>(tO(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);class tP{constructor(e,t){tD(this,y,void 0),tD(this,v,void 0),tL(this,y,e),tL(this,v,t)}upload(e,t,r){return tj(tR(this,y),tR(this,v),e,t,r)}}y=new WeakMap,v=new WeakMap;class tM{constructor(e,t){tD(this,w,void 0),tD(this,b,void 0),tL(this,w,e),tL(this,b,t)}upload(e,t,r){let n=tj(tR(this,w),tR(this,b),e,t,r);return eM(n.pipe(eV(e=>"response"===e.type),eF(e=>e.body.document)))}}function tj(e,t,r,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};eZ(r);let s=i.extract||void 0;s&&!s.length&&(s=["none"]);let o=e4(e.config()),a="undefined"!=typeof window&&n instanceof window.File?Object.assign({filename:!1===i.preserveFilename?void 0:n.name,contentType:n.type},i):i,{tag:l,label:u,title:c,description:h,creditLine:d,filename:f,source:p}=a,m={label:u,title:c,description:h,filename:f,meta:s,creditLine:d};return p&&(m.sourceId=p.id,m.sourceName=p.name,m.sourceUrl=p.url),tC(e,t,{tag:l,method:"POST",timeout:a.timeout||0,uri:"/assets/".concat("image"===r?"images":"files","/").concat(o),headers:a.contentType?{"Content-Type":a.contentType}:{},query:m,body:n})}function tU(e){return"https://www.sanity.io/help/"+e}w=new WeakMap,b=new WeakMap;let tF=e=>{var t;let r,n;return t=function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return console.warn(e.join(" "),...r)},n=!1,function(){return n||(r=t(...arguments),n=!0),r}},tV=tF(["You are not using the Sanity CDN. That means your data is always fresh, but the CDN is faster and","cheaper. Think about it! For more info, see ".concat(tU("js-client-cdn-configuration")," "),"To hide this warning, please set the `useCdn` option to either `true` or `false` when creating","the client."]),tB=tF(["You have configured Sanity client to use a token in the browser. This may cause unintentional security issues.","See ".concat(tU("js-client-browser-token")," for more information and how to hide this warning.")]),tq=tF(["Using the Sanity client without specifying an API version is deprecated.","See ".concat(tU("js-client-api-version"))]);tF(["The default export of @sanity/client has been deprecated. Use the named export `createClient` instead"]);let tz={apiHost:"https://api.sanity.io",apiVersion:"1",useProjectHostname:!0},t$=["localhost","127.0.0.1","0.0.0.0"],tH=e=>-1!==t$.indexOf(e),tK=function(e){if("1"===e||"X"===e)return;let t=new Date(e),r=/^\d{4}-\d{2}-\d{2}$/.test(e)&&t instanceof Date&&t.getTime()>0;if(!r)throw Error("Invalid API version string, expected `1` or date in format `YYYY-MM-DD`")},tG=(e,t)=>{let r=Object.assign({},t,e);r.apiVersion||tq();let n=Object.assign({},tz,r),i=n.useProjectHostname;if("undefined"==typeof Promise){let e=tU("js-client-promise-polyfill");throw Error("No native Promise-implementation found, polyfill needed - see ".concat(e))}if(i&&!n.projectId)throw Error("Configuration must contain `projectId`");let s="undefined"!=typeof window&&window.location&&window.location.hostname,o=s&&tH(window.location.hostname);s&&o&&n.token&&!0!==n.ignoreBrowserTokenWarning?tB():void 0===n.useCdn&&tV(),i&&eY(n.projectId),n.dataset&&eJ(n.dataset),"requestTagPrefix"in n&&(n.requestTagPrefix=n.requestTagPrefix?e6(n.requestTagPrefix).replace(/\.+$/,""):void 0),n.apiVersion="".concat(n.apiVersion).replace(/^v/,""),n.isDefaultApi=n.apiHost===tz.apiHost,n.useCdn=Boolean(n.useCdn)&&!n.withCredentials,tK(n.apiVersion);let a=n.apiHost.split("://",2),l=a[0],u=a[1],c=n.isDefaultApi?"apicdn.sanity.io":u;return n.useProjectHostname?(n.url="".concat(l,"://").concat(n.projectId,".").concat(u,"/v").concat(n.apiVersion),n.cdnUrl="".concat(l,"://").concat(n.projectId,".").concat(c,"/v").concat(n.apiVersion)):(n.url="".concat(n.apiHost,"/v").concat(n.apiVersion),n.cdnUrl=n.url),n};var tW=(e,t)=>Object.keys(t).concat(Object.keys(e)).reduce((r,n)=>(r[n]=void 0===e[n]?t[n]:e[n],r),{});let tQ=(e,t)=>t.reduce((t,r)=>(void 0===e[r]||(t[r]=e[r]),t),{}),tX=["includePreviousRevision","includeResult","visibility","effectFormat","tag"],tJ={includeResult:!0};function tY(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{url:n,token:i,withCredentials:s,requestTagPrefix:o}=this.config(),a=r.tag&&o?[o,r.tag].join("."):r.tag,l={...tW(r,tJ),tag:a},u=tQ(l,tX),c=e5({query:e,params:t,options:{tag:a,...u}}),h="".concat(n).concat(tN(this,"listen",c));if(h.length>14800)return new eD(e=>e.error(Error("Query too large for listener")));let d=l.events?l.events:["mutation"],f=-1!==d.indexOf("reconnect"),p={};return(i||s)&&(p.withCredentials=!0),i&&(p.headers={Authorization:"Bearer ".concat(i)}),new eD(e=>{let t,r=u(),n=!1;function i(){!n&&(f&&e.next({type:"reconnect"}),n||r.readyState!==eB.CLOSED||(l(),clearTimeout(t),t=setTimeout(c,100)))}function s(t){e.error(function(e){if(e instanceof Error)return e;let t=tZ(e);return t instanceof Error?t:Error(t.error?t.error.description?t.error.description:"string"==typeof t.error?t.error:JSON.stringify(t.error,null,2):t.message||"Unknown listener error")}(t))}function o(t){let r=tZ(t);return r instanceof Error?e.error(r):e.next(r)}function a(){n=!0,l(),e.complete()}function l(){r.removeEventListener("error",i,!1),r.removeEventListener("channelError",s,!1),r.removeEventListener("disconnect",a,!1),d.forEach(e=>r.removeEventListener(e,o,!1)),r.close()}function u(){let e=new eB(h,p);return e.addEventListener("error",i,!1),e.addEventListener("channelError",s,!1),e.addEventListener("disconnect",a,!1),d.forEach(t=>e.addEventListener(t,o,!1)),e}function c(){r=u()}return function(){n=!0,l()}})}function tZ(e){try{let t=e.data&&JSON.parse(e.data)||{};return Object.assign({type:e.type},t)}catch(e){return e}}var t0=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},t1=(e,t,r)=>(t0(e,t,"read from private field"),r?r.call(e):t.get(e)),t2=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},t3=(e,t,r,n)=>(t0(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);class t4{constructor(e,t){t2(this,E,void 0),t2(this,_,void 0),t3(this,E,e),t3(this,_,t)}create(e,t){return t5(t1(this,E),t1(this,_),"PUT",e,t)}edit(e,t){return t5(t1(this,E),t1(this,_),"PATCH",e,t)}delete(e){return t5(t1(this,E),t1(this,_),"DELETE",e)}list(){return tS(t1(this,E),t1(this,_),{uri:"/datasets"})}}E=new WeakMap,_=new WeakMap;class t6{constructor(e,t){t2(this,T,void 0),t2(this,I,void 0),t3(this,T,e),t3(this,I,t)}create(e,t){return eM(t5(t1(this,T),t1(this,I),"PUT",e,t))}edit(e,t){return eM(t5(t1(this,T),t1(this,I),"PATCH",e,t))}delete(e){return eM(t5(t1(this,T),t1(this,I),"DELETE",e))}list(){return eM(tS(t1(this,T),t1(this,I),{uri:"/datasets"}))}}function t5(e,t,r,n,i){return eJ(n),tS(e,t,{method:r,uri:"/datasets/".concat(n),body:i})}T=new WeakMap,I=new WeakMap;var t8=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},t9=(e,t,r)=>(t8(e,t,"read from private field"),r?r.call(e):t.get(e)),t7=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},re=(e,t,r,n)=>(t8(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);class rt{constructor(e,t){t7(this,x,void 0),t7(this,C,void 0),re(this,x,e),re(this,C,t)}list(){return tS(t9(this,x),t9(this,C),{uri:"/projects"})}getById(e){return tS(t9(this,x),t9(this,C),{uri:"/projects/".concat(e)})}}x=new WeakMap,C=new WeakMap;class rr{constructor(e,t){t7(this,S,void 0),t7(this,N,void 0),re(this,S,e),re(this,N,t)}list(){return eM(tS(t9(this,S),t9(this,N),{uri:"/projects"}))}getById(e){return eM(tS(t9(this,S),t9(this,N),{uri:"/projects/".concat(e)}))}}S=new WeakMap,N=new WeakMap;var rn=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},ri=(e,t,r)=>(rn(e,t,"read from private field"),r?r.call(e):t.get(e)),rs=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},ro=(e,t,r,n)=>(rn(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);class ra{constructor(e,t){rs(this,A,void 0),rs(this,k,void 0),ro(this,A,e),ro(this,k,t)}getById(e){return tS(ri(this,A),ri(this,k),{uri:"/users/".concat(e)})}}A=new WeakMap,k=new WeakMap;class rl{constructor(e,t){rs(this,O,void 0),rs(this,R,void 0),ro(this,O,e),ro(this,R,t)}getById(e){return eM(tS(ri(this,O),ri(this,R),{uri:"/users/".concat(e)}))}}O=new WeakMap,R=new WeakMap;var ru=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},rc=(e,t,r)=>(ru(e,t,"read from private field"),r?r.call(e):t.get(e)),rh=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},rd=(e,t,r,n)=>(ru(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);let rf=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tz;rh(this,D,void 0),rh(this,L,void 0),this.listen=tY,this.config(t),rd(this,L,e),this.assets=new tP(this,rc(this,L)),this.datasets=new t4(this,rc(this,L)),this.projects=new rt(this,rc(this,L)),this.users=new ra(this,rc(this,L))}clone(){return new rf(rc(this,L),this.config())}config(e){if(void 0===e)return{...rc(this,D)};if(rc(this,D)&&!1===rc(this,D).allowReconfigure)throw Error("Existing client instance cannot be reconfigured - use `withConfig(newConfig)` to return a new client");return rd(this,D,tG(e,rc(this,D)||{})),this}withConfig(e){return new rf(rc(this,L),{...this.config(),...e})}fetch(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ty(this,rc(this,L),e,t,r)}getDocument(e,t){return tv(this,rc(this,L),e,t)}getDocuments(e,t){return tw(this,rc(this,L),e,t)}create(e,t){return tx(this,rc(this,L),e,"create",t)}createIfNotExists(e,t){return tb(this,rc(this,L),e,t)}createOrReplace(e,t){return tE(this,rc(this,L),e,t)}delete(e,t){return t_(this,rc(this,L),e,t)}mutate(e,t){return tT(this,rc(this,L),e,t)}patch(e,t){return new tr(e,t,this)}transaction(e){return new th(e,this)}request(e){return tS(this,rc(this,L),e)}getUrl(e,t){return tA(this,e,t)}getDataUrl(e,t){return tN(this,e,t)}};D=new WeakMap,L=new WeakMap;let rp=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tz;rh(this,P,void 0),rh(this,M,void 0),this.listen=tY,this.config(t),rd(this,M,e),this.assets=new tM(this,rc(this,M)),this.datasets=new t6(this,rc(this,M)),this.projects=new rr(this,rc(this,M)),this.users=new rl(this,rc(this,M)),this.observable=new rf(e,t)}clone(){return new rp(rc(this,M),this.config())}config(e){if(void 0===e)return{...rc(this,P)};if(rc(this,P)&&!1===rc(this,P).allowReconfigure)throw Error("Existing client instance cannot be reconfigured - use `withConfig(newConfig)` to return a new client");return this.observable&&this.observable.config(e),rd(this,P,tG(e,rc(this,P)||{})),this}withConfig(e){return new rp(rc(this,M),{...this.config(),...e})}fetch(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return eM(ty(this,rc(this,M),e,t,r))}getDocument(e,t){return eM(tv(this,rc(this,M),e,t))}getDocuments(e,t){return eM(tw(this,rc(this,M),e,t))}create(e,t){return eM(tx(this,rc(this,M),e,"create",t))}createIfNotExists(e,t){return eM(tb(this,rc(this,M),e,t))}createOrReplace(e,t){return eM(tE(this,rc(this,M),e,t))}delete(e,t){return eM(t_(this,rc(this,M),e,t))}mutate(e,t){return eM(tT(this,rc(this,M),e,t))}patch(e,t){return new tn(e,t,this)}transaction(e){return new tc(e,this)}request(e){return eM(tS(this,rc(this,M),e))}dataRequest(e,t,r){return eM(tI(this,rc(this,M),e,t,r))}getUrl(e,t){return tA(this,e,t)}getDataUrl(e,t){return tN(this,e,t)}};P=new WeakMap,M=new WeakMap;let rm=function(e){var t;let r=W([...e,eG,{processOptions:e=>{var t,r;let n=e.body;if(!n)return e;let i="function"==typeof n.pipe,s=!i&&!J(n)&&(-1!==Y.indexOf(typeof n)||Array.isArray(n)||!1!==Q(n)&&(void 0===(t=n.constructor)||!1!==Q(r=t.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf")));return s?Object.assign({},e,{body:JSON.stringify(e.body),headers:Object.assign({},e.headers,{"Content-Type":"application/json"})}):e}},{onResponse:e=>{let r=e.headers["content-type"]||"",n=t&&t.force||-1!==r.indexOf("application/json");return e.body&&r&&n?Object.assign({},e,{body:function(e){try{return JSON.parse(e)}catch(e){throw e.message="Failed to parsed response body as JSON: ".concat(e.message),e}}(e.body)}):e},processOptions:e=>Object.assign({},e,{headers:Object.assign({Accept:"application/json"},e.headers)})},{onRequest:e=>{if("xhr"!==e.adapter)return;let t=e.request,r=e.context;function n(e){return t=>{let n=t.lengthComputable?t.loaded/t.total*100:-1;r.channels.progress.publish({stage:e,percent:n,total:t.total,loaded:t.loaded,lengthComputable:t.lengthComputable})}}"upload"in t&&"onprogress"in t.upload&&(t.upload.onprogress=n("upload")),"onprogress"in t&&(t.onprogress=n("download"))}},eK,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.implementation||Z.Observable;if(!t)throw Error("`Observable` is not available in global scope, and no implementation was passed");return{onReturn:(e,r)=>new t(t=>(e.error.subscribe(e=>t.error(e)),e.progress.subscribe(e=>t.next(Object.assign({type:"progress"},e))),e.response.subscribe(e=>{t.next(Object.assign({type:"response"},e)),t.complete()}),e.request.publish(r),()=>e.abort.publish()))}}({implementation:eD})]);function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;return t({maxRedirects:0,...e})}return n.defaultRequester=r,n}([]);rm.defaultRequester;let rg=new rp(rm,{projectId:"bjgv8xeu",dataset:"production",apiVersion:"v2021-10-21",useCdn:!0})},1516:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDomainLocale=function(e,t,r,n){return!1},("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3740:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(6495).Z,i=r(2648).Z,s=r(1598).Z,o=r(7273).Z,a=s(r(7294)),l=i(r(2636)),u=r(7757),c=r(3735),h=r(3341);r(4210);var d=i(r(7746));let f={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1};function p(e){return void 0!==e.default}function m(e){return"number"==typeof e||void 0===e?e:"string"==typeof e&&/^[0-9]+$/.test(e)?parseInt(e,10):NaN}function g(e,t,r,i,s,o,a){if(!e||e["data-loaded-src"]===t)return;e["data-loaded-src"]=t;let l="decode"in e?e.decode():Promise.resolve();l.catch(()=>{}).then(()=>{if(e.parentElement&&e.isConnected){if("blur"===r&&o(!0),null==i?void 0:i.current){let t=new Event("load");Object.defineProperty(t,"target",{writable:!1,value:e});let r=!1,s=!1;i.current(n({},t,{nativeEvent:t,currentTarget:e,target:e,isDefaultPrevented:()=>r,isPropagationStopped:()=>s,persist:()=>{},preventDefault:()=>{r=!0,t.preventDefault()},stopPropagation:()=>{s=!0,t.stopPropagation()}}))}(null==s?void 0:s.current)&&s.current(e)}})}let y=a.forwardRef((e,t)=>{var{imgAttributes:r,heightInt:i,widthInt:s,qualityInt:l,className:u,imgStyle:c,blurStyle:h,isLazy:d,fill:f,placeholder:p,loading:m,srcString:y,config:v,unoptimized:w,loader:b,onLoadRef:E,onLoadingCompleteRef:_,setBlurComplete:T,setShowAltText:I,onLoad:x,onError:C}=e,S=o(e,["imgAttributes","heightInt","widthInt","qualityInt","className","imgStyle","blurStyle","isLazy","fill","placeholder","loading","srcString","config","unoptimized","loader","onLoadRef","onLoadingCompleteRef","setBlurComplete","setShowAltText","onLoad","onError"]);return m=d?"lazy":m,a.default.createElement(a.default.Fragment,null,a.default.createElement("img",Object.assign({},S,{loading:m,width:s,height:i,decoding:"async","data-nimg":f?"fill":"1",className:u,style:n({},c,h)},r,{ref:a.useCallback(e=>{t&&("function"==typeof t?t(e):"object"==typeof t&&(t.current=e)),e&&(C&&(e.src=e.src),e.complete&&g(e,y,p,E,_,T,w))},[y,p,E,_,T,C,w,t]),onLoad:e=>{let t=e.currentTarget;g(t,y,p,E,_,T,w)},onError:e=>{I(!0),"blur"===p&&T(!0),C&&C(e)}})))}),v=a.forwardRef((e,t)=>{let r,i;var s,{src:g,sizes:v,unoptimized:w=!1,priority:b=!1,loading:E,className:_,quality:T,width:I,height:x,fill:C,style:S,onLoad:N,onLoadingComplete:A,placeholder:k="empty",blurDataURL:O,layout:R,objectFit:D,objectPosition:L,lazyBoundary:P,lazyRoot:M}=e,j=o(e,["src","sizes","unoptimized","priority","loading","className","quality","width","height","fill","style","onLoad","onLoadingComplete","placeholder","blurDataURL","layout","objectFit","objectPosition","lazyBoundary","lazyRoot"]);let U=a.useContext(h.ImageConfigContext),F=a.useMemo(()=>{let e=f||U||c.imageConfigDefault,t=[...e.deviceSizes,...e.imageSizes].sort((e,t)=>e-t),r=e.deviceSizes.sort((e,t)=>e-t);return n({},e,{allSizes:t,deviceSizes:r})},[U]),V=j,B=V.loader||d.default;delete V.loader;let q="__next_img_default"in B;if(q){if("custom"===F.loader)throw Error('Image with src "'.concat(g,'" is missing "loader" prop.')+"\nRead more: https://nextjs.org/docs/messages/next-image-missing-loader")}else{let e=B;B=t=>{let{config:r}=t,n=o(t,["config"]);return e(n)}}if(R){"fill"===R&&(C=!0);let e={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[R];e&&(S=n({},S,e));let t={responsive:"100vw",fill:"100vw"}[R];t&&!v&&(v=t)}let z="",$=m(I),H=m(x);if("object"==typeof(s=g)&&(p(s)||void 0!==s.src)){let e=p(g)?g.default:g;if(!e.src)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received ".concat(JSON.stringify(e)));if(!e.height||!e.width)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received ".concat(JSON.stringify(e)));if(r=e.blurWidth,i=e.blurHeight,O=O||e.blurDataURL,z=e.src,!C){if($||H){if($&&!H){let t=$/e.width;H=Math.round(e.height*t)}else if(!$&&H){let t=H/e.height;$=Math.round(e.width*t)}}else $=e.width,H=e.height}}let K=!b&&("lazy"===E||void 0===E);((g="string"==typeof g?g:z).startsWith("data:")||g.startsWith("blob:"))&&(w=!0,K=!1),F.unoptimized&&(w=!0),q&&g.endsWith(".svg")&&!F.dangerouslyAllowSVG&&(w=!0);let[G,W]=a.useState(!1),[Q,X]=a.useState(!1),J=m(T),Y=Object.assign(C?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:D,objectPosition:L}:{},Q?{}:{color:"transparent"},S),Z="blur"===k&&O&&!G?{backgroundSize:Y.objectFit||"cover",backgroundPosition:Y.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:'url("data:image/svg+xml;charset=utf-8,'.concat(u.getImageBlurSvg({widthInt:$,heightInt:H,blurWidth:r,blurHeight:i,blurDataURL:O,objectFit:Y.objectFit}),'")')}:{},ee=function(e){let{config:t,src:r,unoptimized:n,width:i,quality:s,sizes:o,loader:a}=e;if(n)return{src:r,srcSet:void 0,sizes:void 0};let{widths:l,kind:u}=function(e,t,r){let{deviceSizes:n,allSizes:i}=e;if(r){let e=/(^|\s)(1?\d?\d)vw/g,t=[];for(let n;n=e.exec(r);n)t.push(parseInt(n[2]));if(t.length){let e=.01*Math.min(...t);return{widths:i.filter(t=>t>=n[0]*e),kind:"w"}}return{widths:i,kind:"w"}}if("number"!=typeof t)return{widths:n,kind:"w"};let s=[...new Set([t,2*t].map(e=>i.find(t=>t>=e)||i[i.length-1]))];return{widths:s,kind:"x"}}(t,i,o),c=l.length-1;return{sizes:o||"w"!==u?o:"100vw",srcSet:l.map((e,n)=>"".concat(a({config:t,src:r,quality:s,width:e})," ").concat("w"===u?e:n+1).concat(u)).join(", "),src:a({config:t,src:r,quality:s,width:l[c]})}}({config:F,src:g,unoptimized:w,width:$,quality:J,sizes:v,loader:B}),et=g,er={imageSrcSet:ee.srcSet,imageSizes:ee.sizes,crossOrigin:V.crossOrigin},en=a.useRef(N);a.useEffect(()=>{en.current=N},[N]);let ei=a.useRef(A);a.useEffect(()=>{ei.current=A},[A]);let es=n({isLazy:K,imgAttributes:ee,heightInt:H,widthInt:$,qualityInt:J,className:_,imgStyle:Y,blurStyle:Z,loading:E,config:F,fill:C,unoptimized:w,placeholder:k,loader:B,srcString:et,onLoadRef:en,onLoadingCompleteRef:ei,setBlurComplete:W,setShowAltText:X},V);return a.default.createElement(a.default.Fragment,null,a.default.createElement(y,Object.assign({},es,{ref:t})),b?a.default.createElement(l.default,null,a.default.createElement("link",Object.assign({key:"__nimg-"+ee.src+ee.srcSet+ee.sizes,rel:"preload",as:"image",href:ee.srcSet?void 0:ee.src},er))):null)});t.default=v,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},5569:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(2648).Z,i=r(7273).Z,s=n(r(7294)),o=r(4532),a=r(3353),l=r(1410),u=r(9064),c=r(370),h=r(9955),d=r(4224),f=r(508),p=r(1516),m=r(4266);let g=new Set;function y(e,t,r,n,i){if(i||a.isLocalURL(t)){if(!n.bypassPrefetchedCheck){let i=void 0!==n.locale?n.locale:"locale"in e?e.locale:void 0,s=t+"%"+r+"%"+i;if(g.has(s))return;g.add(s)}Promise.resolve(e.prefetch(t,r,n)).catch(e=>{})}}function v(e){return"string"==typeof e?e:l.formatUrl(e)}let w=s.default.forwardRef(function(e,t){let r,n;let{href:l,as:g,children:w,prefetch:b,passHref:E,replace:_,shallow:T,scroll:I,locale:x,onClick:C,onMouseEnter:S,onTouchStart:N,legacyBehavior:A=!1}=e,k=i(e,["href","as","children","prefetch","passHref","replace","shallow","scroll","locale","onClick","onMouseEnter","onTouchStart","legacyBehavior"]);r=w,A&&("string"==typeof r||"number"==typeof r)&&(r=s.default.createElement("a",null,r));let O=!1!==b,R=s.default.useContext(h.RouterContext),D=s.default.useContext(d.AppRouterContext),L=null!=R?R:D,P=!R,{href:M,as:j}=s.default.useMemo(()=>{if(!R){let e=v(l);return{href:e,as:g?v(g):e}}let[e,t]=o.resolveHref(R,l,!0);return{href:e,as:g?o.resolveHref(R,g):t||e}},[R,l,g]),U=s.default.useRef(M),F=s.default.useRef(j);A&&(n=s.default.Children.only(r));let V=A?n&&"object"==typeof n&&n.ref:t,[B,q,z]=f.useIntersection({rootMargin:"200px"}),$=s.default.useCallback(e=>{(F.current!==j||U.current!==M)&&(z(),F.current=j,U.current=M),B(e),V&&("function"==typeof V?V(e):"object"==typeof V&&(V.current=e))},[j,V,M,z,B]);s.default.useEffect(()=>{L&&q&&O&&y(L,M,j,{locale:x},P)},[j,M,q,x,O,null==R?void 0:R.locale,L,P]);let H={ref:$,onClick(e){A||"function"!=typeof C||C(e),A&&n.props&&"function"==typeof n.props.onClick&&n.props.onClick(e),L&&!e.defaultPrevented&&function(e,t,r,n,i,o,l,u,c,h){let{nodeName:d}=e.currentTarget,f="A"===d.toUpperCase();if(f&&(function(e){let t=e.currentTarget,r=t.getAttribute("target");return r&&"_self"!==r||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)||!c&&!a.isLocalURL(r)))return;e.preventDefault();let p=()=>{"beforePopState"in t?t[i?"replace":"push"](r,n,{shallow:o,locale:u,scroll:l}):t[i?"replace":"push"](n||r,{forceOptimisticNavigation:!h})};c?s.default.startTransition(p):p()}(e,L,M,j,_,T,I,x,P,O)},onMouseEnter(e){A||"function"!=typeof S||S(e),A&&n.props&&"function"==typeof n.props.onMouseEnter&&n.props.onMouseEnter(e),L&&(O||!P)&&y(L,M,j,{locale:x,priority:!0,bypassPrefetchedCheck:!0},P)},onTouchStart(e){A||"function"!=typeof N||N(e),A&&n.props&&"function"==typeof n.props.onTouchStart&&n.props.onTouchStart(e),L&&(O||!P)&&y(L,M,j,{locale:x,priority:!0,bypassPrefetchedCheck:!0},P)}};if(u.isAbsoluteUrl(j))H.href=j;else if(!A||E||"a"===n.type&&!("href"in n.props)){let e=void 0!==x?x:null==R?void 0:R.locale,t=(null==R?void 0:R.isLocaleDomain)&&p.getDomainLocale(j,e,null==R?void 0:R.locales,null==R?void 0:R.domainLocales);H.href=t||m.addBasePath(c.addLocale(j,e,null==R?void 0:R.defaultLocale))}return A?s.default.cloneElement(n,H):s.default.createElement("a",Object.assign({},k,H),r)});t.default=w,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},508:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useIntersection=function(e){let{rootRef:t,rootMargin:r,disabled:l}=e,u=l||!s,[c,h]=n.useState(!1),d=n.useRef(null),f=n.useCallback(e=>{d.current=e},[]);n.useEffect(()=>{if(s){if(u||c)return;let e=d.current;if(e&&e.tagName){let n=function(e,t,r){let{id:n,observer:i,elements:s}=function(e){let t;let r={root:e.root||null,margin:e.rootMargin||""},n=a.find(e=>e.root===r.root&&e.margin===r.margin);if(n&&(t=o.get(n)))return t;let i=new Map,s=new IntersectionObserver(e=>{e.forEach(e=>{let t=i.get(e.target),r=e.isIntersecting||e.intersectionRatio>0;t&&r&&t(r)})},e);return t={id:r,observer:s,elements:i},a.push(r),o.set(r,t),t}(r);return s.set(e,t),i.observe(e),function(){if(s.delete(e),i.unobserve(e),0===s.size){i.disconnect(),o.delete(n);let e=a.findIndex(e=>e.root===n.root&&e.margin===n.margin);e>-1&&a.splice(e,1)}}}(e,e=>e&&h(e),{root:null==t?void 0:t.current,rootMargin:r});return n}}else if(!c){let e=i.requestIdleCallback(()=>h(!0));return()=>i.cancelIdleCallback(e)}},[u,r,t,c,d.current]);let p=n.useCallback(()=>{h(!1)},[]);return[f,c,p]};var n=r(7294),i=r(29);let s="function"==typeof IntersectionObserver,o=new Map,a=[];("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7757:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getImageBlurSvg=function(e){let{widthInt:t,heightInt:r,blurWidth:n,blurHeight:i,blurDataURL:s,objectFit:o}=e,a=n||t,l=i||r,u=s.startsWith("data:image/jpeg")?"%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'/%3E%3C/feComponentTransfer%3E%":"";return a&&l?"%3Csvg xmlns='http%3A//www.w3.org/2000/svg' viewBox='0 0 ".concat(a," ").concat(l,"'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='").concat(n&&i?"1":"20","'/%3E").concat(u,"%3C/filter%3E%3Cimage preserveAspectRatio='none' filter='url(%23b)' x='0' y='0' height='100%25' width='100%25' href='").concat(s,"'/%3E%3C/svg%3E"):"%3Csvg xmlns='http%3A//www.w3.org/2000/svg'%3E%3Cimage style='filter:blur(20px)' preserveAspectRatio='".concat("contain"===o?"xMidYMid":"cover"===o?"xMidYMid slice":"none","' x='0' y='0' height='100%25' width='100%25' href='").concat(s,"'/%3E%3C/svg%3E")}},7746:function(e,t){"use strict";function r(e){let{config:t,src:r,width:n,quality:i}=e;return"".concat(t.path,"?url=").concat(encodeURIComponent(r),"&w=").concat(n,"&q=").concat(i||75)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r.__next_img_default=!0,t.default=r},2886:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var n=r(5893);function i(){return(0,n.jsxs)("div",{className:"px-4 py-5 bg-themed4 mx-auto",children:[(0,n.jsx)("div",{className:"w-full flex items-center justify-center my-8",children:(0,n.jsx)("img",{src:"http://localhost:3000/logo.png",className:"w-1/18 h-9"})}),(0,n.jsxs)("div",{className:"w-full flex flex-col md:flex-row items-start md:items-center justify-around",children:[(0,n.jsxs)("div",{className:"flex flex-col place-items-start mb-2 md:mb-0 space-y-1",children:[(0,n.jsx)("p",{className:"text-sm font-bold text-themel4",children:"Contact us"}),(0,n.jsx)("i",{className:"text-sm font-bold text-themel4",children:"061-75037621"}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"text-sm font-bold text-themel4",children:"email:"}),(0,n.jsx)("span",{className:"text-sm font-bold text-themel4",children:"info@gbay.in"})]}),(0,n.jsx)("p",{className:"text-sm font-bold text-themel4",children:"Blaze Avenue ,/n 59, Mount Road /n Chennai-02 "})]}),(0,n.jsxs)("div",{className:"flex flex-col place-items-start mb-2 md:mb-0 space-y-1",children:[(0,n.jsx)("p",{className:"text-sm font-bold text-themel4",children:"About us"}),(0,n.jsx)("i",{className:"text-sm font-bold text-themel4",children:"careera"}),(0,n.jsx)("p",{children:(0,n.jsx)("span",{className:"text-sm font-bold text-themel4",children:"invest with us:"})}),(0,n.jsx)("p",{className:"text-sm font-bold text-themel4",children:"send us feedback"})]}),(0,n.jsxs)("div",{className:"flex flex-col place-items-start mb-2 md:mb-0  space-y-1",children:[(0,n.jsx)("p",{className:"text-sm font-bold text-themel4",children:"Home"}),(0,n.jsx)("i",{className:"text-sm font-bold text-themel4",children:"Login"}),(0,n.jsx)("p",{children:(0,n.jsx)("span",{className:"text-sm font-bold text-themel4",children:"register"})}),(0,n.jsx)("p",{className:"text-sm font-bold text-themel4"})]}),(0,n.jsxs)("div",{className:"flex flex-col place-items-start mb-2 md:mb-0   space-y-1",children:[(0,n.jsx)("p",{className:"text-sm font-bold text-themel4",children:"Connect with us"}),(0,n.jsx)("i",{className:"text-sm font-bold text-themel4",children:"Facebook"}),(0,n.jsx)("p",{children:(0,n.jsx)("span",{className:"text-sm font-bold text-themel4",children:"twitter"})}),(0,n.jsx)("p",{className:"text-sm font-bold text-themel4",children:"instagram"})]})]}),(0,n.jsxs)("div",{className:"w-full flex items-center justify-center gap-3 my-8",children:[(0,n.jsx)("p",{className:"text-sm font-medium text-white",children:"\xa9 2022 gbay.in"})," ",(0,n.jsx)("p",{className:"text-xs text-white font-thin",children:"Terms and conditions"})]})]})}r(6939);var s=r(7294),o=r(5080);r(6888);var a=r(1664),l=r.n(a),u=r(9783);function c(){let[e,t]=(0,s.useState)(),{currentUser:r,logout:i}=(0,u.E)(),a=e=>{e.preventDefault(),i()};return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"fixed w-full top-0 py-4 md:py-2 bg-themed3 z-50",children:[(0,n.jsxs)("div",{className:"max-w-7xl mx-auto px-5 py-2 flex items-center justify-between relative ",children:[!e&&(0,n.jsxs)("div",{onClick:()=>t(!e),class:"space-y-1 md:hidden cursor-pointer z-20",children:[(0,n.jsx)("div",{className:"w-6 h-0.5 bg-white"}),(0,n.jsx)("div",{className:"w-6 h-0.5 bg-white"}),(0,n.jsx)("div",{className:"w-6 h-0.5 bg-white"})]}),e&&(0,n.jsx)("div",{onClick:()=>t(!e),class:" md:hidden cursor-pointer z-20",children:(0,n.jsx)("div",{className:" text-xs font-bold text-white",children:"close"})}),(0,n.jsx)(l(),{href:"/",children:(0,n.jsx)("img",{src:"http://localhost:3000/logo.png",className:"w-1/18 h-9 hidden md:block cursor-pointer  "})}),(0,n.jsx)(o.Z,{}),(0,n.jsx)("div",{className:"hidden md:block",children:(0,n.jsxs)("div",{className:" flex items-center justify-around gap-2 ",children:[!r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l(),{href:"/login",children:(0,n.jsx)("p",{className:"text-md font-thin text-themel4 cursor-pointer",children:"Login"})}),(0,n.jsx)(l(),{href:"/register",children:(0,n.jsx)("p",{className:"text-md font-thin text-themel4 cursor-pointer",children:"Register"})})]}),r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"text-md font-thin text-themel4 cursor-pointer",children:r.displayName}),(0,n.jsx)("button",{onClick:a,className:"text-md px-2 py-1 bg-themed4 font-thin text-themel4 cursor-pointer",children:"Logout"})]})]})})]}),e&&(0,n.jsxs)("div",{id:"menu",className:" flex flex-col items-center justify-center space-y-4 bg-themed3 min-h-max absolute left-0 top-0 w-full p-10  rounded-b-3xl  text-themel4  text-center ",children:[(0,n.jsx)(l(),{href:"/",children:(0,n.jsx)("img",{src:"http://localhost:3000/logo.png",className:"w-1/18 h-9"})}),(0,n.jsx)(l(),{href:"/login",children:(0,n.jsx)("p",{className:"text-md font-thin text-themel4 cursor-pointer",children:"Login"})}),(0,n.jsx)(l(),{href:"/register",children:(0,n.jsx)("p",{className:"text-md font-thin text-themel4 cursor-pointer",children:"Register"})})]})]})})}var h=r(4002);function d(e){let{Component:t,pageProps:r}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(h.HD,{children:[(0,n.jsx)(c,{}),(0,n.jsx)(t,{...r}),(0,n.jsx)(i,{})]})})}r(3814)},3042:function(){},3814:function(){},5675:function(e,t,r){e.exports=r(3740)},1664:function(e,t,r){e.exports=r(5569)},1163:function(e,t,r){e.exports=r(6885)},4947:function(e){var t=function(e){return e.replace(/^\s+|\s+$/g,"")};e.exports=function(e){if(!e)return{};for(var r={},n=t(e).split("\n"),i=0;i<n.length;i++){var s,o=n[i],a=o.indexOf(":"),l=t(o.slice(0,a)).toLowerCase(),u=t(o.slice(a+1));void 0===r[l]?r[l]=u:(s=r[l],"[object Array]"===Object.prototype.toString.call(s))?r[l].push(u):r[l]=[r[l],u]}return r}},4155:function(e){var t,r,n,i=e.exports={};function s(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var l=[],u=!1,c=-1;function h(){u&&n&&(u=!1,n.length?l=n.concat(l):c=-1,l.length&&d())}function d(){if(!u){var e=a(h);u=!0;for(var t=l.length;t;){for(n=l,l=[];++c<t;)n&&n[c].run();c=-1,t=l.length}n=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}i.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new f(e,t)),1!==l.length||u||a(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(e){return[]},i.binding=function(e){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw Error("process.chdir is not supported")},i.umask=function(){return 0}},655:function(e,t,r){"use strict";r.d(t,{CR:function(){return a},XA:function(){return o},ZT:function(){return i},_T:function(){return s},ev:function(){return l}});var n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function s(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function o(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o}function l(e,t,r){if(r||2==arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}},5816:function(e,t,r){"use strict";let n,i;r.d(t,{Jn:function(){return L},qX:function(){return O},Xd:function(){return k},Mq:function(){return M},ZF:function(){return P},KN:function(){return j}});var s,o=r(740),a=r(3333),l=r(4444);let u=(e,t)=>t.some(t=>e instanceof t),c=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,m={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return h.get(e);if("objectStoreNames"===t)return e.objectStoreNames||d.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return g(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function g(e){var t;if(e instanceof IDBRequest)return function(e){let t=new Promise((t,r)=>{let n=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(g(e.result)),n()},s=()=>{r(e.error),n()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&c.set(t,e)}).catch(()=>{}),p.set(t,e),t}(e);if(f.has(e))return f.get(e);let r="function"==typeof(t=e)?t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(y(this),e),g(c.get(this))}:function(...e){return g(t.apply(y(this),e))}:function(e,...r){let n=t.call(y(this),e,...r);return d.set(n,e.sort?e.sort():[e]),g(n)}:(t instanceof IDBTransaction&&function(e){if(h.has(e))return;let t=new Promise((t,r)=>{let n=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),n()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});h.set(e,t)}(t),u(t,n||(n=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(t,m):t;return r!==e&&(f.set(e,r),p.set(r,e)),r}let y=e=>p.get(e),v=["get","getKey","getAll","getAllKeys","count"],w=["put","add","delete","clear"],b=new Map;function E(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(b.get(t))return b.get(t);let r=t.replace(/FromIndex$/,""),n=t!==r,i=w.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||v.includes(r)))return;let s=async function(e,...t){let s=this.transaction(e,i?"readwrite":"readonly"),o=s.store;return n&&(o=o.index(t.shift())),(await Promise.all([o[r](...t),i&&s.done]))[0]};return b.set(t,s),s}m={...s=m,get:(e,t,r)=>E(e,t)||s.get(e,t,r),has:(e,t)=>!!E(e,t)||s.has(e,t)};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _{constructor(e){this.container=e}getPlatformInfoString(){let e=this.container.getProviders();return e.map(e=>{if(!function(e){let t=e.getComponent();return(null==t?void 0:t.type)==="VERSION"}(e))return null;{let t=e.getImmediate();return`${t.library}/${t.version}`}}).filter(e=>e).join(" ")}}let T="@firebase/app",I="0.9.5",x=new a.Yd("@firebase/app"),C="[DEFAULT]",S={[T]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},N=new Map,A=new Map;function k(e){let t=e.name;if(A.has(t))return x.debug(`There were multiple attempts to register component ${t}.`),!1;for(let r of(A.set(t,e),N.values()))!function(e,t){try{e.container.addComponent(t)}catch(r){x.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}(r,e);return!0}function O(e,t){let r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}let R=new l.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new o.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw R.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let L="9.18.0";function P(e,t={}){let r=e;if("object"!=typeof t){let e=t;t={name:e}}let n=Object.assign({name:C,automaticDataCollectionEnabled:!1},t),i=n.name;if("string"!=typeof i||!i)throw R.create("bad-app-name",{appName:String(i)});if(r||(r=(0,l.aH)()),!r)throw R.create("no-options");let s=N.get(i);if(s){if((0,l.vZ)(r,s.options)&&(0,l.vZ)(n,s.config))return s;throw R.create("duplicate-app",{appName:i})}let a=new o.H0(i);for(let e of A.values())a.addComponent(e);let u=new D(r,n,a);return N.set(i,u),u}function M(e=C){let t=N.get(e);if(!t&&e===C)return P();if(!t)throw R.create("no-app",{appName:e});return t}function j(e,t,r){var n;let i=null!==(n=S[e])&&void 0!==n?n:e;r&&(i+=`-${r}`);let s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){let e=[`Unable to register library "${i}" with version "${t}":`];s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),x.warn(e.join(" "));return}k(new o.wA(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}let U="firebase-heartbeat-store",F=null;function V(){return F||(F=(function(e,t,{blocked:r,upgrade:n,blocking:i,terminated:s}={}){let o=indexedDB.open(e,1),a=g(o);return n&&o.addEventListener("upgradeneeded",e=>{n(g(o.result),e.oldVersion,e.newVersion,g(o.transaction))}),r&&o.addEventListener("blocked",()=>r()),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",()=>i())}).catch(()=>{}),a})("firebase-heartbeat-database",0,{upgrade:(e,t)=>{0===t&&e.createObjectStore(U)}}).catch(e=>{throw R.create("idb-open",{originalErrorMessage:e.message})})),F}async function B(e){try{let t=await V();return t.transaction(U).objectStore(U).get(z(e))}catch(e){if(e instanceof l.ZR)x.warn(e.message);else{let t=R.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});x.warn(t.message)}}}async function q(e,t){try{let r=await V(),n=r.transaction(U,"readwrite"),i=n.objectStore(U);return await i.put(t,z(e)),n.done}catch(e){if(e instanceof l.ZR)x.warn(e.message);else{let t=R.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});x.warn(t.message)}}}function z(e){return`${e.name}!${e.options.appId}`}class ${constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new K(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){let e=this.container.getProvider("platform-logger").getImmediate(),t=e.getPlatformInfoString(),r=H();return(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))?void 0:(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{let t=new Date(e.date).valueOf(),r=Date.now();return r-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache))}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";let e=H(),{heartbeatsToSend:t,unsentEntries:r}=function(e,t=1024){let r=[],n=e.slice();for(let i of e){let e=r.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),G(r)>t){e.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),G(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}(this._heartbeatsCache.heartbeats),n=(0,l.L)(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),n}}function H(){let e=new Date;return e.toISOString().substring(0,10)}class K{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,l.hl)()&&(0,l.eu)().then(()=>!0).catch(()=>!1)}async read(){let e=await this._canUseIndexedDBPromise;if(!e)return{heartbeats:[]};{let e=await B(this.app);return e||{heartbeats:[]}}}async overwrite(e){var t;let r=await this._canUseIndexedDBPromise;if(r){let r=await this.read();return q(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;let r=await this._canUseIndexedDBPromise;if(r){let r=await this.read();return q(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}}}function G(e){return(0,l.L)(JSON.stringify({version:2,heartbeats:e})).length}k(new o.wA("platform-logger",e=>new _(e),"PRIVATE")),k(new o.wA("heartbeat",e=>new $(e),"PRIVATE")),j(T,I,""),j(T,I,"esm2017"),j("fire-js","")},740:function(e,t,r){"use strict";r.d(t,{H0:function(){return a},wA:function(){return i}});var n=r(4444);class i{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let s="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new n.BH;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&e.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),n=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(e){if(n)return null;throw e}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if("EAGER"===e.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:s})}catch(e){}for(let[e,t]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:r});t.resolve(e)}catch(e){}}}}clearInstance(e=s){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=s){return this.instances.has(e)}getOptions(e=s){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let n=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[e,t]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(e);r===i&&t.resolve(n)}return n}onInit(e,t){var r;let n=this.normalizeInstanceIdentifier(t),i=null!==(r=this.onInitCallbacks.get(n))&&void 0!==r?r:new Set;i.add(e),this.onInitCallbacks.set(n,i);let s=this.instances.get(n);return s&&e(s,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let n of r)try{n(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:e===s?void 0:e,options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(e){}return r||null}normalizeInstanceIdentifier(e=s){return this.component?this.component.multipleInstances?e:s:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){let t=this.getProvider(e.name);t.isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new o(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},3333:function(e,t,r){"use strict";var n,i;r.d(t,{Yd:function(){return c},in:function(){return n}});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let s=[];(i=n||(n={}))[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT";let o={debug:n.DEBUG,verbose:n.VERBOSE,info:n.INFO,warn:n.WARN,error:n.ERROR,silent:n.SILENT},a=n.INFO,l={[n.DEBUG]:"log",[n.VERBOSE]:"log",[n.INFO]:"info",[n.WARN]:"warn",[n.ERROR]:"error"},u=(e,t,...r)=>{if(t<e.logLevel)return;let n=new Date().toISOString(),i=l[t];if(i)console[i](`[${n}]  ${e.name}:`,...r);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class c{constructor(e){this.name=e,this._logLevel=a,this._logHandler=u,this._userLogHandler=null,s.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in n))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?o[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,n.DEBUG,...e),this._logHandler(this,n.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,n.VERBOSE,...e),this._logHandler(this,n.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,n.INFO,...e),this._logHandler(this,n.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,n.WARN,...e),this._logHandler(this,n.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,n.ERROR,...e),this._logHandler(this,n.ERROR,...e)}}},7297:function(e,t,r){"use strict";function n(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}r.d(t,{Z:function(){return n}})},6383:function(e,t,r){"use strict";r.d(t,{hJ:function(){return eP},Xb:function(){return eG},v0:function(){return tZ},Aj:function(){return eJ},e5:function(){return eW},rh:function(){return tw},w7:function(){return eY},ck:function(){return eX}});var n,i=r(4444),s=r(5816),o=r(3333),a=r(655),l=r(740);function u(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}let c=new i.LL("auth","Firebase",u()),h=new o.Yd("@firebase/auth");function d(e,...t){h.logLevel<=o.in.ERROR&&h.error(`Auth (${s.Jn}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f(e,...t){throw g(e,...t)}function p(e,...t){return g(e,...t)}function m(e,t,r){let n=Object.assign(Object.assign({},u()),{[t]:r}),s=new i.LL("auth","Firebase",n);return s.create(t,{appName:e.name})}function g(e,...t){if("string"!=typeof e){let r=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(r,...n)}return c.create(e,...t)}function y(e,t,...r){if(!e)throw g(t,...r)}function v(e){let t="INTERNAL ASSERTION FAILED: "+e;throw d(t),Error(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let w=new Map;function b(e){e instanceof Function||v("Expected a class definition");let t=w.get(e);return t?(t instanceof e||v("Instance stored in cache mismatched with class"),t):(t=new e,w.set(e,t),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function _(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T{constructor(e,t){this.shortDelay=e,this.longDelay=t,t>e||v("Short delay should be less than long delay!"),this.isMobile=(0,i.uI)()||(0,i.b$)()}get(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===_()||"https:"===_()||(0,i.ru)()||"connection"in navigator))||navigator.onLine?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I(e,t){e.emulator||v("Emulator should always be set here");let{url:r}=e.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void v("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void v("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void v("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let C={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},S=new T(3e4,6e4);function N(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function A(e,t,r,n,s={}){return k(e,s,async()=>{let s={},o={};n&&("GET"===t?o=n:s={body:JSON.stringify(n)});let a=(0,i.xO)(Object.assign({key:e.config.apiKey},o)).slice(1),l=await e._getAdditionalHeaders();return l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode),x.fetch()(R(e,e.config.apiHost,r,a),Object.assign({method:t,headers:l,referrerPolicy:"no-referrer"},s))})}async function k(e,t,r){e._canInitEmulator=!1;let n=Object.assign(Object.assign({},C),t);try{let t=new D(e),i=await Promise.race([r(),t.promise]);t.clearNetworkTimeout();let s=await i.json();if("needConfirmation"in s)throw L(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{let t=i.ok?s.errorMessage:s.error.message,[r,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===r)throw L(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===r)throw L(e,"email-already-in-use",s);if("USER_DISABLED"===r)throw L(e,"user-disabled",s);let a=n[r]||r.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw m(e,a,o);f(e,a)}}catch(t){if(t instanceof i.ZR)throw t;f(e,"internal-error",{message:String(t)})}}async function O(e,t,r,n,i={}){let s=await A(e,t,r,n,i);return"mfaPendingCredential"in s&&f(e,"multi-factor-auth-required",{_serverResponse:s}),s}function R(e,t,r,n){let i=`${t}${r}?${n}`;return e.config.emulator?I(e.config,i):`${e.config.apiScheme}://${i}`}class D{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(p(this.auth,"network-request-failed")),S.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function L(e,t,r){let n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);let i=p(e,t,n);return i.customData._tokenResponse=r,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P(e,t){return A(e,"POST","/v1/accounts:delete",t)}async function M(e,t){return A(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}async function U(e,t=!1){let r=(0,i.m9)(e),n=await r.getIdToken(t),s=V(n);y(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");let o="object"==typeof s.firebase?s.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:s,token:n,authTime:j(F(s.auth_time)),issuedAtTime:j(F(s.iat)),expirationTime:j(F(s.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}}function F(e){return 1e3*Number(e)}function V(e){let[t,r,n]=e.split(".");if(void 0===t||void 0===r||void 0===n)return d("JWT malformed, contained fewer than 3 sections"),null;try{let e=(0,i.tV)(r);if(!e)return d("Failed to decode base64 JWT payload"),null;return JSON.parse(e)}catch(e){return d("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B(e,t,r=!1){if(r)return t;try{return await t}catch(t){throw t instanceof i.ZR&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;let e=null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0,r=e-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(null==e?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=j(this.lastLoginAt),this.creationTime=j(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $(e){var t;let r=e.auth,n=await e.getIdToken(),i=await B(e,M(r,{idToken:n}));y(null==i?void 0:i.users.length,r,"internal-error");let s=i.users[0];e._notifyReloadListener(s);let o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map(e=>{var{providerId:t}=e,r=(0,a._T)(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}}):[],l=function(e,t){let r=e.filter(e=>!t.some(t=>t.providerId===e.providerId));return[...r,...t]}(e.providerData,o),u=e.isAnonymous,c=!(e.email&&s.passwordHash)&&!(null==l?void 0:l.length),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new z(s.createdAt,s.lastLoginAt),isAnonymous:!!u&&c};Object.assign(e,h)}async function H(e){let t=(0,i.m9)(e);await $(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K(e,t){let r=await k(e,{},async()=>{let r=(0,i.xO)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:n,apiKey:s}=e.config,o=R(e,n,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",x.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){y(e.idToken,"internal-error"),y(void 0!==e.idToken,"internal-error"),y(void 0!==e.refreshToken,"internal-error");let t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){let t=V(e);return y(t,"internal-error"),y(void 0!==t.exp,"internal-error"),y(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return(y(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired)?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:n,expiresIn:i}=await K(e,t);this.updateTokensAndExpiration(r,n,Number(i))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){let{refreshToken:r,accessToken:n,expirationTime:i}=t,s=new G;return r&&(y("string"==typeof r,"internal-error",{appName:e}),s.refreshToken=r),n&&(y("string"==typeof n,"internal-error",{appName:e}),s.accessToken=n),i&&(y("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new G,this.toJSON())}_performRefresh(){return v("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W(e,t){y("string"==typeof e||void 0===e,"internal-error",{appName:t})}class Q{constructor(e){var{uid:t,auth:r,stsTokenManager:n}=e,i=(0,a._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new q(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new z(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let t=await B(this,this.stsTokenManager.getToken(this.auth,e));return y(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return U(this,e)}reload(){return H(this)}_assign(e){this!==e&&(y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new Q(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await $(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){let e=await this.getIdToken();return await B(this,P(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,n,i,s,o,a,l,u;let c=null!==(r=t.displayName)&&void 0!==r?r:void 0,h=null!==(n=t.email)&&void 0!==n?n:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:w,emailVerified:b,isAnonymous:E,providerData:_,stsTokenManager:T}=t;y(w&&T,e,"internal-error");let I=G.fromJSON(this.name,T);y("string"==typeof w,e,"internal-error"),W(c,e.name),W(h,e.name),y("boolean"==typeof b,e,"internal-error"),y("boolean"==typeof E,e,"internal-error"),W(d,e.name),W(f,e.name),W(p,e.name),W(m,e.name),W(g,e.name),W(v,e.name);let x=new Q({uid:w,auth:e,email:h,emailVerified:b,displayName:c,isAnonymous:E,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:I,createdAt:g,lastLoginAt:v});return _&&Array.isArray(_)&&(x.providerData=_.map(e=>Object.assign({},e))),m&&(x._redirectEventId=m),x}static async _fromIdTokenResponse(e,t,r=!1){let n=new G;n.updateFromServerResponse(t);let i=new Q({uid:t.localId,auth:e,stsTokenManager:n,isAnonymous:r});return await $(i),i}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){let t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(e,t,r){return`firebase:${e}:${t}:${r}`}X.type="NONE";class Y{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:n,name:i}=this.auth;this.fullUserKey=J(this.userKey,n.apiKey,i),this.fullPersistenceKey=J("persistence",n.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);return e?Q._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Y(b(X),e,r);let n=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e),i=n[0]||b(X),s=J(r,e.config.apiKey,e.name),o=null;for(let r of t)try{let t=await r._get(s);if(t){let n=Q._fromJSON(e,t);r!==i&&(o=n),i=r;break}}catch(e){}let a=n.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length&&(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(e){}}))),new Y(i,e,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(e){let t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(en(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";{if(t.includes("edge/"))return"Edge";if(ee(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(es(t))return"Blackberry";if(eo(t))return"Webos";if(et(t))return"Safari";if((t.includes("chrome/")||er(t))&&!t.includes("edge/"))return"Chrome";if(ei(t))return"Android";let r=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if((null==r?void 0:r.length)===2)return r[1]}return"Other"}function ee(e=(0,i.z$)()){return/firefox\//i.test(e)}function et(e=(0,i.z$)()){let t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function er(e=(0,i.z$)()){return/crios\//i.test(e)}function en(e=(0,i.z$)()){return/iemobile/i.test(e)}function ei(e=(0,i.z$)()){return/android/i.test(e)}function es(e=(0,i.z$)()){return/blackberry/i.test(e)}function eo(e=(0,i.z$)()){return/webos/i.test(e)}function ea(e=(0,i.z$)()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function el(e=(0,i.z$)()){return ea(e)||ei(e)||eo(e)||es(e)||/windows phone/i.test(e)||en(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eu(e,t=[]){let r;switch(e){case"Browser":r=Z((0,i.z$)());break;case"Worker":r=`${Z((0,i.z$)())}-${e}`;break;default:r=e}let n=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${s.Jn}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=t=>new Promise((r,n)=>{try{let n=e(t);r(n)}catch(e){n(e)}});r.onAbort=t,this.queue.push(r);let n=this.queue.length-1;return()=>{this.queue[n]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(e){for(let e of(t.reverse(),t))try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==e?void 0:e.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,t,r){this.app=e,this.heartbeatServiceProvider=t,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ef(this),this.idTokenSubscription=new ef(this),this.beforeStateQueue=new ec(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=c,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=b(t)),this._initializationPromise=this.queue(async()=>{var r,n;if(!this._deleted&&(this.persistenceManager=await Y.create(this,e),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(n=this.currentUser)||void 0===n?void 0:n.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(this.currentUser||e){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var t;let r=await this.assertedPersistence.getCurrentUser(),n=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let r=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null==n?void 0:n._redirectEventId,o=await this.tryRedirectSignIn(e);(!r||r===s)&&(null==o?void 0:o.user)&&(n=o.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(e){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return(y(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId)?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await $(e)}catch(e){if((null==e?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){let t=e?(0,i.m9)(e):null;return t&&y(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(b(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new i.LL("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return null===e?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&b(e)||this._popupRedirectResolver;y(t,this,"argument-error"),this.redirectPersistenceManager=await Y.create(this,[b(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return(this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e)?this._currentUser:(null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,n){if(this._deleted)return()=>{};let i="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return(y(s,this,"internal-error"),s.then(()=>i(this.currentUser)),"function"==typeof t)?e.addObserver(t,r,n):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eu(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await (null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());return r&&(t["X-Firebase-Client"]=r),t}}function ed(e){return(0,i.m9)(e)}class ef{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,i.ne)(e=>this.observer=e)}get next(){return y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ep(e){let t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function em(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return v("not implemented")}_getIdTokenResponse(e){return v("not implemented")}_linkToIdToken(e,t){return v("not implemented")}_getReauthenticationResolver(e){return v("not implemented")}}async function ey(e,t){return A(e,"POST","/v1/accounts:update",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ev(e,t){return O(e,"POST","/v1/accounts:signInWithPassword",N(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ew(e,t){return O(e,"POST","/v1/accounts:signInWithEmailLink",N(e,t))}async function eb(e,t){return O(e,"POST","/v1/accounts:signInWithEmailLink",N(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE extends eg{constructor(e,t,r,n=null){super("password",r),this._email=e,this._password=t,this._tenantId=n}static _fromEmailAndPassword(e,t){return new eE(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new eE(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return ev(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return ew(e,{email:this._email,oobCode:this._password});default:f(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return ey(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return eb(e,{idToken:t,email:this._email,oobCode:this._password});default:f(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e_(e,t){return O(e,"POST","/v1/accounts:signInWithIdp",N(e,t))}class eT extends eg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new eT(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):f("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:n}=t,i=(0,a._T)(t,["providerId","signInMethod"]);if(!r||!n)return null;let s=new eT(r,n);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){let t=this.buildRequest();return e_(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,e_(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,e_(e,t)}buildRequest(){let e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,i.xO)(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eI(e,t){return A(e,"POST","/v1/accounts:sendVerificationCode",N(e,t))}async function ex(e,t){return O(e,"POST","/v1/accounts:signInWithPhoneNumber",N(e,t))}async function eC(e,t){let r=await O(e,"POST","/v1/accounts:signInWithPhoneNumber",N(e,t));if(r.temporaryProof)throw L(e,"account-exists-with-different-credential",r);return r}let eS={USER_NOT_FOUND:"user-not-found"};async function eN(e,t){let r=Object.assign(Object.assign({},t),{operation:"REAUTH"});return O(e,"POST","/v1/accounts:signInWithPhoneNumber",N(e,r),eS)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA extends eg{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new eA({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new eA({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return ex(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return eC(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return eN(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:n}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:n}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));let{verificationId:t,verificationCode:r,phoneNumber:n,temporaryProof:i}=e;return r||t||n||i?new eA({verificationId:t,verificationCode:r,phoneNumber:n,temporaryProof:i}):null}}class ek{constructor(e){var t,r,n,s,o,a;let l=(0,i.zd)((0,i.pd)(e)),u=null!==(t=l.apiKey)&&void 0!==t?t:null,c=null!==(r=l.oobCode)&&void 0!==r?r:null,h=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(n=l.mode)&&void 0!==n?n:null);y(u&&c&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=c,this.continueUrl=null!==(s=l.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=l.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=l.tenantId)&&void 0!==a?a:null}static parseLink(e){let t=function(e){let t=(0,i.zd)((0,i.pd)(e)).link,r=t?(0,i.zd)((0,i.pd)(t)).deep_link_id:null,n=(0,i.zd)((0,i.pd)(e)).deep_link_id,s=n?(0,i.zd)((0,i.pd)(n)).link:null;return s||n||r||t||e}(e);try{return new ek(t)}catch(e){return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(){this.providerId=eO.PROVIDER_ID}static credential(e,t){return eE._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let r=ek.parseLink(t);return y(r,"argument-error"),eE._fromEmailAndCode(e,r.code,r.tenantId)}}eO.PROVIDER_ID="password",eO.EMAIL_PASSWORD_SIGN_IN_METHOD="password",eO.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD extends eR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL extends eD{constructor(){super("facebook.com")}static credential(e){return eT._fromParams({providerId:eL.PROVIDER_ID,signInMethod:eL.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return eL.credentialFromTaggedObject(e)}static credentialFromError(e){return eL.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return eL.credential(e.oauthAccessToken)}catch(e){return null}}}eL.FACEBOOK_SIGN_IN_METHOD="facebook.com",eL.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP extends eD{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return eT._fromParams({providerId:eP.PROVIDER_ID,signInMethod:eP.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return eP.credentialFromTaggedObject(e)}static credentialFromError(e){return eP.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return eP.credential(t,r)}catch(e){return null}}}eP.GOOGLE_SIGN_IN_METHOD="google.com",eP.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM extends eD{constructor(){super("github.com")}static credential(e){return eT._fromParams({providerId:eM.PROVIDER_ID,signInMethod:eM.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return eM.credentialFromTaggedObject(e)}static credentialFromError(e){return eM.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return eM.credential(e.oauthAccessToken)}catch(e){return null}}}eM.GITHUB_SIGN_IN_METHOD="github.com",eM.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej extends eD{constructor(){super("twitter.com")}static credential(e,t){return eT._fromParams({providerId:ej.PROVIDER_ID,signInMethod:ej.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ej.credentialFromTaggedObject(e)}static credentialFromError(e){return ej.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ej.credential(t,r)}catch(e){return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eU(e,t){return O(e,"POST","/v1/accounts:signUp",N(e,t))}ej.TWITTER_SIGN_IN_METHOD="twitter.com",ej.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,n=!1){let i=await Q._fromIdTokenResponse(e,r,n),s=eV(r),o=new eF({user:i,providerId:s,_tokenResponse:r,operationType:t});return o}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let n=eV(r);return new eF({user:e,providerId:n,_tokenResponse:r,operationType:t})}}function eV(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eB extends i.ZR{constructor(e,t,r,n){var i;super(t.code,t.message),this.operationType=r,this.user=n,Object.setPrototypeOf(this,eB.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,n){return new eB(e,t,r,n)}}function eq(e,t,r,n){let i="reauthenticate"===t?r._getReauthenticationResolver(e):r._getIdTokenResponse(e);return i.catch(r=>{if("auth/multi-factor-auth-required"===r.code)throw eB._fromErrorAndOperation(e,r,t,n);throw r})}async function ez(e,t,r=!1){let n=await B(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return eF._forOperation(e,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e$(e,t,r=!1){let{auth:n}=e,i="reauthenticate";try{let s=await B(e,eq(n,i,t,e),r);y(s.idToken,n,"internal-error");let o=V(s.idToken);y(o,n,"internal-error");let{sub:a}=o;return y(e.uid===a,n,"user-mismatch"),eF._forOperation(e,i,s)}catch(e){throw(null==e?void 0:e.code)==="auth/user-not-found"&&f(n,"user-mismatch"),e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eH(e,t,r=!1){let n="signIn",i=await eq(e,n,t),s=await eF._fromIdTokenResponse(e,n,i);return r||await e._updateCurrentUser(s.user),s}async function eK(e,t){return eH(ed(e),t)}async function eG(e,t,r){let n=ed(e),i=await eU(n,{returnSecureToken:!0,email:t,password:r}),s=await eF._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(s.user),s}function eW(e,t,r){return eK((0,i.m9)(e),eO.credential(t,r))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eQ(e,t){return A(e,"POST","/v1/accounts:update",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eX(e,{displayName:t,photoURL:r}){if(void 0===t&&void 0===r)return;let n=(0,i.m9)(e),s=await n.getIdToken(),o=await B(n,eQ(n.auth,{idToken:s,displayName:t,photoUrl:r,returnSecureToken:!0}));n.displayName=o.displayName||null,n.photoURL=o.photoUrl||null;let a=n.providerData.find(({providerId:e})=>"password"===e);a&&(a.displayName=n.displayName,a.photoURL=n.photoURL),await n._updateTokensIfNecessary(o)}function eJ(e,t,r,n){return(0,i.m9)(e).onAuthStateChanged(t,r,n)}function eY(e){return(0,i.m9)(e).signOut()}new WeakMap;let eZ="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{if(!this.storage)return Promise.resolve(!1);return this.storage.setItem(eZ,"1"),this.storage.removeItem(eZ),Promise.resolve(!0)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class e1 extends e0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){let e=(0,i.z$)();return et(e)||ea(e)}()&&function(){try{return!!(window&&window!==window.top)}catch(e){return!1}}(),this.fallbackToPolling=el(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let t of Object.keys(this.listeners)){let r=this.storage.getItem(t),n=this.localCache[t];r!==n&&e(t,n,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((e,t,r)=>{this.notifyListeners(e,r)});return}let r=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let n=this.storage.getItem(r);if(e.newValue!==n)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!t)return}let n=()=>{let e=this.storage.getItem(r);(t||this.localCache[r]!==e)&&this.notifyListeners(r,e)},s=this.storage.getItem(r);(0,i.w1)()&&10===document.documentMode&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(n,10):n()}notifyListeners(e,t){this.localCache[e]=t;let r=this.listeners[e];if(r)for(let e of Array.from(r))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){let t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}e1.type="LOCAL";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2 extends e0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}e2.type="SESSION";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;let r=new e3(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let{eventId:t,eventType:r,data:n}=e.data,i=this.handlersMap[r];if(!(null==i?void 0:i.size))return;e.ports[0].postMessage({status:"ack",eventId:t,eventType:r});let s=Array.from(i).map(async t=>t(e.origin,n)),o=await Promise.all(s.map(async e=>{try{let t=await e;return{fulfilled:!0,value:t}}catch(e){return{fulfilled:!1,reason:e}}}));e.ports[0].postMessage({status:"done",eventId:t,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e4(e="",t=10){let r="";for(let e=0;e<t;e++)r+=Math.floor(10*Math.random());return e+r}e3.receivers=[];/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let n,i;let s="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!s)throw Error("connection_unavailable");return new Promise((o,a)=>{let l=e4("",20);s.port1.start();let u=setTimeout(()=>{a(Error("unsupported_event"))},r);i={messageChannel:s,onMessage(e){if(e.data.eventId===l)switch(e.data.status){case"ack":clearTimeout(u),n=setTimeout(()=>{a(Error("timeout"))},3e3);break;case"done":clearTimeout(n),o(e.data.response);break;default:clearTimeout(u),clearTimeout(n),a(Error("invalid_response"))}}},this.handlers.add(i),s.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[s.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e5(){return window}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e8(){return void 0!==e5().WorkerGlobalScope&&"function"==typeof e5().importScripts}async function e9(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{let e=await navigator.serviceWorker.ready;return e.active}catch(e){return null}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let e7="firebaseLocalStorageDb",te="firebaseLocalStorage",tt="fbase_key";class tr{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function tn(e,t){return e.transaction([te],t?"readwrite":"readonly").objectStore(te)}function ti(){let e=indexedDB.open(e7,1);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{let t=e.result;try{t.createObjectStore(te,{keyPath:tt})}catch(e){r(e)}}),e.addEventListener("success",async()=>{let r=e.result;r.objectStoreNames.contains(te)?t(r):(r.close(),await function(){let e=indexedDB.deleteDatabase(e7);return new tr(e).toPromise()}(),t(await ti()))})})}async function ts(e,t,r){let n=tn(e,!0).put({[tt]:t,value:r});return new tr(n).toPromise()}async function to(e,t){let r=tn(e,!1).get(t),n=await new tr(r).toPromise();return void 0===n?null:n.value}function ta(e,t){let r=tn(e,!0).delete(t);return new tr(r).toPromise()}class tl{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await ti()),this.db}async _withRetries(e){let t=0;for(;;)try{let t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return e8()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=e3._getInstance(e8()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>{let r=await this._poll();return{keyProcessed:r.includes(t.key)}}),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await e9(),!this.activeServiceWorker)return;this.sender=new e6(this.activeServiceWorker);let r=await this.sender._send("ping",{},800);r&&(null===(e=r[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=r[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null==navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await ti();return await ts(e,eZ,"1"),await ta(e,eZ),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>ts(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){let t=await this._withRetries(t=>to(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ta(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(e=>{let t=tn(e,!1).getAll();return new tr(t).toPromise()});if(!e||0!==this.pendingWrites)return[];let t=[],r=new Set;for(let{fbase_key:n,value:i}of e)r.add(n),JSON.stringify(this.localCache[n])!==JSON.stringify(i)&&(this.notifyListeners(n,i),t.push(n));for(let e of Object.keys(this.localCache))this.localCache[e]&&!r.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;let r=this.listeners[e];if(r)for(let e of Array.from(r))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}function tu(e){return`__${e}${Math.floor(1e6*Math.random())}`}async function tc(e,t,r){var n,i,s;let o=await r.verify();try{let a;if(y("string"==typeof o,e,"argument-error"),y("recaptcha"===r.type,e,"argument-error"),a="string"==typeof t?{phoneNumber:t}:t,"session"in a){let t=a.session;if("phoneNumber"in a){y("enroll"===t.type,e,"internal-error");let r=await (i={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,recaptchaToken:o}},A(e,"POST","/v2/accounts/mfaEnrollment:start",N(e,i)));return r.phoneSessionInfo.sessionInfo}{y("signin"===t.type,e,"internal-error");let r=(null===(n=a.multiFactorHint)||void 0===n?void 0:n.uid)||a.multiFactorUid;y(r,e,"missing-multi-factor-info");let i=await (s={mfaPendingCredential:t.credential,mfaEnrollmentId:r,phoneSignInInfo:{recaptchaToken:o}},A(e,"POST","/v2/accounts/mfaSignIn:start",N(e,s)));return i.phoneResponseInfo.sessionInfo}}{let{sessionInfo:t}=await eI(e,{phoneNumber:a.phoneNumber,recaptchaToken:o});return t}}finally{r._reset()}}tl.type="LOCAL",tu("rcb"),new T(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e){this.providerId=th.PROVIDER_ID,this.auth=ed(e)}verifyPhoneNumber(e,t){return tc(this.auth,e,(0,i.m9)(t))}static credential(e,t){return eA._fromVerification(e,t)}static credentialFromResult(e){return th.credentialFromTaggedObject(e)}static credentialFromError(e){return th.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:t,temporaryProof:r}=e;return t&&r?eA._fromTokenResponse(t,r):null}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(e,t){return t?b(t):(y(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}th.PROVIDER_ID="phone",th.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf extends eg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return e_(e,this._buildIdpRequest())}_linkToIdToken(e,t){return e_(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return e_(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function tp(e){return eH(e.auth,new tf(e),e.bypassAuthState)}function tm(e){let{auth:t,user:r}=e;return y(r,t,"internal-error"),e$(r,new tf(e),e.bypassAuthState)}async function tg(e){let{auth:t,user:r}=e;return y(r,t,"internal-error"),ez(r,new tf(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e,t,r,n,i=!1){this.auth=e,this.resolver=r,this.user=n,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:n,tenantId:i,error:s,type:o}=e;if(s){this.reject(s);return}let a={auth:this.auth,requestUri:t,sessionId:r,tenantId:i||void 0,postBody:n||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tp;case"linkViaPopup":case"linkViaRedirect":return tg;case"reauthViaPopup":case"reauthViaRedirect":return tm;default:f(this.auth,"internal-error")}}resolve(e){this.pendingPromise||v("Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){this.pendingPromise||v("Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tv=new T(2e3,1e4);async function tw(e,t,r){let n=ed(e);!function(e,t,r){if(!(t instanceof r))throw r.name!==t.constructor.name&&f(e,"argument-error"),m(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(e,t,eR);let i=td(n,r),s=new tb(n,"signInViaPopup",t,i);return s.executeNotNull()}class tb extends ty{constructor(e,t,r,n,i){super(e,t,n,i),this.provider=r,this.authWindow=null,this.pollId=null,tb.currentPopupAction&&tb.currentPopupAction.cancel(),tb.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return y(e,this.auth,"internal-error"),e}async onExecution(){1===this.filter.length||v("Popup operations only handle one event");let e=e4();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(p(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(p(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,tb.currentPopupAction=null}pollUserCancellation(){let e=()=>{var t,r;if(null===(r=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===r?void 0:r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(p(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,tv.get())};e()}}tb.currentPopupAction=null;let tE=new Map;class t_ extends ty{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=tE.get(this.auth._key());if(!e){try{let t=await tT(this.resolver,this.auth),r=t?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}tE.set(this.auth._key(),e)}return this.bypassAuthState||tE.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"===e.type){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function tT(e,t){let r=J("pendingRedirect",t.config.apiKey,t.name),n=b(e._redirectPersistence);if(!await n._isAvailable())return!1;let i=await n._get(r)==="true";return await n._remove(r),i}function tI(e,t){tE.set(e._key(),t)}async function tx(e,t,r=!1){let n=ed(e),i=td(n,t),s=new t_(n,i,r),o=await s.execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,t)),o}class tC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tN(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!tN(e)){let n=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(p(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(tS(e))}saveEventToCache(e){this.cachedEventUids.add(tS(e)),this.lastProcessedEventTime=Date.now()}}function tS(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function tN({type:e,error:t}){return"unknown"===e&&(null==t?void 0:t.code)==="auth/no-auth-event"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tA(e,t={}){return A(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tO=/^https?/;async function tR(e){if(e.config.emulator)return;let{authorizedDomains:t}=await tA(e);for(let e of t)try{if(function(e){let t=E(),{protocol:r,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){let i=new URL(e);return""===i.hostname&&""===n?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&i.hostname===n}if(!tO.test(r))return!1;if(tk.test(e))return n===e;let i=e.replace(/\./g,"\\."),s=RegExp("^(.+\\."+i+"|"+i+")$","i");return s.test(n)}(e))return}catch(e){}f(e,"unauthorized-domain")}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tD=new T(3e4,6e4);function tL(){let e=e5().___jsl;if(null==e?void 0:e.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}}let tP=null,tM=new T(5e3,15e3),tj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);async function tF(e){let t=await (tP=tP||new Promise((t,r)=>{var n,i,s,o;function a(){tL(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{tL(),r(p(e,"network-request-failed"))},timeout:tD.get()})}if(null===(i=null===(n=e5().gapi)||void 0===n?void 0:n.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else if(null===(s=e5().gapi)||void 0===s?void 0:s.load)a();else{let t=tu("iframefcb");return e5()[t]=()=>{gapi.load?a():r(p(e,"network-request-failed"))},(o=`https://apis.google.com/js/api.js?onload=${t}`,new Promise((e,t)=>{var r,n;let i=document.createElement("script");i.setAttribute("src",o),i.onload=e,i.onerror=e=>{let r=p("internal-error");r.customData=e,t(r)},i.type="text/javascript",i.charset="UTF-8",(null!==(n=null===(r=document.getElementsByTagName("head"))||void 0===r?void 0:r[0])&&void 0!==n?n:document).appendChild(i)})).catch(e=>r(e))}}).catch(e=>{throw tP=null,e})),r=e5().gapi;return y(r,e,"internal-error"),t.open({where:document.body,url:function(e){let t=e.config;y(t.authDomain,e,"auth-domain-config-required");let r=t.emulator?I(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,n={apiKey:t.apiKey,appName:e.name,v:s.Jn},o=tU.get(e.config.apiHost);o&&(n.eid=o);let a=e._getFrameworks();return a.length&&(n.fw=a.join(",")),`${r}?${(0,i.xO)(n).slice(1)}`}(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tj,dontclear:!0},t=>new Promise(async(r,n)=>{await t.restyle({setHideOnLeave:!1});let i=p(e,"network-request-failed"),s=e5().setTimeout(()=>{n(i)},tM.get());function o(){e5().clearTimeout(s),r(t)}t.ping(o).then(o,()=>{n(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class tB{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function tq(e,t,r,n,o,a){y(e.config.authDomain,e,"auth-domain-config-required"),y(e.config.apiKey,e,"invalid-api-key");let l={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:n,v:s.Jn,eventId:o};if(t instanceof eR)for(let[r,n]of(t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",(0,i.xb)(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters())),Object.entries(a||{})))l[r]=n;if(t instanceof eD){let e=t.getScopes().filter(e=>""!==e);e.length>0&&(l.scopes=e.join(","))}e.tenantId&&(l.tid=e.tenantId);let u=l;for(let e of Object.keys(u))void 0===u[e]&&delete u[e];return`${function({config:e}){return e.emulator?I(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${(0,i.xO)(u).slice(1)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tz="webStorageSupport",t$=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=e2,this._completeRedirectFn=tx,this._overrideRedirectResult=tI}async _openPopup(e,t,r,n){var s;(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager)||v("_initialize() not called before _openPopup()");let o=tq(e,t,r,E(),n);return function(e,t,r,n=500,s=600){let o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString(),l="",u=Object.assign(Object.assign({},tV),{width:n.toString(),height:s.toString(),top:o,left:a}),c=(0,i.z$)().toLowerCase();r&&(l=er(c)?"_blank":r),ee(c)&&(t=t||"http://localhost",u.scrollbars="yes");let h=Object.entries(u).reduce((e,[t,r])=>`${e}${t}=${r},`,"");if(function(e=(0,i.z$)()){var t;return ea(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(c)&&"_self"!==l)return function(e,t){let r=document.createElement("a");r.href=e,r.target=t;let n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}(t||"",l),new tB(null);let d=window.open(t||"",l,h);y(d,e,"popup-blocked");try{d.focus()}catch(e){}return new tB(d)}(e,o,e4())}async _openRedirect(e,t,r,n){var i;return await this._originValidation(e),i=tq(e,t,r,E(),n),e5().location.href=i,new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:e,promise:r}=this.eventManagers[t];return e?Promise.resolve(e):(r||v("If manager is not set, promise should be"),r)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await tF(e),r=new tC(e);return t.register("authEvent",t=>{y(null==t?void 0:t.authEvent,e,"invalid-auth-event");let n=r.onEvent(t.authEvent);return{status:n?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){let r=this.iframes[e._key()];r.send(tz,{type:tz},r=>{var n;let i=null===(n=null==r?void 0:r[0])||void 0===n?void 0:n[tz];void 0!==i&&t(!!i),f(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=tR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return el()||et()||ea()}};class tH{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return v("unexpected MultiFactorSessionType")}}}class tK extends tH{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new tK(e)}_finalizeEnroll(e,t,r){return A(e,"POST","/v2/accounts/mfaEnrollment:finalize",N(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()}))}_finalizeSignIn(e,t){return A(e,"POST","/v2/accounts/mfaSignIn:finalize",N(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()}))}}var tG="@firebase/auth",tW="0.21.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tQ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;let t=await this.auth.currentUser.getIdToken(e);return{accessToken:t}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}let tX=(0,i.Pz)("authIdTokenMaxAge")||300,tJ=null,tY=e=>async t=>{let r=t&&await t.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>tX)return;let i=null==r?void 0:r.token;tJ!==i&&(tJ=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function tZ(e=(0,s.Mq)()){let t=(0,s.qX)(e,"auth");if(t.isInitialized())return t.getImmediate();let r=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,t){let r=(0,s.qX)(e,"auth");if(r.isInitialized()){let e=r.getImmediate(),n=r.getOptions();if((0,i.vZ)(n,null!=t?t:{}))return e;f(e,"already-initialized")}let n=r.initialize({options:t});return n}(e,{popupRedirectResolver:t$,persistence:[tl,e1,e2]}),n=(0,i.Pz)("authTokenSyncURL");if(n){var o,a;let e=tY(n);o=()=>e(r.currentUser),(0,i.m9)(r).beforeAuthStateChanged(e,o),a=t=>e(t),(0,i.m9)(r).onIdTokenChanged(a,void 0,void 0)}let l=(0,i.q4)("auth");return l&&function(e,t,r){let n=ed(e);y(n._canInitEmulator,n,"emulator-config-failed"),y(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");let i=!!(null==r?void 0:r.disableWarnings),s=ep(t),{host:o,port:a}=function(e){let t=ep(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};let n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){let e=i[1];return{host:e,port:em(n.substr(e.length+1))}}{let[e,t]=n.split(":");return{host:e,port:em(t)}}}(t),l=null===a?"":`:${a}`;n.config.emulator={url:`${s}//${o}${l}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(r,`http://${l}`),r}n="Browser",(0,s.Xd)(new l.wA("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:s,authDomain:o}=r.options;return((e,r)=>{y(s&&!s.includes(":"),"invalid-api-key",{appName:e.name}),y(!(null==o?void 0:o.includes(":")),"argument-error",{appName:e.name});let i={apiKey:s,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eu(n)},a=new eh(e,r,i);return function(e,t){let r=(null==t?void 0:t.persistence)||[],n=(Array.isArray(r)?r:[r]).map(b);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,null==t?void 0:t.popupRedirectResolver)}(a,t),a})(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{let n=e.getProvider("auth-internal");n.initialize()})),(0,s.Xd)(new l.wA("auth-internal",e=>{let t=ed(e.getProvider("auth").getImmediate());return new tQ(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,s.KN)(tG,tW,/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(n)),(0,s.KN)(tG,tW,"esm2017")},3247:function(e,t,r){"use strict";r.d(t,{hJ:function(){return ax},JU:function(){return aC},QT:function(){return ln},ad:function(){return ak},cf:function(){return lo},IO:function(){return a1},pl:function(){return ls},ar:function(){return a3}});var n,i,s,o,a,l,u,c,h=r(5816),d=r(740),f=r(3333),p=r(4444),m="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{},g={},y=y||{},v=m||self;function w(){}function b(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function E(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function _(e,t,r){return e.call.apply(e.bind,arguments)}function T(e,t,r){if(!e)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,n),e.apply(t,r)}}return function(){return e.apply(t,arguments)}}function I(e,t,r){return(I=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_:T).apply(null,arguments)}function x(e,t){var r=Array.prototype.slice.call(arguments,1);return function(){var t=r.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function C(e,t){function r(){}r.prototype=t.prototype,e.X=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.Wb=function(e,r,n){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[r].apply(e,i)}}function S(){this.s=this.s,this.o=this.o}S.prototype.s=!1,S.prototype.na=function(){this.s||(this.s=!0,this.M())},S.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};let N=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let r=0;r<e.length;r++)if(r in e&&e[r]===t)return r;return -1};function A(e){let t=e.length;if(0<t){let r=Array(t);for(let n=0;n<t;n++)r[n]=e[n];return r}return[]}function k(e,t){for(let t=1;t<arguments.length;t++){let r=arguments[t];if(b(r)){let t=e.length||0,n=r.length||0;e.length=t+n;for(let i=0;i<n;i++)e[t+i]=r[i]}else e.push(r)}}function O(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!v.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{v.addEventListener("test",w,t),v.removeEventListener("test",w,t)}catch(e){}return e}();function D(e){return/^[\s\xa0]*$/.test(e)}var L=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function P(e,t){return e<t?-1:e>t?1:0}function M(){var e=v.navigator;return e&&(e=e.userAgent)?e:""}function j(e){return -1!=M().indexOf(e)}function U(e){return U[" "](e),e}U[" "]=w;var F=j("Opera"),V=j("Trident")||j("MSIE"),B=j("Edge"),q=B||V,z=j("Gecko")&&!(-1!=M().toLowerCase().indexOf("webkit")&&!j("Edge"))&&!(j("Trident")||j("MSIE"))&&!j("Edge"),$=-1!=M().toLowerCase().indexOf("webkit")&&!j("Edge");function H(){var e=v.document;return e?e.documentMode:void 0}e:{var K,G="",W=(K=M(),z?/rv:([^\);]+)(\)|;)/.exec(K):B?/Edge\/([\d\.]+)/.exec(K):V?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(K):$?/WebKit\/(\S+)/.exec(K):F?/(?:Version)[ \/]?(\S+)/.exec(K):void 0);if(W&&(G=W?W[1]:""),V){var Q=H();if(null!=Q&&Q>parseFloat(G)){i=String(Q);break e}}i=G}var X={},J=v.document&&V&&(H()||parseInt(i,10))||void 0;function Y(e,t){if(O.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var r=this.type=e.type,n=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(z){e:{try{U(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==r?t=e.fromElement:"mouseout"==r&&(t=e.toElement);this.relatedTarget=t,n?(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:Z[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Y.X.h.call(this)}}C(Y,O);var Z={2:"touch",3:"pen",4:"mouse"};Y.prototype.h=function(){Y.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ee="closure_listenable_"+(1e6*Math.random()|0),et=0;function er(e,t,r,n,i){this.listener=e,this.proxy=null,this.src=t,this.type=r,this.capture=!!n,this.ha=i,this.key=++et,this.ba=this.ea=!1}function en(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function ei(e,t,r){for(let n in e)t.call(r,e[n],n,e)}function es(e){let t={};for(let r in e)t[r]=e[r];return t}let eo="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ea(e,t){let r,n;for(let t=1;t<arguments.length;t++){for(r in n=arguments[t])e[r]=n[r];for(let t=0;t<eo.length;t++)r=eo[t],Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}}function el(e){this.src=e,this.g={},this.h=0}function eu(e,t){var r=t.type;if(r in e.g){var n,i=e.g[r],s=N(i,t);(n=0<=s)&&Array.prototype.splice.call(i,s,1),n&&(en(t),0==e.g[r].length&&(delete e.g[r],e.h--))}}function ec(e,t,r,n){for(var i=0;i<e.length;++i){var s=e[i];if(!s.ba&&s.listener==t&&!!r==s.capture&&s.ha==n)return i}return -1}el.prototype.add=function(e,t,r,n,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=ec(e,t,n,i);return -1<o?(t=e[o],r||(t.ea=!1)):((t=new er(t,this.src,s,!!n,i)).ea=r,e.push(t)),t};var eh="closure_lm_"+(1e6*Math.random()|0),ed={};function ef(e,t,r,n,i,s){if(!t)throw Error("Invalid event type");var o=E(i)?!!i.capture:!!i,a=ey(e);if(a||(e[eh]=a=new el(e)),(r=a.add(t,r,n,o,s)).proxy)return r;if(n=function e(t){return eg.call(e.src,e.listener,t)},r.proxy=n,n.src=e,n.listener=r,e.addEventListener)R||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),n,i);else if(e.attachEvent)e.attachEvent(em(t.toString()),n);else if(e.addListener&&e.removeListener)e.addListener(n);else throw Error("addEventListener and attachEvent are unavailable.");return r}function ep(e){if("number"!=typeof e&&e&&!e.ba){var t=e.src;if(t&&t[ee])eu(t.i,e);else{var r=e.type,n=e.proxy;t.removeEventListener?t.removeEventListener(r,n,e.capture):t.detachEvent?t.detachEvent(em(r),n):t.addListener&&t.removeListener&&t.removeListener(n),(r=ey(t))?(eu(r,e),0==r.h&&(r.src=null,t[eh]=null)):en(e)}}}function em(e){return e in ed?ed[e]:ed[e]="on"+e}function eg(e,t){if(e.ba)e=!0;else{t=new Y(t,this);var r=e.listener,n=e.ha||e.src;e.ea&&ep(e),e=r.call(n,t)}return e}function ey(e){return(e=e[eh])instanceof el?e:null}var ev="__closure_events_fn_"+(1e9*Math.random()>>>0);function ew(e){return"function"==typeof e?e:(e[ev]||(e[ev]=function(t){return e.handleEvent(t)}),e[ev])}function eb(){S.call(this),this.i=new el(this),this.P=this,this.I=null}function eE(e,t){var r,n=e.I;if(n)for(r=[];n;n=n.I)r.push(n);if(e=e.P,n=t.type||t,"string"==typeof t)t=new O(t,e);else if(t instanceof O)t.target=t.target||e;else{var i=t;ea(t=new O(n,e),i)}if(i=!0,r)for(var s=r.length-1;0<=s;s--){var o=t.g=r[s];i=e_(o,n,!0,t)&&i}if(i=e_(o=t.g=e,n,!0,t)&&i,i=e_(o,n,!1,t)&&i,r)for(s=0;s<r.length;s++)i=e_(o=t.g=r[s],n,!1,t)&&i}function e_(e,t,r,n){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.ba&&o.capture==r){var a=o.listener,l=o.ha||o.src;o.ea&&eu(e.i,o),i=!1!==a.call(l,n)&&i}}return i&&!n.defaultPrevented}C(eb,S),eb.prototype[ee]=!0,eb.prototype.removeEventListener=function(e,t,r,n){!function e(t,r,n,i,s){if(Array.isArray(r))for(var o=0;o<r.length;o++)e(t,r[o],n,i,s);else(i=E(i)?!!i.capture:!!i,n=ew(n),t&&t[ee])?(t=t.i,(r=String(r).toString())in t.g&&-1<(n=ec(o=t.g[r],n,i,s))&&(en(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[r],t.h--))):t&&(t=ey(t))&&(r=t.g[r.toString()],t=-1,r&&(t=ec(r,n,i,s)),(n=-1<t?r[t]:null)&&ep(n))}(this,e,t,r,n)},eb.prototype.M=function(){if(eb.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var r=t.g[e],n=0;n<r.length;n++)en(r[n]);delete t.g[e],t.h--}}this.I=null},eb.prototype.N=function(e,t,r,n){return this.i.add(String(e),t,!1,r,n)},eb.prototype.O=function(e,t,r,n){return this.i.add(String(e),t,!0,r,n)};var eT=v.JSON.stringify,eI=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new ex,e=>e.reset());class ex{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function eC(e,t){var r;o||(r=v.Promise.resolve(void 0),o=function(){r.then(eA)}),eS||(o(),eS=!0),eN.add(e,t)}var eS=!1,eN=new class{constructor(){this.h=this.g=null}add(e,t){let r=eI.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function eA(){let e;for(;e=null,(t=eN).g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),r=e;){try{r.h.call(r.g)}catch(e){!function(e){v.setTimeout(()=>{throw e},0)}(e)}var t,r,n=eI;n.j(r),100>n.h&&(n.h++,r.next=n.g,n.g=r)}eS=!1}function ek(e,t){eb.call(this),this.h=e||1,this.g=t||v,this.j=I(this.lb,this),this.l=Date.now()}function eO(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function eR(e,t,r){if("function"==typeof e)r&&(e=I(e,r));else if(e&&"function"==typeof e.handleEvent)e=I(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:v.setTimeout(e,t||0)}C(ek,eb),(c=ek.prototype).ca=!1,c.R=null,c.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),eE(this,"tick"),this.ca&&(eO(this),this.start()))}},c.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},c.M=function(){ek.X.M.call(this),eO(this),delete this.g};class eD extends S{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:function e(t){t.g=eR(()=>{t.g=null,t.i&&(t.i=!1,e(t))},t.j);let r=t.h;t.h=null,t.m.apply(null,r)}(this)}M(){super.M(),this.g&&(v.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function eL(e){S.call(this),this.h=e,this.g={}}C(eL,S);var eP=[];function eM(e,t,r,n){Array.isArray(r)||(r&&(eP[0]=r.toString()),r=eP);for(var i=0;i<r.length;i++){var s=function e(t,r,n,i,s){if(i&&i.once)return function e(t,r,n,i,s){if(Array.isArray(r)){for(var o=0;o<r.length;o++)e(t,r[o],n,i,s);return null}return n=ew(n),t&&t[ee]?t.O(r,n,E(i)?!!i.capture:!!i,s):ef(t,r,n,!0,i,s)}(t,r,n,i,s);if(Array.isArray(r)){for(var o=0;o<r.length;o++)e(t,r[o],n,i,s);return null}return n=ew(n),t&&t[ee]?t.N(r,n,E(i)?!!i.capture:!!i,s):ef(t,r,n,!1,i,s)}(t,r[i],n||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function ej(e){ei(e.g,function(e,t){this.g.hasOwnProperty(t)&&ep(e)},e),e.g={}}function eU(){this.g=!0}function eF(e,t,r,n){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var r=JSON.parse(t);if(r){for(e=0;e<r.length;e++)if(Array.isArray(r[e])){var n=r[e];if(!(2>n.length)){var i=n[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}}return eT(r)}catch(e){return t}}(e,r)+(n?" "+n:"")})}eL.prototype.M=function(){eL.X.M.call(this),ej(this)},eL.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},eU.prototype.Aa=function(){this.g=!1},eU.prototype.info=function(){};var eV={},eB=null;function eq(){return eB=eB||new eb}function ez(e){O.call(this,eV.Pa,e)}function e$(e){let t=eq();eE(t,new ez(t))}function eH(e,t){O.call(this,eV.STAT_EVENT,e),this.stat=t}function eK(e){let t=eq();eE(t,new eH(t,e))}function eG(e,t){O.call(this,eV.Qa,e),this.size=t}function eW(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return v.setTimeout(function(){e()},t)}eV.Pa="serverreachability",C(ez,O),eV.STAT_EVENT="statevent",C(eH,O),eV.Qa="timingevent",C(eG,O);var eQ={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},eX={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function eJ(){}function eY(e){return e.h||(e.h=e.i())}function eZ(){}eJ.prototype.h=null;var e0={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function e1(){O.call(this,"d")}function e2(){O.call(this,"c")}function e3(){}function e4(e,t,r,n){this.l=e,this.j=t,this.m=r,this.U=n||1,this.S=new eL(this),this.O=e5,e=q?125:void 0,this.T=new ek(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new e6}function e6(){this.i=null,this.g="",this.h=!1}C(e1,O),C(e2,O),C(e3,eJ),e3.prototype.g=function(){return new XMLHttpRequest},e3.prototype.i=function(){return{}},a=new e3;var e5=45e3,e8={},e9={};function e7(e,t,r){e.K=1,e.v=ty(td(t)),e.s=r,e.P=!0,te(e,null)}function te(e,t){e.F=Date.now(),tn(e),e.A=td(e.v);var r=e.A,n=e.U;Array.isArray(n)||(n=[String(n)]),tk(r.i,"t",n),e.C=0,r=e.l.H,e.h=new e6,e.g=rw(e.l,r?t:null,!e.s),0<e.N&&(e.L=new eD(I(e.La,e,e.g),e.N)),eM(e.S,e.g,"readystatechange",e.ib),t=e.H?es(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),e$(),function(e,t,r,n,i,s){e.info(function(){if(e.g){if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+u+"&":o+(c+"=redacted&")}}else o=null}else o=s;return"XMLHTTP REQ ("+n+") [attempt "+i+"]: "+t+"\n"+r+"\n"+o})}(e.j,e.u,e.A,e.m,e.U,e.s)}function tt(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Da}function tr(e,t,r){let n=!0,i;for(;!e.I&&e.C<r.length;)if((i=function(e,t){var r=e.C,n=t.indexOf("\n",r);return -1==n?e9:isNaN(r=Number(t.substring(r,n)))?e8:(n+=1)+r>t.length?e9:(t=t.substr(n,r),e.C=n+r,t)}(e,r))==e9){4==t&&(e.o=4,eK(14),n=!1),eF(e.j,e.m,null,"[Incomplete Response]");break}else if(i==e8){e.o=4,eK(15),eF(e.j,e.m,r,"[Invalid Chunk]"),n=!1;break}else eF(e.j,e.m,i,null),tl(e,i);tt(e)&&i!=e9&&i!=e8&&(e.h.g="",e.C=0),4!=t||0!=r.length||e.h.h||(e.o=1,eK(16),n=!1),e.i=e.i&&n,n?0<r.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+r.length),rh(t),t.K=!0,eK(11))):(eF(e.j,e.m,r,"[Invalid Chunked Response]"),ta(e),to(e))}function tn(e){e.V=Date.now()+e.O,ti(e,e.O)}function ti(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=eW(I(e.gb,e),t)}function ts(e){e.B&&(v.clearTimeout(e.B),e.B=null)}function to(e){0==e.l.G||e.I||rp(e.l,e)}function ta(e){ts(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,eO(e.T),ej(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function tl(e,t){try{var r=e.l;if(0!=r.G&&(r.g==e||tj(r.h,e))){if(!e.J&&tj(r.h,e)&&3==r.G){try{var n=r.Fa.g.parse(t)}catch(e){n=null}if(Array.isArray(n)&&3==n.length){var i=n;if(0==i[0]){e:if(!r.u){if(r.g){if(r.g.F+3e3<e.F)rf(r),rn(r);else break e}rc(r),eK(18)}}else r.Ba=i[1],0<r.Ba-r.T&&37500>i[2]&&r.L&&0==r.A&&!r.v&&(r.v=eW(I(r.cb,r),6e3));if(1>=tM(r.h)&&r.ja){try{r.ja()}catch(e){}r.ja=void 0}}else rg(r,11)}else if((e.J||r.g==e)&&rf(r),!D(t))for(i=r.Fa.g.parse(t),t=0;t<i.length;t++){let a=i[t];if(r.T=a[0],a=a[1],2==r.G){if("c"==a[0]){r.I=a[1],r.ka=a[2];let t=a[3];null!=t&&(r.ma=t,r.j.info("VER="+r.ma));let i=a[4];null!=i&&(r.Ca=i,r.j.info("SVER="+r.Ca));let l=a[5];null!=l&&"number"==typeof l&&0<l&&(n=1.5*l,r.J=n,r.j.info("backChannelRequestTimeoutMs_="+n)),n=r;let u=e.g;if(u){let e=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=n.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(tU(s,s.h),s.h=null))}if(n.D){let e=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(n.za=e,tg(n.F,n.D,e))}}if(r.G=3,r.l&&r.l.xa(),r.$&&(r.P=Date.now()-e.F,r.j.info("Handshake RTT: "+r.P+"ms")),(n=r).sa=rv(n,n.H?n.ka:null,n.V),e.J){tF(n.h,e);var o=n.J;o&&e.setTimeout(o),e.B&&(ts(e),tn(e)),n.g=e}else ru(n);0<r.i.length&&rs(r)}else"stop"!=a[0]&&"close"!=a[0]||rg(r,7)}else 3==r.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?rg(r,7):rr(r):"noop"!=a[0]&&r.l&&r.l.wa(a),r.A=0)}}e$(4)}catch(e){}}function tu(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(b(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var r=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(b(e)||"string"==typeof e){var t=[];e=e.length;for(var r=0;r<e;r++)t.push(r);return t}for(let n in t=[],r=0,e)t[r++]=n;return t}}}(e),n=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(b(e)){for(var t=[],r=e.length,n=0;n<r;n++)t.push(e[n]);return t}for(n in t=[],r=0,e)t[r++]=e[n];return t}(e),i=n.length,s=0;s<i;s++)t.call(void 0,n[s],r&&r[s],e)}(c=e4.prototype).setTimeout=function(e){this.O=e},c.ib=function(e){e=e.target;let t=this.L;t&&3==t5(e)?t.l():this.La(e)},c.La=function(e){try{if(e==this.g)e:{let c=t5(this.g);var t=this.g.Ea();let h=this.g.aa();if(!(3>c)&&(3!=c||q||this.g&&(this.h.h||this.g.fa()||t8(this.g)))){this.I||4!=c||7==t||(8==t||0>=h?e$(3):e$(2)),ts(this);var r=this.g.aa();this.Y=r;t:if(tt(this)){var n=t8(this.g);e="";var i=n.length,s=4==t5(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ta(this),to(this);var o="";break t}this.h.i=new v.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(n[t],{stream:s&&t==i-1});n.splice(0,i),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=200==r,function(e,t,r,n,i,s,o){e.info(function(){return"XMLHTTP RESP ("+n+") [ attempt "+i+"]: "+t+"\n"+r+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.U,c,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(a)){var u=a;break t}}u=null}if(r=u)eF(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,tl(this,r);else{this.i=!1,this.o=3,eK(12),ta(this),to(this);break e}}this.P?(tr(this,c,o),q&&this.i&&3==c&&(eM(this.S,this.T,"tick",this.hb),this.T.start())):(eF(this.j,this.m,o,null),tl(this,o)),4==c&&ta(this),this.i&&!this.I&&(4==c?rp(this.l,this):(this.i=!1,tn(this)))}else 400==r&&0<o.indexOf("Unknown SID")?(this.o=3,eK(12)):(this.o=0,eK(13)),ta(this),to(this)}}}catch(e){}finally{}},c.hb=function(){if(this.g){var e=t5(this.g),t=this.g.fa();this.C<t.length&&(ts(this),tr(this,e,t),this.i&&4!=e&&tn(this))}},c.cancel=function(){this.I=!0,ta(this)},c.gb=function(){this.B=null;let e=Date.now();0<=e-this.V?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(e$(),eK(17)),ta(this),this.o=2,to(this)):ti(this,this.V-e)};var tc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function th(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof th){this.h=void 0!==t?t:e.h,tf(this,e.j),this.s=e.s,this.g=e.g,tp(this,e.m),this.l=e.l,t=e.i;var r=new tC;r.i=t.i,t.g&&(r.g=new Map(t.g),r.h=t.h),tm(this,r),this.o=e.o}else e&&(r=String(e).match(tc))?(this.h=!!t,tf(this,r[1]||"",!0),this.s=tv(r[2]||""),this.g=tv(r[3]||"",!0),tp(this,r[4]),this.l=tv(r[5]||"",!0),tm(this,r[6]||"",!0),this.o=tv(r[7]||"")):(this.h=!!t,this.i=new tC(null,this.h))}function td(e){return new th(e)}function tf(e,t,r){e.j=r?tv(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function tp(e,t){if(t){if(isNaN(t=Number(t))||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function tm(e,t,r){var n,i;t instanceof tC?(e.i=t,n=e.i,(i=e.h)&&!n.j&&(tS(n),n.i=null,n.g.forEach(function(e,t){var r=t.toLowerCase();t!=r&&(tN(this,t),tk(this,r,e))},n)),n.j=i):(r||(t=tw(t,tI)),e.i=new tC(t,e.h))}function tg(e,t,r){e.i.set(t,r)}function ty(e){return tg(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function tv(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function tw(e,t,r){return"string"==typeof e?(e=encodeURI(e).replace(t,tb),r&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function tb(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}th.prototype.toString=function(){var e=[],t=this.j;t&&e.push(tw(t,tE,!0),":");var r=this.g;return(r||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(tw(t,tE,!0),"@"),e.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(r=this.m)&&e.push(":",String(r))),(r=this.l)&&(this.g&&"/"!=r.charAt(0)&&e.push("/"),e.push(tw(r,"/"==r.charAt(0)?tT:t_,!0))),(r=this.i.toString())&&e.push("?",r),(r=this.o)&&e.push("#",tw(r,tx)),e.join("")};var tE=/[#\/\?@]/g,t_=/[#\?:]/g,tT=/[#\?]/g,tI=/[#\?@]/g,tx=/#/g;function tC(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function tS(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var r=0;r<e.length;r++){var n=e[r].indexOf("="),i=null;if(0<=n){var s=e[r].substring(0,n);i=e[r].substring(n+1)}else s=e[r];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,r){e.add(decodeURIComponent(t.replace(/\+/g," ")),r)}))}function tN(e,t){tS(e),t=tO(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function tA(e,t){return tS(e),t=tO(e,t),e.g.has(t)}function tk(e,t,r){tN(e,t),0<r.length&&(e.i=null,e.g.set(tO(e,t),A(r)),e.h+=r.length)}function tO(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(c=tC.prototype).add=function(e,t){tS(this),this.i=null,e=tO(this,e);var r=this.g.get(e);return r||this.g.set(e,r=[]),r.push(t),this.h+=1,this},c.forEach=function(e,t){tS(this),this.g.forEach(function(r,n){r.forEach(function(r){e.call(t,r,n,this)},this)},this)},c.oa=function(){tS(this);let e=Array.from(this.g.values()),t=Array.from(this.g.keys()),r=[];for(let n=0;n<t.length;n++){let i=e[n];for(let e=0;e<i.length;e++)r.push(t[n])}return r},c.W=function(e){tS(this);let t=[];if("string"==typeof e)tA(this,e)&&(t=t.concat(this.g.get(tO(this,e))));else{e=Array.from(this.g.values());for(let r=0;r<e.length;r++)t=t.concat(e[r])}return t},c.set=function(e,t){return tS(this),this.i=null,tA(this,e=tO(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},c.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},c.toString=function(){if(this.i)return this.i;if(!this.g)return"";let e=[],t=Array.from(this.g.keys());for(var r=0;r<t.length;r++){var n=t[r];let s=encodeURIComponent(String(n)),o=this.W(n);for(n=0;n<o.length;n++){var i=s;""!==o[n]&&(i+="="+encodeURIComponent(String(o[n]))),e.push(i)}}return this.i=e.join("&")};var tR=class{constructor(e,t){this.h=e,this.g=t}};function tD(e){this.l=e||tL,e=v.PerformanceNavigationTiming?0<(e=v.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(v.g&&v.g.Ga&&v.g.Ga()&&v.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var tL=10;function tP(e){return!!e.h||!!e.g&&e.g.size>=e.j}function tM(e){return e.h?1:e.g?e.g.size:0}function tj(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function tU(e,t){e.g?e.g.add(t):e.h=t}function tF(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function tV(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(let r of e.g.values())t=t.concat(r.D);return t}return A(e.i)}function tB(){}function tq(){this.g=new tB}function tz(e,t,r,n,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(n)}catch(e){}}function t$(e){this.l=e.ac||null,this.j=e.jb||!1}function tH(e,t){eb.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=tK,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}tD.prototype.cancel=function(){if(this.i=tV(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(let e of this.g.values())e.cancel();this.g.clear()}},tB.prototype.stringify=function(e){return v.JSON.stringify(e,void 0)},tB.prototype.parse=function(e){return v.JSON.parse(e,void 0)},C(t$,eJ),t$.prototype.g=function(){return new tH(this.l,this.j)},t$.prototype.i=(n={},function(){return n}),C(tH,eb);var tK=0;function tG(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function tW(e){e.readyState=4,e.l=null,e.j=null,e.A=null,tQ(e)}function tQ(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(c=tH.prototype).open=function(e,t){if(this.readyState!=tK)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,tQ(this)},c.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;let t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||v).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},c.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,tW(this)),this.readyState=tK},c.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,tQ(this)),this.g&&(this.readyState=3,tQ(this),this.g))){if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==v.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;tG(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))}},c.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?tW(this):tQ(this),3==this.readyState&&tG(this)}},c.Va=function(e){this.g&&(this.response=this.responseText=e,tW(this))},c.Ua=function(e){this.g&&(this.response=e,tW(this))},c.ga=function(){this.g&&tW(this)},c.setRequestHeader=function(e,t){this.v.append(e,t)},c.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},c.getAllResponseHeaders=function(){if(!this.h)return"";let e=[],t=this.h.entries();for(var r=t.next();!r.done;)e.push((r=r.value)[0]+": "+r[1]),r=t.next();return e.join("\r\n")},Object.defineProperty(tH.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var tX=v.JSON.parse;function tJ(e){eb.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=tY,this.K=this.L=!1}C(tJ,eb);var tY="",tZ=/^https?$/i,t0=["POST","PUT"];function t1(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,t2(e),t4(e)}function t2(e){e.D||(e.D=!0,eE(e,"complete"),eE(e,"error"))}function t3(e){if(e.h&&void 0!==y&&(!e.C[1]||4!=t5(e)||2!=e.aa())){if(e.v&&4==t5(e))eR(e.Ha,0,e);else if(eE(e,"readystatechange"),4==t5(e)){e.h=!1;try{let a=e.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t,r,n=!0;break e;default:n=!1}if(!(t=n)){if(r=0===a){var i=String(e.H).match(tc)[1]||null;if(!i&&v.self&&v.self.location){var s=v.self.location.protocol;i=s.substr(0,s.length-1)}r=!tZ.test(i?i.toLowerCase():"")}t=r}if(t)eE(e,"complete"),eE(e,"success");else{e.m=6;try{var o=2<t5(e)?e.g.statusText:""}catch(e){o=""}e.j=o+" ["+e.aa()+"]",t2(e)}}finally{t4(e)}}}}function t4(e,t){if(e.g){t6(e);let r=e.g,n=e.C[0]?w:null;e.g=null,e.C=null,t||eE(e,"ready");try{r.onreadystatechange=n}catch(e){}}}function t6(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(v.clearTimeout(e.A),e.A=null)}function t5(e){return e.g?e.g.readyState:0}function t8(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case tY:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function t9(e){let t="";return ei(e,function(e,r){t+=r+":"+e+"\r\n"}),t}function t7(e,t,r){e:{for(n in r){var n=!1;break e}n=!0}n||(r=t9(r),"string"==typeof e?null!=r&&encodeURIComponent(String(r)):tg(e,t,r))}function re(e,t,r){return r&&r.internalChannelParams&&r.internalChannelParams[e]||t}function rt(e){this.Ca=0,this.i=[],this.j=new eU,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=re("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=re("baseRetryDelayMs",5e3,e),this.bb=re("retryDelaySeedMs",1e4,e),this.$a=re("forwardChannelMaxRetries",2,e),this.ta=re("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new tD(e&&e.concurrentRequestLimit),this.Fa=new tq,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function rr(e){if(ri(e),3==e.G){var t=e.U++,r=td(e.F);tg(r,"SID",e.I),tg(r,"RID",t),tg(r,"TYPE","terminate"),ra(e,r),(t=new e4(e,e.j,t,void 0)).K=2,t.v=ty(td(r)),r=!1,v.navigator&&v.navigator.sendBeacon&&(r=v.navigator.sendBeacon(t.v.toString(),"")),!r&&v.Image&&((new Image).src=t.v,r=!0),r||(t.g=rw(t.l,null),t.g.da(t.v)),t.F=Date.now(),tn(t)}ry(e)}function rn(e){e.g&&(rh(e),e.g.cancel(),e.g=null)}function ri(e){rn(e),e.u&&(v.clearTimeout(e.u),e.u=null),rf(e),e.h.cancel(),e.m&&("number"==typeof e.m&&v.clearTimeout(e.m),e.m=null)}function rs(e){tP(e.h)||e.m||(e.m=!0,eC(e.Ja,e),e.C=0)}function ro(e,t){var r;r=t?t.m:e.U++;let n=td(e.F);tg(n,"SID",e.I),tg(n,"RID",r),tg(n,"AID",e.T),ra(e,n),e.o&&e.s&&t7(n,e.o,e.s),r=new e4(e,e.j,r,e.C+1),null===e.o&&(r.H=e.s),t&&(e.i=t.D.concat(e.i)),t=rl(e,r,1e3),r.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),tU(e.h,r),e7(r,n,t)}function ra(e,t){e.ia&&ei(e.ia,function(e,r){tg(t,r,e)}),e.l&&tu({},function(e,r){tg(t,r,e)})}function rl(e,t,r){r=Math.min(e.i.length,r);var n=e.l?I(e.l.Ra,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){let e=["count="+r];-1==t?0<r?(t=i[0].h,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<r;o++){let r=i[o].h,a=i[o].g;if(0>(r-=t))t=Math.max(0,i[o].h-100),s=!1;else try{!function(e,t,r){let n=r||"";try{tu(e,function(e,r){let i=e;E(e)&&(i=eT(e)),t.push(n+r+"="+encodeURIComponent(i))})}catch(e){throw t.push(n+"type="+encodeURIComponent("_badmap")),e}}(a,e,"req"+r+"_")}catch(e){n&&n(a)}}if(s){n=e.join("&");break e}}}return e=e.i.splice(0,r),t.D=e,n}function ru(e){e.g||e.u||(e.Z=1,eC(e.Ia,e),e.A=0)}function rc(e){return!e.g&&!e.u&&!(3<=e.A)&&(e.Z++,e.u=eW(I(e.Ia,e),rm(e,e.A)),e.A++,!0)}function rh(e){null!=e.B&&(v.clearTimeout(e.B),e.B=null)}function rd(e){e.g=new e4(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=td(e.sa);tg(t,"RID","rpc"),tg(t,"SID",e.I),tg(t,"CI",e.L?"0":"1"),tg(t,"AID",e.T),tg(t,"TYPE","xmlhttp"),ra(e,t),e.o&&e.s&&t7(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var r=e.g;e=e.ka,r.K=1,r.v=ty(td(t)),r.s=null,r.P=!0,te(r,e)}function rf(e){null!=e.v&&(v.clearTimeout(e.v),e.v=null)}function rp(e,t){var r=null;if(e.g==t){rf(e),rh(e),e.g=null;var n=2}else{if(!tj(e.h,t))return;r=t.D,tF(e.h,t),n=1}if(0!=e.G){if(e.pa=t.Y,t.i){if(1==n){r=t.s?t.s.length:0,t=Date.now()-t.F;var i,s,o=e.C;eE(n=eq(),new eG(n,r)),rs(e)}else ru(e)}else if(3==(o=t.o)||0==o&&0<e.pa||!(1==n&&(i=e,s=t,!(tM(i.h)>=i.h.j-(i.m?1:0))&&(i.m?(i.i=s.D.concat(i.i),!0):1!=i.G&&2!=i.G&&!(i.C>=(i.Za?0:i.$a))&&(i.m=eW(I(i.Ja,i,s),rm(i,i.C)),i.C++,!0)))||2==n&&rc(e)))switch(r&&0<r.length&&((t=e.h).i=t.i.concat(r)),o){case 1:rg(e,5);break;case 4:rg(e,10);break;case 3:rg(e,6);break;default:rg(e,2)}}}function rm(e,t){let r=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(r*=2),r*t}function rg(e,t){if(e.j.info("Error code "+t),2==t){var r=null;e.l&&(r=null);var n=I(e.kb,e);r||(r=new th("//www.google.com/images/cleardot.gif"),v.location&&"http"==v.location.protocol||tf(r,"https"),ty(r)),function(e,t){let r=new eU;if(v.Image){let n=new Image;n.onload=x(tz,r,n,"TestLoadImage: loaded",!0,t),n.onerror=x(tz,r,n,"TestLoadImage: error",!1,t),n.onabort=x(tz,r,n,"TestLoadImage: abort",!1,t),n.ontimeout=x(tz,r,n,"TestLoadImage: timeout",!1,t),v.setTimeout(function(){n.ontimeout&&n.ontimeout()},1e4),n.src=e}else t(!1)}(r.toString(),n)}else eK(2);e.G=0,e.l&&e.l.va(t),ry(e),ri(e)}function ry(e){if(e.G=0,e.la=[],e.l){let t=tV(e.h);(0!=t.length||0!=e.i.length)&&(k(e.la,t),k(e.la,e.i),e.h.i.length=0,A(e.i),e.i.length=0),e.l.ua()}}function rv(e,t,r){var n=r instanceof th?td(r):new th(r,void 0);if(""!=n.g)t&&(n.g=t+"."+n.g),tp(n,n.m);else{var i=v.location;n=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new th(null,void 0);n&&tf(s,n),t&&(s.g=t),i&&tp(s,i),r&&(s.l=r),n=s}return r=e.D,t=e.za,r&&t&&tg(n,r,t),tg(n,"VER",e.ma),ra(e,n),n}function rw(e,t,r){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new tJ(r&&e.Da&&!e.ra?new t$({jb:!0}):e.ra)).Ka(e.H),t}function rb(){}function rE(){if(V&&!(10<=Number(J)))throw Error("Environmental error: no available transport.")}function r_(e,t){eb.call(this),this.g=new rt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!D(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!D(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new rx(this)}function rT(e){e1.call(this);var t=e.__sm__;if(t){e:{for(let r in t){e=r;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function rI(){e2.call(this),this.status=1}function rx(e){this.g=e}(c=tJ.prototype).Ka=function(e){this.L=e},c.da=function(e,t,r,n){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():a.g(),this.C=this.u?eY(this.u):eY(a),this.g.onreadystatechange=I(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(e){t1(this,e);return}if(e=r||"",r=new Map(this.headers),n){if(Object.getPrototypeOf(n)===Object.prototype)for(var s in n)r.set(s,n[s]);else if("function"==typeof n.keys&&"function"==typeof n.get)for(let e of n.keys())r.set(e,n.get(e));else throw Error("Unknown input type for opt_headers: "+String(n))}for(let[i,o]of(n=Array.from(r.keys()).find(e=>"content-type"==e.toLowerCase()),s=v.FormData&&e instanceof v.FormData,!(0<=N(t0,t))||n||s||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r))this.g.setRequestHeader(i,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{var o,l;t6(this),0<this.B&&((this.K=(o=this.g,V&&(l=X,Object.prototype.hasOwnProperty.call(l,9)?l[9]:l[9]=function(){let e=0,t=L(String(i)).split("."),r=L("9").split("."),n=Math.max(t.length,r.length);for(let i=0;0==e&&i<n;i++){var s=t[i]||"",o=r[i]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==s[0].length&&0==o[0].length)break;e=P(0==s[1].length?0:parseInt(s[1],10),0==o[1].length?0:parseInt(o[1],10))||P(0==s[2].length,0==o[2].length)||P(s[2],o[2]),s=s[3],o=o[3]}while(0==e)}return 0<=e}(9))&&"number"==typeof o.timeout&&void 0!==o.ontimeout))?(this.g.timeout=this.B,this.g.ontimeout=I(this.qa,this)):this.A=eR(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){t1(this,e)}},c.qa=function(){void 0!==y&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,eE(this,"timeout"),this.abort(8))},c.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,eE(this,"complete"),eE(this,"abort"),t4(this))},c.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),t4(this,!0)),tJ.X.M.call(this)},c.Ha=function(){this.s||(this.F||this.v||this.l?t3(this):this.fb())},c.fb=function(){t3(this)},c.aa=function(){try{return 2<t5(this)?this.g.status:-1}catch(e){return -1}},c.fa=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},c.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),tX(t)}},c.Ea=function(){return this.m},c.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(c=rt.prototype).ma=8,c.G=1,c.Ja=function(e){if(this.m){if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;let i=new e4(this,this.j,e,void 0),s=this.s;if(this.S&&(s?ea(s=es(s),this.S):s=this.S),null!==this.o||this.N||(i.H=s,s=null),this.O)e:{for(var t=0,r=0;r<this.i.length;r++){t:{var n=this.i[r];if("__data__"in n.g&&"string"==typeof(n=n.g.__data__)){n=n.length;break t}n=void 0}if(void 0===n)break;if(4096<(t+=n)){t=r;break e}if(4096===t||r===this.i.length-1){t=r+1;break e}}t=1e3}else t=1e3;t=rl(this,i,t),tg(r=td(this.F),"RID",e),tg(r,"CVER",22),this.D&&tg(r,"X-HTTP-Session-Id",this.D),ra(this,r),s&&(this.N?t="headers="+encodeURIComponent(String(t9(s)))+"&"+t:this.o&&t7(r,this.o,s)),tU(this.h,i),this.Ya&&tg(r,"TYPE","init"),this.O?(tg(r,"$req",t),tg(r,"SID","null"),i.Z=!0,e7(i,r,null)):e7(i,r,t),this.G=2}}else 3==this.G&&(e?ro(this,e):0==this.i.length||tP(this.h)||ro(this))}},c.Ia=function(){if(this.u=null,rd(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=eW(I(this.eb,this),e)}},c.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,eK(10),rn(this),rd(this))},c.cb=function(){null!=this.v&&(this.v=null,rn(this),rc(this),eK(19))},c.kb=function(e){e?(this.j.info("Successfully pinged google.com"),eK(2)):(this.j.info("Failed to ping google.com"),eK(1))},(c=rb.prototype).xa=function(){},c.wa=function(){},c.va=function(){},c.ua=function(){},c.Ra=function(){},rE.prototype.g=function(e,t){return new r_(e,t)},C(r_,eb),r_.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,r=this.h||void 0;eK(0),e.V=t,e.ia=r||{},e.L=e.Y,e.F=rv(e,null,e.V),rs(e)},r_.prototype.close=function(){rr(this.g)},r_.prototype.u=function(e){var t=this.g;if("string"==typeof e){var r={};r.__data__=e,e=r}else this.v&&((r={}).__data__=eT(e),e=r);t.i.push(new tR(t.ab++,e)),3==t.G&&rs(t)},r_.prototype.M=function(){this.g.l=null,delete this.j,rr(this.g),delete this.g,r_.X.M.call(this)},C(rT,e1),C(rI,e2),C(rx,rb),rx.prototype.xa=function(){eE(this.g,"a")},rx.prototype.wa=function(e){eE(this.g,new rT(e))},rx.prototype.va=function(e){eE(this.g,new rI)},rx.prototype.ua=function(){eE(this.g,"b")},rE.prototype.createWebChannel=rE.prototype.g,r_.prototype.send=r_.prototype.u,r_.prototype.open=r_.prototype.m,r_.prototype.close=r_.prototype.close,eQ.NO_ERROR=0,eQ.TIMEOUT=8,eQ.HTTP_ERROR=6,eX.COMPLETE="complete",eZ.EventType=e0,e0.OPEN="a",e0.CLOSE="b",e0.ERROR="c",e0.MESSAGE="d",eb.prototype.listen=eb.prototype.N,tJ.prototype.listenOnce=tJ.prototype.O,tJ.prototype.getLastError=tJ.prototype.Oa,tJ.prototype.getLastErrorCode=tJ.prototype.Ea,tJ.prototype.getStatus=tJ.prototype.aa,tJ.prototype.getResponseJson=tJ.prototype.Sa,tJ.prototype.getResponseText=tJ.prototype.fa,tJ.prototype.send=tJ.prototype.da,tJ.prototype.setWithCredentials=tJ.prototype.Ka;var rC=g.createWebChannelTransport=function(){return new rE},rS=g.getStatEventTarget=function(){return eq()},rN=g.ErrorCode=eQ,rA=g.EventType=eX,rk=g.Event=eV,rO=g.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},rR=g.FetchXmlHttpFactory=t$,rD=g.WebChannel=eZ,rL=g.XhrIo=tJ;r(4155);let rP="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rM.UNAUTHENTICATED=new rM(null),rM.GOOGLE_CREDENTIALS=new rM("google-credentials-uid"),rM.FIRST_PARTY=new rM("first-party-uid"),rM.MOCK_USER=new rM("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rj="9.18.0",rU=new f.Yd("@firebase/firestore");function rF(){return rU.logLevel}function rV(e,...t){if(rU.logLevel<=f.in.DEBUG){let r=t.map(rz);rU.debug(`Firestore (${rj}): ${e}`,...r)}}function rB(e,...t){if(rU.logLevel<=f.in.ERROR){let r=t.map(rz);rU.error(`Firestore (${rj}): ${e}`,...r)}}function rq(e,...t){if(rU.logLevel<=f.in.WARN){let r=t.map(rz);rU.warn(`Firestore (${rj}): ${e}`,...r)}}function rz(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r$(e="Unexpected state"){let t=`FIRESTORE (${rj}) INTERNAL ASSERTION FAILED: `+e;throw rB(t),Error(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rH={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class rK extends p.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rG{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rW{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rQ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(rM.UNAUTHENTICATED))}shutdown(){}}class rX{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class rJ{constructor(e){this.t=e,this.currentUser=rM.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i,n=e=>this.i!==r?(r=this.i,t(e)):Promise.resolve(),i=new rG;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new rG,e.enqueueRetryable(()=>n(this.currentUser))};let s=()=>{let t=i;e.enqueueRetryable(async()=>{await t.promise,await n(this.currentUser)})},o=e=>{rV("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){let e=this.t.getImmediate({optional:!0});e?o(e):(rV("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new rG)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(rV("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?("string"==typeof t.accessToken||r$(),new rW(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return null===e||"string"==typeof e||r$(),new rM(e)}}class rY{constructor(e,t,r,n){this.h=e,this.l=t,this.m=r,this.g=n,this.type="FirstParty",this.user=rM.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():("object"==typeof this.h&&null!==this.h&&this.h.auth&&this.h.auth.getAuthHeaderValueForFirstParty||r$(),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);let e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class rZ{constructor(e,t,r,n){this.h=e,this.l=t,this.m=r,this.g=n}getToken(){return Promise.resolve(new rY(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(rM.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class r0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class r1{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){let r=e=>{null!=e.error&&rV("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);let r=e.token!==this.A;return this.A=e.token,rV("FirebaseAppCheckTokenProvider",`Received ${r?"new":"existing"} token.`),r?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>r(t))};let n=e=>{rV("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.T.onInit(e=>n(e)),setTimeout(()=>{if(!this.appCheck){let e=this.T.getImmediate({optional:!0});e?n(e):rV("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?("string"==typeof e.token||r$(),this.A=e.token,new r0(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{static R(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let n=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){let t="undefined"!=typeof self&&(self.crypto||self.msCrypto),r=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(r);else for(let t=0;t<e;t++)r[t]=Math.floor(256*Math.random());return r}(40);for(let i=0;i<n.length;++i)r.length<20&&n[i]<t&&(r+=e.charAt(n[i]%e.length))}return r}}function r3(e,t){return e<t?-1:e>t?1:0}function r4(e,t,r){return e.length===t.length&&e.every((e,n)=>r(e,t[n]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0||t>=1e9)throw new rK(rH.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800||e>=253402300800)throw new rK(rH.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return r6.fromMillis(Date.now())}static fromDate(e){return r6.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3);return new r6(t,Math.floor(1e6*(e-1e3*t)))}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?r3(this.nanoseconds,e.nanoseconds):r3(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(e){this.timestamp=e}static fromTimestamp(e){return new r5(e)}static min(){return new r5(new r6(0,0))}static max(){return new r5(new r6(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{constructor(e,t,r){void 0===t?t=0:t>e.length&&r$(),void 0===r?r=e.length-t:r>e.length-t&&r$(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===r8.comparator(this,e)}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof r8?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let n=0;n<r;n++){let r=e.get(n),i=t.get(n);if(r<i)return -1;if(r>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class r9 extends r8{construct(e,t,r){return new r9(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new rK(rH.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(e=>e.length>0))}return new r9(t)}static emptyPath(){return new r9([])}}let r7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ne extends r8{construct(e,t,r){return new ne(e,t,r)}static isValidIdentifier(e){return r7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ne.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ne(["__name__"])}static fromServerFormat(e){let t=[],r="",n=0,i=()=>{if(0===r.length)throw new rK(rH.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;n<e.length;){let t=e[n];if("\\"===t){if(n+1===e.length)throw new rK(rH.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let t=e[n+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new rK(rH.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=t,n+=2}else"`"===t?(s=!s,n++):"."!==t||s?(r+=t,n++):(i(),n++)}if(i(),s)throw new rK(rH.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ne(t)}static emptyPath(){return new ne([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.path=e}static fromPath(e){return new nt(r9.fromString(e))}static fromName(e){return new nt(r9.fromString(e).popFirst(5))}static empty(){return new nt(r9.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===r9.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return r9.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new nt(new r9(e.slice()))}}class nr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new nr(r5.min(),nt.empty(),-1)}static max(){return new nr(r5.max(),nt.empty(),-1)}}class nn{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ni(e){if(e.code!==rH.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;rV("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&r$(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ns((r,n)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(r,n)},this.catchCallback=e=>{this.wrapFailure(t,e).next(r,n)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof ns?t:ns.resolve(t)}catch(e){return ns.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ns.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ns.reject(t)}static resolve(e){return new ns((t,r)=>{t(e)})}static reject(e){return new ns((t,r)=>{r(e)})}static waitFor(e){return new ns((t,r)=>{let n=0,i=0,s=!1;e.forEach(e=>{++n,e.next(()=>{++i,s&&i===n&&t()},e=>r(e))}),s=!0,i===n&&t()})}static or(e){let t=ns.resolve(!1);for(let r of e)t=t.next(e=>e?ns.resolve(e):r());return t}static forEach(e,t){let r=[];return e.forEach((e,n)=>{r.push(t.call(this,e,n))}),this.waitFor(r)}static mapArray(e,t){return new ns((r,n)=>{let i=e.length,s=Array(i),o=0;for(let a=0;a<i;a++){let l=a;t(e[l]).next(e=>{s[l]=e,++o===i&&r(s)},e=>n(e))}})}static doWhile(e,t){return new ns((r,n)=>{let i=()=>{!0===e()?t().next(()=>{i()},n):r()};i()})}}function no(e){return"IndexedDbTransactionError"===e.name}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ut(e),this.ct=e=>t.writeSequenceNumber(e))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.ct&&this.ct(e),e}}na.at=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,t,r,n,i,s,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=n,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class nu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new nu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof nu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(e){let t=0;for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function nh(e,t){for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function nd(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function nf(e){return 0===e&&1/e==-1/0}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(e){try{return atob(e)}catch(e){throw e instanceof DOMException?new np("Invalid base64 string: "+e):e}}(e);return new nm(t)}static fromUint8Array(e){let t=function(e){let t="";for(let r=0;r<e.length;++r)t+=String.fromCharCode(e[r]);return t}(e);return new nm(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){let t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return r3(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nm.EMPTY_BYTE_STRING=new nm("");let ng=RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ny(e){if(e||r$(),"string"==typeof e){let t=0,r=ng.exec(e);if(r||r$(),r[1]){let e=r[1];t=Number(e=(e+"000000000").substr(0,9))}let n=new Date(e);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:nv(e.seconds),nanos:nv(e.nanos)}}function nv(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function nw(e){return"string"==typeof e?nm.fromBase64String(e):nm.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(e){var t,r;return"server_timestamp"===(null===(r=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function nE(e){let t=ny(e.mapValue.fields.__local_write_time__.timestampValue);return new r6(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let n_={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function nT(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?nb(e)?4:nM(e)?9007199254740991:10:r$()}function nI(e,t){if(e===t)return!0;let r=nT(e);if(r!==nT(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return nE(e).isEqual(nE(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;let r=ny(e.timestampValue),n=ny(t.timestampValue);return r.seconds===n.seconds&&r.nanos===n.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return nw(e.bytesValue).isEqual(nw(t.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return nv(e.geoPointValue.latitude)===nv(t.geoPointValue.latitude)&&nv(e.geoPointValue.longitude)===nv(t.geoPointValue.longitude);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return nv(e.integerValue)===nv(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){let r=nv(e.doubleValue),n=nv(t.doubleValue);return r===n?nf(r)===nf(n):isNaN(r)&&isNaN(n)}return!1}(e,t);case 9:return r4(e.arrayValue.values||[],t.arrayValue.values||[],nI);case 10:return function(e,t){let r=e.mapValue.fields||{},n=t.mapValue.fields||{};if(nc(r)!==nc(n))return!1;for(let e in r)if(r.hasOwnProperty(e)&&(void 0===n[e]||!nI(r[e],n[e])))return!1;return!0}(e,t);default:return r$()}}function nx(e,t){return void 0!==(e.values||[]).find(e=>nI(e,t))}function nC(e,t){if(e===t)return 0;let r=nT(e),n=nT(t);if(r!==n)return r3(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return r3(e.booleanValue,t.booleanValue);case 2:return function(e,t){let r=nv(e.integerValue||e.doubleValue),n=nv(t.integerValue||t.doubleValue);return r<n?-1:r>n?1:r===n?0:isNaN(r)?isNaN(n)?0:-1:1}(e,t);case 3:return nS(e.timestampValue,t.timestampValue);case 4:return nS(nE(e),nE(t));case 5:return r3(e.stringValue,t.stringValue);case 6:return function(e,t){let r=nw(e),n=nw(t);return r.compareTo(n)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){let r=e.split("/"),n=t.split("/");for(let e=0;e<r.length&&e<n.length;e++){let t=r3(r[e],n[e]);if(0!==t)return t}return r3(r.length,n.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){let r=r3(nv(e.latitude),nv(t.latitude));return 0!==r?r:r3(nv(e.longitude),nv(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){let r=e.values||[],n=t.values||[];for(let e=0;e<r.length&&e<n.length;++e){let t=nC(r[e],n[e]);if(t)return t}return r3(r.length,n.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===n_.mapValue&&t===n_.mapValue)return 0;if(e===n_.mapValue)return 1;if(t===n_.mapValue)return -1;let r=e.fields||{},n=Object.keys(r),i=t.fields||{},s=Object.keys(i);n.sort(),s.sort();for(let e=0;e<n.length&&e<s.length;++e){let t=r3(n[e],s[e]);if(0!==t)return t;let o=nC(r[n[e]],i[s[e]]);if(0!==o)return o}return r3(n.length,s.length)}(e.mapValue,t.mapValue);default:throw r$()}}function nS(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return r3(e,t);let r=ny(e),n=ny(t),i=r3(r.seconds,n.seconds);return 0!==i?i:r3(r.nanos,n.nanos)}function nN(e){var t,r;return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){let t=ny(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?nw(e.bytesValue).toBase64():"referenceValue"in e?(r=e.referenceValue,nt.fromName(r).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",r=!0;for(let n of e.values||[])r?r=!1:t+=",",t+=nN(n);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){let t=Object.keys(e.fields||{}).sort(),r="{",n=!0;for(let i of t)n?n=!1:r+=",",r+=`${i}:${nN(e.fields[i])}`;return r+"}"}(e.mapValue):r$()}function nA(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function nk(e){return!!e&&"integerValue"in e}function nO(e){return!!e&&"arrayValue"in e}function nR(e){return!!e&&"nullValue"in e}function nD(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function nL(e){return!!e&&"mapValue"in e}function nP(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){let t={mapValue:{fields:{}}};return nh(e.mapValue.fields,(e,r)=>t.mapValue.fields[e]=nP(r)),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=nP(e.arrayValue.values[r]);return t}return Object.assign({},e)}function nM(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(e,t){this.position=e,this.inclusive=t}}function nU(e,t,r){let n=0;for(let i=0;i<e.position.length;i++){let s=t[i],o=e.position[i];if(n=s.field.isKeyField()?nt.comparator(nt.fromName(o.referenceValue),r.key):nC(o,r.data.field(s.field)),"desc"===s.dir&&(n*=-1),0!==n)break}return n}function nF(e,t){if(null===e)return null===t;if(null===t||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!nI(e.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{}class nB extends nV{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new nH(e,t,r):"array-contains"===t?new nQ(e,r):"in"===t?new nX(e,r):"not-in"===t?new nJ(e,r):"array-contains-any"===t?new nY(e,r):new nB(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new nK(e,r):new nG(e,r)}matches(e){let t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(nC(t,this.value)):null!==t&&nT(this.value)===nT(t)&&this.matchesComparison(nC(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return r$()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class nq extends nV{constructor(e,t){super(),this.filters=e,this.op=t,this.ft=null}static create(e,t){return new nq(e,t)}matches(e){return nz(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ft||(this.ft=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ft}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){let e=this.dt(e=>e.isInequality());return null!==e?e.field:null}dt(e){for(let t of this.getFlattenedFilters())if(e(t))return t;return null}}function nz(e){return"and"===e.op}function n$(e){for(let t of e.filters)if(t instanceof nq)return!1;return!0}class nH extends nB{constructor(e,t,r){super(e,t,r),this.key=nt.fromName(r.referenceValue)}matches(e){let t=nt.comparator(e.key,this.key);return this.matchesComparison(t)}}class nK extends nB{constructor(e,t){super(e,"in",t),this.keys=nW("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class nG extends nB{constructor(e,t){super(e,"not-in",t),this.keys=nW("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function nW(e,t){var r;return((null===(r=t.arrayValue)||void 0===r?void 0:r.values)||[]).map(e=>nt.fromName(e.referenceValue))}class nQ extends nB{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return nO(t)&&nx(t.arrayValue,this.value)}}class nX extends nB{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return null!==t&&nx(this.value.arrayValue,t)}}class nJ extends nB{constructor(e,t){super(e,"not-in",t)}matches(e){if(nx(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return null!==t&&!nx(this.value.arrayValue,t)}}class nY extends nB{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!nO(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>nx(this.value.arrayValue,e))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nZ{constructor(e,t="asc"){this.field=e,this.dir=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(e,t){this.comparator=e,this.root=t||n2.EMPTY}insert(e,t){return new n0(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,n2.BLACK,null,null))}remove(e){return new n0(this.comparator,this.root.remove(e,this.comparator).copy(null,null,n2.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let n=this.comparator(e,r.key);if(0===n)return t+r.left.size;n<0?r=r.left:(t+=r.left.size+1,r=r.right)}return -1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new n1(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new n1(this.root,e,this.comparator,!1)}getReverseIterator(){return new n1(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new n1(this.root,e,this.comparator,!0)}}class n1{constructor(e,t,r,n){this.isReverse=n,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,t&&n&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class n2{constructor(e,t,r,n,i){this.key=e,this.value=t,this.color=null!=r?r:n2.RED,this.left=null!=n?n:n2.EMPTY,this.right=null!=i?i:n2.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,n,i){return new n2(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=n?n:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let n=this,i=r(e,n.key);return(n=i<0?n.copy(null,null,null,n.left.insert(e,t,r),null):0===i?n.copy(null,t,null,null,null):n.copy(null,null,null,null,n.right.insert(e,t,r))).fixUp()}removeMin(){if(this.left.isEmpty())return n2.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()}remove(e,t){let r,n=this;if(0>t(e,n.key))n.left.isEmpty()||n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed()&&(n=n.rotateRight()),n.right.isEmpty()||n.right.isRed()||n.right.left.isRed()||(n=n.moveRedRight()),0===t(e,n.key)){if(n.right.isEmpty())return n2.EMPTY;r=n.right.min(),n=n.copy(r.key,r.value,null,null,n.right.removeMin())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n2.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n2.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw r$();let e=this.left.check();if(e!==this.right.check())throw r$();return e+(this.isRed()?0:1)}}n2.EMPTY=null,n2.RED=!0,n2.BLACK=!1,n2.EMPTY=new class{constructor(){this.size=0}get key(){throw r$()}get value(){throw r$()}get color(){throw r$()}get left(){throw r$()}get right(){throw r$()}copy(e,t,r,n,i){return this}insert(e,t,r){return new n2(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(e){this.comparator=e,this.data=new n0(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let n=r.getNext();if(this.comparator(n.key,e[1])>=0)return;t(n.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new n4(this.data.getIterator())}getIteratorFrom(e){return new n4(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof n3)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let e=t.getNext().key,n=r.getNext().key;if(0!==this.comparator(e,n))return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n3(this.comparator);return t.data=e,t}}class n4{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(e){this.fields=e,e.sort(ne.comparator)}static empty(){return new n6([])}unionWith(e){let t=new n3(ne.comparator);for(let e of this.fields)t=t.add(e);for(let r of e)t=t.add(r);return new n6(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return r4(this.fields,e.fields,(e,t)=>e.isEqual(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(e){this.value=e}static empty(){return new n5({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(!nL(t=(t.mapValue.fields||{})[e.get(r)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=nP(t)}setAll(e){let t=ne.emptyPath(),r={},n=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){let e=this.getFieldsMap(t);this.applyChanges(e,r,n),r={},n=[],t=i.popLast()}e?r[i.lastSegment()]=nP(e):n.push(i.lastSegment())});let i=this.getFieldsMap(t);this.applyChanges(i,r,n)}delete(e){let t=this.field(e.popLast());nL(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return nI(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let n=t.mapValue.fields[e.get(r)];nL(n)&&n.mapValue.fields||(n={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=n),t=n}return t.mapValue.fields}applyChanges(e,t,r){for(let n of(nh(t,(t,r)=>e[t]=r),r))delete e[n]}clone(){return new n5(nP(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n8{constructor(e,t,r,n,i,s,o){this.key=e,this.documentType=t,this.version=r,this.readTime=n,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new n8(e,0,r5.min(),r5.min(),r5.min(),n5.empty(),0)}static newFoundDocument(e,t,r,n){return new n8(e,1,t,r5.min(),r,n,0)}static newNoDocument(e,t){return new n8(e,2,t,r5.min(),r5.min(),n5.empty(),0)}static newUnknownDocument(e,t){return new n8(e,3,t,r5.min(),r5.min(),n5.empty(),2)}convertToFoundDocument(e,t){return this.createTime.isEqual(r5.min())&&(2===this.documentType||0===this.documentType)&&(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=n5.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=n5.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=r5.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof n8&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n8(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n9{constructor(e,t=null,r=[],n=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=n,this.limit=i,this.startAt=s,this.endAt=o,this._t=null}}function n7(e,t=null,r=[],n=[],i=null,s=null,o=null){return new n9(e,t,r,n,i,s,o)}function ie(e){let t=e;if(null===t._t){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:"+t.filters.map(e=>(function e(t){if(t instanceof nB)return t.field.canonicalString()+t.op.toString()+nN(t.value);if(n$(t)&&nz(t))return t.filters.map(t=>e(t)).join(",");{let r=t.filters.map(t=>e(t)).join(",");return`${t.op}(${r})`}})(e)).join(",")+"|ob:"+t.orderBy.map(e=>e.field.canonicalString()+e.dir).join(","),null==t.limit||(e+="|l:"+t.limit),t.startAt&&(e+="|lb:"+(t.startAt.inclusive?"b:":"a:")+t.startAt.position.map(e=>nN(e)).join(",")),t.endAt&&(e+="|ub:"+(t.endAt.inclusive?"a:":"b:")+t.endAt.position.map(e=>nN(e)).join(",")),t._t=e}return t._t}function it(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<e.orderBy.length;i++){var r,n;if(r=e.orderBy[i],n=t.orderBy[i],!(r.dir===n.dir&&r.field.isEqual(n.field)))return!1}if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!function e(t,r){return t instanceof nB?r instanceof nB&&t.op===r.op&&t.field.isEqual(r.field)&&nI(t.value,r.value):t instanceof nq?r instanceof nq&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((t,n,i)=>t&&e(n,r.filters[i]),!0):void r$()}(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!nF(e.startAt,t.startAt)&&nF(e.endAt,t.endAt)}function ir(e){return nt.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,t=null,r=[],n=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=n,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.wt=null,this.gt=null,this.startAt,this.endAt}}function is(e){return new ii(e)}function io(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function ia(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function il(e){for(let t of e.filters){let e=t.getFirstInequalityField();if(null!==e)return e}return null}function iu(e){return null!==e.collectionGroup}function ic(e){let t=e;if(null===t.wt){t.wt=[];let e=il(t),r=ia(t);if(null!==e&&null===r)e.isKeyField()||t.wt.push(new nZ(e)),t.wt.push(new nZ(ne.keyField(),"asc"));else{let e=!1;for(let r of t.explicitOrderBy)t.wt.push(r),r.field.isKeyField()&&(e=!0);if(!e){let e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new nZ(ne.keyField(),e))}}}return t.wt}function ih(e){let t=e;if(!t.gt){if("F"===t.limitType)t.gt=n7(t.path,t.collectionGroup,ic(t),t.filters,t.limit,t.startAt,t.endAt);else{let e=[];for(let r of ic(t)){let t="desc"===r.dir?"asc":"desc";e.push(new nZ(r.field,t))}let r=t.endAt?new nj(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new nj(t.startAt.position,t.startAt.inclusive):null;t.gt=n7(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}return t.gt}function id(e,t){t.getFirstInequalityField(),il(e);let r=e.filters.concat([t]);return new ii(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function ip(e,t,r){return new ii(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function im(e,t){return it(ih(e),ih(t))&&e.limitType===t.limitType}function ig(e){return`${ie(ih(e))}|lt:${e.limitType}`}function iy(e){var t;let r;return`Query(target=${r=(t=ih(e)).path.canonicalString(),null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(e=>(function e(t){return t instanceof nB?`${t.field.canonicalString()} ${t.op} ${nN(t.value)}`:t instanceof nq?t.op.toString()+" {"+t.getFilters().map(e).join(" ,")+"}":"Filter"})(e)).join(", ")}]`),null==t.limit||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(e=>`${e.field.canonicalString()} (${e.dir})`).join(", ")}]`),t.startAt&&(r+=", startAt: "+(t.startAt.inclusive?"b:":"a:")+t.startAt.position.map(e=>nN(e)).join(",")),t.endAt&&(r+=", endAt: "+(t.endAt.inclusive?"a:":"b:")+t.endAt.position.map(e=>nN(e)).join(",")),`Target(${r})`}; limitType=${e.limitType})`}function iv(e,t){return t.isFoundDocument()&&function(e,t){let r=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):nt.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}(e,t)&&function(e,t){for(let r of ic(e))if(!r.field.isKeyField()&&null===t.data.field(r.field))return!1;return!0}(e,t)&&function(e,t){for(let r of e.filters)if(!r.matches(t))return!1;return!0}(e,t)&&(!e.startAt||!!function(e,t,r){let n=nU(e,t,r);return e.inclusive?n<=0:n<0}(e.startAt,ic(e),t))&&(!e.endAt||!!function(e,t,r){let n=nU(e,t,r);return e.inclusive?n>=0:n>0}(e.endAt,ic(e),t))}function iw(e){return(t,r)=>{let n=!1;for(let i of ic(e)){let e=function(e,t,r){let n=e.field.isKeyField()?nt.comparator(t.key,r.key):function(e,t,r){let n=t.data.field(e),i=r.data.field(e);return null!==n&&null!==i?nC(n,i):r$()}(e.field,t,r);switch(e.dir){case"asc":return n;case"desc":return -1*n;default:return r$()}}(i,t,r);if(0!==e)return e;n=n||i.field.isKeyField()}return 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(e,t){if(e.yt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nf(t)?"-0":t}}function iE(e){return{integerValue:""+e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(){this._=void 0}}function iT(e,t){return e instanceof iA?nk(t)||t&&"doubleValue"in t?t:{integerValue:0}:null}class iI extends i_{}class ix extends i_{constructor(e){super(),this.elements=e}}function iC(e,t){let r=iO(t);for(let t of e.elements)r.some(e=>nI(e,t))||r.push(t);return{arrayValue:{values:r}}}class iS extends i_{constructor(e){super(),this.elements=e}}function iN(e,t){let r=iO(t);for(let t of e.elements)r=r.filter(e=>!nI(e,t));return{arrayValue:{values:r}}}class iA extends i_{constructor(e,t){super(),this.Tt=e,this.It=t}}function ik(e){return nv(e.integerValue||e.doubleValue)}function iO(e){return nO(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class iR{constructor(e,t){this.version=e,this.transformResults=t}}class iD{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new iD}static exists(e){return new iD(void 0,e)}static updateTime(e){return new iD(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function iL(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class iP{}function iM(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new i$(e.key,iD.none()):new iF(e.key,e.data,iD.none());{let r=e.data,n=n5.empty(),i=new n3(ne.comparator);for(let e of t.fields)if(!i.has(e)){let t=r.field(e);null===t&&e.length>1&&(e=e.popLast(),t=r.field(e)),null===t?n.delete(e):n.set(e,t),i=i.add(e)}return new iV(e.key,n,new n6(i.toArray()),iD.none())}}function ij(e,t,r,n){return e instanceof iF?function(e,t,r,n){if(!iL(e.precondition,t))return r;let i=e.value.clone(),s=iz(e.fieldTransforms,n,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,r,n):e instanceof iV?function(e,t,r,n){if(!iL(e.precondition,t))return r;let i=iz(e.fieldTransforms,n,t),s=t.data;return(s.setAll(iB(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===r)?null:r.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,r,n):iL(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):r}function iU(e,t){var r,n;return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(r=e.fieldTransforms,n=t.fieldTransforms,!!(void 0===r&&void 0===n||!(!r||!n)&&r4(r,n,(e,t)=>{var r,n;return e.field.isEqual(t.field)&&(r=e.transform,n=t.transform,r instanceof ix&&n instanceof ix||r instanceof iS&&n instanceof iS?r4(r.elements,n.elements,nI):r instanceof iA&&n instanceof iA?nI(r.It,n.It):r instanceof iI&&n instanceof iI)})))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class iF extends iP{constructor(e,t,r,n=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=n,this.type=0}getFieldMask(){return null}}class iV extends iP{constructor(e,t,r,n,i=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=n,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function iB(e){let t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){let n=e.data.field(r);t.set(r,n)}}),t}function iq(e,t,r){var n;let i=new Map;e.length===r.length||r$();for(let s=0;s<r.length;s++){let o=e[s],a=o.transform,l=t.data.field(o.field);i.set(o.field,(n=r[s],a instanceof ix?iC(a,l):a instanceof iS?iN(a,l):n))}return i}function iz(e,t,r){let n=new Map;for(let i of e){let e=i.transform,s=r.data.field(i.field);n.set(i.field,e instanceof iI?function(e,t){let r={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(r.fields.__previous_value__=t),{mapValue:r}}(t,s):e instanceof ix?iC(e,s):e instanceof iS?iN(e,s):function(e,t){let r=iT(e,t),n=ik(r)+ik(e.It);return nk(r)&&nk(e.It)?iE(n):ib(e.Tt,n)}(e,s))}return n}class i$ extends iP{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iH extends iP{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iK{constructor(e){this.count=e}}function iG(e){if(void 0===e)return rB("GRPC error has no .code"),rH.UNKNOWN;switch(e){case l.OK:return rH.OK;case l.CANCELLED:return rH.CANCELLED;case l.UNKNOWN:return rH.UNKNOWN;case l.DEADLINE_EXCEEDED:return rH.DEADLINE_EXCEEDED;case l.RESOURCE_EXHAUSTED:return rH.RESOURCE_EXHAUSTED;case l.INTERNAL:return rH.INTERNAL;case l.UNAVAILABLE:return rH.UNAVAILABLE;case l.UNAUTHENTICATED:return rH.UNAUTHENTICATED;case l.INVALID_ARGUMENT:return rH.INVALID_ARGUMENT;case l.NOT_FOUND:return rH.NOT_FOUND;case l.ALREADY_EXISTS:return rH.ALREADY_EXISTS;case l.PERMISSION_DENIED:return rH.PERMISSION_DENIED;case l.FAILED_PRECONDITION:return rH.FAILED_PRECONDITION;case l.ABORTED:return rH.ABORTED;case l.OUT_OF_RANGE:return rH.OUT_OF_RANGE;case l.UNIMPLEMENTED:return rH.UNIMPLEMENTED;case l.DATA_LOSS:return rH.DATA_LOSS;default:return r$()}}(u=l||(l={}))[u.OK=0]="OK",u[u.CANCELLED=1]="CANCELLED",u[u.UNKNOWN=2]="UNKNOWN",u[u.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",u[u.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",u[u.NOT_FOUND=5]="NOT_FOUND",u[u.ALREADY_EXISTS=6]="ALREADY_EXISTS",u[u.PERMISSION_DENIED=7]="PERMISSION_DENIED",u[u.UNAUTHENTICATED=16]="UNAUTHENTICATED",u[u.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",u[u.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",u[u.ABORTED=10]="ABORTED",u[u.OUT_OF_RANGE=11]="OUT_OF_RANGE",u[u.UNIMPLEMENTED=12]="UNIMPLEMENTED",u[u.INTERNAL=13]="INTERNAL",u[u.UNAVAILABLE=14]="UNAVAILABLE",u[u.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iW{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r){for(let[t,n]of r)if(this.equalsFn(t,e))return n}}has(e){return void 0!==this.get(e)}set(e,t){let r=this.mapKeyFn(e),n=this.inner[r];if(void 0===n)return this.inner[r]=[[e,t]],void this.innerSize++;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return void(n[r]=[e,t]);n.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return 1===r.length?delete this.inner[t]:r.splice(n,1),this.innerSize--,!0;return!1}forEach(e){nh(this.inner,(t,r)=>{for(let[t,n]of r)e(t,n)})}isEmpty(){return nd(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iQ=new n0(nt.comparator),iX=new n0(nt.comparator);function iJ(...e){let t=iX;for(let r of e)t=t.insert(r.key,r);return t}function iY(e){let t=iX;return e.forEach((e,r)=>t=t.insert(e,r.overlayedDocument)),t}function iZ(){return new iW(e=>e.toString(),(e,t)=>e.isEqual(t))}let i0=new n0(nt.comparator),i1=new n3(nt.comparator);function i2(...e){let t=i1;for(let r of e)t=t.add(r);return t}let i3=new n3(r3);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e,t,r,n,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=n,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let n=new Map;return n.set(e,i6.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new i4(r5.min(),n,i3,iQ,i2())}}class i6{constructor(e,t,r,n,i){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=n,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new i6(r,t,i2(),i2(),i2())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{constructor(e,t,r,n){this.Et=e,this.removedTargetIds=t,this.key=r,this.At=n}}class i8{constructor(e,t){this.targetId=e,this.Rt=t}}class i9{constructor(e,t,r=nm.EMPTY_BYTE_STRING,n=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=n}}class i7{constructor(){this.Pt=0,this.vt=sr(),this.bt=nm.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}get current(){return this.Vt}get resumeToken(){return this.bt}get Dt(){return 0!==this.Pt}get Ct(){return this.St}xt(e){e.approximateByteSize()>0&&(this.St=!0,this.bt=e)}Nt(){let e=i2(),t=i2(),r=i2();return this.vt.forEach((n,i)=>{switch(i){case 0:e=e.add(n);break;case 2:t=t.add(n);break;case 1:r=r.add(n);break;default:r$()}}),new i6(this.bt,this.Vt,e,t,r)}kt(){this.St=!1,this.vt=sr()}$t(e,t){this.St=!0,this.vt=this.vt.insert(e,t)}Mt(e){this.St=!0,this.vt=this.vt.remove(e)}Ot(){this.Pt+=1}Ft(){this.Pt-=1}Bt(){this.St=!0,this.Vt=!0}}class se{constructor(e){this.Lt=e,this.qt=new Map,this.Ut=iQ,this.Kt=st(),this.Gt=new n3(r3)}Qt(e){for(let t of e.Et)e.At&&e.At.isFoundDocument()?this.jt(t,e.At):this.zt(t,e.key,e.At);for(let t of e.removedTargetIds)this.zt(t,e.key,e.At)}Wt(e){this.forEachTarget(e,t=>{let r=this.Ht(t);switch(e.state){case 0:this.Jt(t)&&r.xt(e.resumeToken);break;case 1:r.Ft(),r.Dt||r.kt(),r.xt(e.resumeToken);break;case 2:r.Ft(),r.Dt||this.removeTarget(t);break;case 3:this.Jt(t)&&(r.Bt(),r.xt(e.resumeToken));break;case 4:this.Jt(t)&&(this.Yt(t),r.xt(e.resumeToken));break;default:r$()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qt.forEach((e,r)=>{this.Jt(r)&&t(r)})}Zt(e){let t=e.targetId,r=e.Rt.count,n=this.Xt(t);if(n){let e=n.target;if(ir(e)){if(0===r){let r=new nt(e.path);this.zt(t,r,n8.newNoDocument(r,r5.min()))}else 1===r||r$()}else this.te(t)!==r&&(this.Yt(t),this.Gt=this.Gt.add(t))}}ee(e){let t=new Map;this.qt.forEach((r,n)=>{let i=this.Xt(n);if(i){if(r.current&&ir(i.target)){let t=new nt(i.target.path);null!==this.Ut.get(t)||this.ne(n,t)||this.zt(n,t,n8.newNoDocument(t,e))}r.Ct&&(t.set(n,r.Nt()),r.kt())}});let r=i2();this.Kt.forEach((e,t)=>{let n=!0;t.forEachWhile(e=>{let t=this.Xt(e);return!t||2===t.purpose||(n=!1,!1)}),n&&(r=r.add(e))}),this.Ut.forEach((t,r)=>r.setReadTime(e));let n=new i4(e,t,this.Gt,this.Ut,r);return this.Ut=iQ,this.Kt=st(),this.Gt=new n3(r3),n}jt(e,t){if(!this.Jt(e))return;let r=this.ne(e,t.key)?2:0;this.Ht(e).$t(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.Kt=this.Kt.insert(t.key,this.se(t.key).add(e))}zt(e,t,r){if(!this.Jt(e))return;let n=this.Ht(e);this.ne(e,t)?n.$t(t,1):n.Mt(t),this.Kt=this.Kt.insert(t,this.se(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.qt.delete(e)}te(e){let t=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Ht(e).Ot()}Ht(e){let t=this.qt.get(e);return t||(t=new i7,this.qt.set(e,t)),t}se(e){let t=this.Kt.get(e);return t||(t=new n3(r3),this.Kt=this.Kt.insert(e,t)),t}Jt(e){let t=null!==this.Xt(e);return t||rV("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){let t=this.qt.get(e);return t&&t.Dt?null:this.Lt.ie(e)}Yt(e){this.qt.set(e,new i7),this.Lt.getRemoteKeysForTarget(e).forEach(t=>{this.zt(e,t,null)})}ne(e,t){return this.Lt.getRemoteKeysForTarget(e).has(t)}}function st(){return new n0(nt.comparator)}function sr(){return new n0(nt.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sn={asc:"ASCENDING",desc:"DESCENDING"},si={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ss={and:"AND",or:"OR"};class so{constructor(e,t){this.databaseId=e,this.yt=t}}function sa(e,t){return e.yt?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function sl(e,t){return e.yt?t.toBase64():t.toUint8Array()}function su(e){return e||r$(),r5.fromTimestamp(function(e){let t=ny(e);return new r6(t.seconds,t.nanos)}(e))}function sc(e,t){return new r9(["projects",e.projectId,"databases",e.database]).child("documents").child(t).canonicalString()}function sh(e){let t=r9.fromString(e);return sb(t)||r$(),t}function sd(e,t){return sc(e.databaseId,t.path)}function sf(e,t){let r=sh(t);if(r.get(1)!==e.databaseId.projectId)throw new rK(rH.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new rK(rH.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new nt(sg(r))}function sp(e,t){return sc(e.databaseId,t)}function sm(e){return new r9(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function sg(e){return e.length>4&&"documents"===e.get(4)||r$(),e.popFirst(5)}function sy(e,t,r){return{name:sd(e,t),fields:r.value.mapValue.fields}}function sv(e){return{fieldPath:e.canonicalString()}}function sw(e){return ne.fromServerFormat(e.fieldPath)}function sb(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(e,t,r,n){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=n}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let t=0;t<this.mutations.length;t++){let i=this.mutations[t];if(i.key.isEqual(e.key)){var n;n=r[t],i instanceof iF?function(e,t,r){let n=e.value.clone(),i=iq(e.fieldTransforms,t,r.transformResults);n.setAll(i),t.convertToFoundDocument(r.version,n).setHasCommittedMutations()}(i,e,n):i instanceof iV?function(e,t,r){if(!iL(e.precondition,t))return void t.convertToUnknownDocument(r.version);let n=iq(e.fieldTransforms,t,r.transformResults),i=t.data;i.setAll(iB(e)),i.setAll(n),t.convertToFoundDocument(r.version,i).setHasCommittedMutations()}(i,e,n):function(e,t,r){t.convertToNoDocument(r.version).setHasCommittedMutations()}(0,e,n)}}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=ij(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=ij(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=iZ();return this.mutations.forEach(n=>{let i=e.get(n.key),s=i.overlayedDocument,o=this.applyToLocalView(s,i.mutatedFields);o=t.has(n.key)?null:o;let a=iM(s,o);null!==a&&r.set(n.key,a),s.isValidDocument()||s.convertToNoDocument(r5.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),i2())}isEqual(e){return this.batchId===e.batchId&&r4(this.mutations,e.mutations,(e,t)=>iU(e,t))&&r4(this.baseMutations,e.baseMutations,(e,t)=>iU(e,t))}}class s_{constructor(e,t,r,n){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=n}static from(e,t,r){e.mutations.length===r.length||r$();let n=i0,i=e.mutations;for(let e=0;e<i.length;e++)n=n.insert(i[e].key,r[e].version);return new s_(e,t,r,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e,t,r,n,i=r5.min(),s=r5.min(),o=nm.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=n,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(e){return new sI(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new sI(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new sI(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e){this.oe=e}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(){}ae(e,t){this.he(e,t),t.le()}he(e,t){if("nullValue"in e)this.fe(t,5);else if("booleanValue"in e)this.fe(t,10),t.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(t,15),t.de(nv(e.integerValue));else if("doubleValue"in e){let r=nv(e.doubleValue);isNaN(r)?this.fe(t,13):(this.fe(t,15),nf(r)?t.de(0):t.de(r))}else if("timestampValue"in e){let r=e.timestampValue;this.fe(t,20),"string"==typeof r?t._e(r):(t._e(`${r.seconds||""}`),t.de(r.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,t),this.me(t);else if("bytesValue"in e)this.fe(t,30),t.ge(nw(e.bytesValue)),this.me(t);else if("referenceValue"in e)this.ye(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.fe(t,45),t.de(r.latitude||0),t.de(r.longitude||0)}else"mapValue"in e?nM(e)?this.fe(t,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,t),this.me(t)):"arrayValue"in e?(this.Ie(e.arrayValue,t),this.me(t)):r$()}we(e,t){this.fe(t,25),this.Te(e,t)}Te(e,t){t._e(e)}pe(e,t){let r=e.fields||{};for(let e of(this.fe(t,55),Object.keys(r)))this.we(e,t),this.he(r[e],t)}Ie(e,t){let r=e.values||[];for(let e of(this.fe(t,50),r))this.he(e,t)}ye(e,t){this.fe(t,37),nt.fromName(e).path.forEach(e=>{this.fe(t,60),this.Te(e,t)})}fe(e,t){e.de(t)}me(e){e.de(2)}}sC.Ee=new sC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(){this.Ze=new sN}addToCollectionParentIndex(e,t){return this.Ze.add(t),ns.resolve()}getCollectionParents(e,t){return ns.resolve(this.Ze.getEntries(t))}addFieldIndex(e,t){return ns.resolve()}deleteFieldIndex(e,t){return ns.resolve()}getDocumentsMatchingTarget(e,t){return ns.resolve(null)}getIndexType(e,t){return ns.resolve(0)}getFieldIndexes(e,t){return ns.resolve([])}getNextCollectionGroupToUpdate(e){return ns.resolve(null)}getMinOffset(e,t){return ns.resolve(nr.min())}getMinOffsetFromCollectionGroup(e,t){return ns.resolve(nr.min())}updateCollectionGroup(e,t,r){return ns.resolve()}updateIndexEntries(e,t){return ns.resolve()}}class sN{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),n=this.index[t]||new n3(r9.comparator),i=!n.has(r);return this.index[t]=n.add(r),i}has(e){let t=e.lastSegment(),r=e.popLast(),n=this.index[t];return n&&n.has(r)}getEntries(e){return(this.index[e]||new n3(r9.comparator)).toArray()}}new Uint8Array(0);class sA{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new sA(e,sA.DEFAULT_COLLECTION_PERCENTILE,sA.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sA.DEFAULT_COLLECTION_PERCENTILE=10,sA.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sA.DEFAULT=new sA(41943040,sA.DEFAULT_COLLECTION_PERCENTILE,sA.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sA.DISABLED=new sA(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Vn(){return new sk(0)}static Sn(){return new sk(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(){this.changes=new iW(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,n8.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return void 0!==r?ns.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e,t,r,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=n}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(n=>(r=n,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==r&&ij(r.mutation,e,n6.empty(),r6.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,i2()).next(()=>t))}getLocalViewOfDocuments(e,t,r=i2()){let n=iZ();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,r).next(e=>{let t=iJ();return e.forEach((e,r)=>{t=t.insert(e,r.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){let r=iZ();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i2()))}populateOverlays(e,t,r){let n=[];return r.forEach(e=>{t.has(e)||n.push(e)}),this.documentOverlayCache.getOverlays(e,n).next(e=>{e.forEach((e,r)=>{t.set(e,r)})})}computeViews(e,t,r,n){let i=iQ,s=iZ(),o=iZ();return t.forEach((e,t)=>{let o=r.get(t.key);n.has(t.key)&&(void 0===o||o.mutation instanceof iV)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),ij(o.mutation,t,o.mutation.getFieldMask(),r6.now())):s.set(t.key,n6.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var r;return o.set(e,new sR(t,null!==(r=s.get(e))&&void 0!==r?r:null))}),o))}recalculateAndSaveOverlays(e,t){let r=iZ(),n=new n0((e,t)=>e-t),i=i2();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(let i of e)i.keys().forEach(e=>{let s=t.get(e);if(null===s)return;let o=r.get(e)||n6.empty();o=i.applyToLocalView(s,o),r.set(e,o);let a=(n.get(i.batchId)||i2()).add(e);n=n.insert(i.batchId,a)})}).next(()=>{let s=[],o=n.getReverseIterator();for(;o.hasNext();){let n=o.getNext(),a=n.key,l=n.value,u=iZ();l.forEach(e=>{if(!i.has(e)){let n=iM(t.get(e),r.get(e));null!==n&&u.set(e,n),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,u))}return ns.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,r){return nt.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):iu(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r)}getNextDocuments(e,t,r,n){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,n).next(i=>{let s=n-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,n-i.size):ns.resolve(iZ()),o=-1,a=i;return s.next(t=>ns.forEach(t,(t,r)=>(o<r.largestBatchId&&(o=r.largestBatchId),i.get(t)?ns.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,i2())).next(e=>({batchId:o,changes:iY(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new nt(t)).next(e=>{let t=iJ();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,r){let n=t.collectionGroup,i=iJ();return this.indexManager.getCollectionParents(e,n).next(s=>ns.forEach(s,s=>{var o;let a=(o=s.child(n),new ii(o,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt));return this.getDocumentsMatchingCollectionQuery(e,a,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,r){let n;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(i=>(n=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,n))).next(e=>{n.forEach((t,r)=>{let n=r.getKey();null===e.get(n)&&(e=e.insert(n,n8.newInvalidDocument(n)))});let r=iJ();return e.forEach((e,i)=>{let s=n.get(e);void 0!==s&&ij(s.mutation,i,n6.empty(),r6.now()),iv(t,i)&&(r=r.insert(e,i))}),r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(e){this.Tt=e,this.es=new Map,this.ns=new Map}getBundleMetadata(e,t){return ns.resolve(this.es.get(t))}saveBundleMetadata(e,t){return this.es.set(t.id,{id:t.id,version:t.version,createTime:su(t.createTime)}),ns.resolve()}getNamedQuery(e,t){return ns.resolve(this.ns.get(t))}saveNamedQuery(e,t){return this.ns.set(t.name,{name:t.name,query:function(e){let t=function(e){var t,r,n,i,s,o,a,l;let u,c=function(e){let t=sh(e);return 4===t.length?r9.emptyPath():sg(t)}(e.parent),h=e.structuredQuery,d=h.from?h.from.length:0,f=null;if(d>0){1===d||r$();let e=h.from[0];e.allDescendants?f=e.collectionId:c=c.child(e.collectionId)}let p=[];h.where&&(p=function(e){var t;let r=function e(t){return void 0!==t.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":let t=sw(e.unaryFilter.field);return nB.create(t,"==",{doubleValue:NaN});case"IS_NULL":let r=sw(e.unaryFilter.field);return nB.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let n=sw(e.unaryFilter.field);return nB.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let i=sw(e.unaryFilter.field);return nB.create(i,"!=",{nullValue:"NULL_VALUE"});default:return r$()}}(t):void 0!==t.fieldFilter?nB.create(sw(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return r$()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==t.compositeFilter?nq.create(t.compositeFilter.filters.map(t=>e(t)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return r$()}}(t.compositeFilter.op)):r$()}(e);return r instanceof nq&&n$(t=r)&&nz(t)?r.getFilters():[r]}(h.where));let m=[];h.orderBy&&(m=h.orderBy.map(e=>new nZ(sw(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))));let g=null;h.limit&&(g=null==(u="object"==typeof(t=h.limit)?t.value:t)?null:u);let y=null;h.startAt&&(y=function(e){let t=!!e.before,r=e.values||[];return new nj(r,t)}(h.startAt));let v=null;return h.endAt&&(v=function(e){let t=!e.before,r=e.values||[];return new nj(r,t)}(h.endAt)),r=c,n=f,i=m,s=p,o=g,a=y,l=v,new ii(r,n,i,s,o,"F",a,l)}({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ip(t,t.limit,"L"):t}(t.bundledQuery),readTime:su(t.readTime)}),ns.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(){this.overlays=new n0(nt.comparator),this.ss=new Map}getOverlay(e,t){return ns.resolve(this.overlays.get(t))}getOverlays(e,t){let r=iZ();return ns.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&r.set(t,e)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((r,n)=>{this.ce(e,t,n)}),ns.resolve()}removeOverlaysForBatchId(e,t,r){let n=this.ss.get(r);return void 0!==n&&(n.forEach(e=>this.overlays=this.overlays.remove(e)),this.ss.delete(r)),ns.resolve()}getOverlaysForCollection(e,t,r){let n=iZ(),i=t.length+1,s=new nt(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){let e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>r&&n.set(e.getKey(),e)}return ns.resolve(n)}getOverlaysForCollectionGroup(e,t,r,n){let i=new n0((e,t)=>e-t),s=this.overlays.getIterator();for(;s.hasNext();){let e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>r){let t=i.get(e.largestBatchId);null===t&&(t=iZ(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}let o=iZ(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=n)););return ns.resolve(o)}ce(e,t,r){let n=this.overlays.get(r.key);if(null!==n){let e=this.ss.get(n.largestBatchId).delete(r.key);this.ss.set(n.largestBatchId,e)}this.overlays=this.overlays.insert(r.key,new sT(t,r));let i=this.ss.get(t);void 0===i&&(i=i2(),this.ss.set(t,i)),this.ss.set(t,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(){this.rs=new n3(sj.os),this.us=new n3(sj.cs)}isEmpty(){return this.rs.isEmpty()}addReference(e,t){let r=new sj(e,t);this.rs=this.rs.add(r),this.us=this.us.add(r)}hs(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.ls(new sj(e,t))}fs(e,t){e.forEach(e=>this.removeReference(e,t))}ds(e){let t=new nt(new r9([])),r=new sj(t,e),n=new sj(t,e+1),i=[];return this.us.forEachInRange([r,n],e=>{this.ls(e),i.push(e.key)}),i}_s(){this.rs.forEach(e=>this.ls(e))}ls(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}ws(e){let t=new nt(new r9([])),r=new sj(t,e),n=new sj(t,e+1),i=i2();return this.us.forEachInRange([r,n],e=>{i=i.add(e.key)}),i}containsKey(e){let t=new sj(e,0),r=this.rs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class sj{constructor(e,t){this.key=e,this.gs=t}static os(e,t){return nt.comparator(e.key,t.key)||r3(e.gs,t.gs)}static cs(e,t){return r3(e.gs,t.gs)||nt.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ys=1,this.ps=new n3(sj.os)}checkEmpty(e){return ns.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,n){let i=this.ys;this.ys++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new sE(i,t,r,n);for(let t of(this.mutationQueue.push(s),n))this.ps=this.ps.add(new sj(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return ns.resolve(s)}lookupMutationBatch(e,t){return ns.resolve(this.Is(t))}getNextMutationBatchAfterBatchId(e,t){let r=this.Ts(t+1),n=r<0?0:r;return ns.resolve(this.mutationQueue.length>n?this.mutationQueue[n]:null)}getHighestUnacknowledgedBatchId(){return ns.resolve(0===this.mutationQueue.length?-1:this.ys-1)}getAllMutationBatches(e){return ns.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new sj(t,0),n=new sj(t,Number.POSITIVE_INFINITY),i=[];return this.ps.forEachInRange([r,n],e=>{let t=this.Is(e.gs);i.push(t)}),ns.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new n3(r3);return t.forEach(e=>{let t=new sj(e,0),n=new sj(e,Number.POSITIVE_INFINITY);this.ps.forEachInRange([t,n],e=>{r=r.add(e.gs)})}),ns.resolve(this.Es(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,n=r.length+1,i=r;nt.isDocumentKey(i)||(i=i.child(""));let s=new sj(new nt(i),0),o=new n3(r3);return this.ps.forEachWhile(e=>{let t=e.key.path;return!!r.isPrefixOf(t)&&(t.length===n&&(o=o.add(e.gs)),!0)},s),ns.resolve(this.Es(o))}Es(e){let t=[];return e.forEach(e=>{let r=this.Is(e);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){0===this.As(t.batchId,"removed")||r$(),this.mutationQueue.shift();let r=this.ps;return ns.forEach(t.mutations,n=>{let i=new sj(n.key,t.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,n.key)}).next(()=>{this.ps=r})}Pn(e){}containsKey(e,t){let r=new sj(t,0),n=this.ps.firstAfterOrEqual(r);return ns.resolve(t.isEqual(n&&n.key))}performConsistencyCheck(e){return this.mutationQueue.length,ns.resolve()}As(e,t){return this.Ts(e)}Ts(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Is(e){let t=this.Ts(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sF{constructor(e){this.Rs=e,this.docs=new n0(nt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,n=this.docs.get(r),i=n?n.size:0,s=this.Rs(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return ns.resolve(r?r.document.mutableCopy():n8.newInvalidDocument(t))}getEntries(e,t){let r=iQ;return t.forEach(e=>{let t=this.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():n8.newInvalidDocument(e))}),ns.resolve(r)}getDocumentsMatchingQuery(e,t,r,n){let i=iQ,s=t.path,o=new nt(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){let{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||0>=function(e,t){let r=e.readTime.compareTo(t.readTime);return 0!==r?r:0!==(r=nt.comparator(e.documentKey,t.documentKey))?r:r3(e.largestBatchId,t.largestBatchId)}(new nr(o.readTime,o.key,-1),r)||(n.has(o.key)||iv(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return ns.resolve(i)}getAllFromCollectionGroup(e,t,r,n){r$()}Ps(e,t){return ns.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new sV(this)}getSize(e){return ns.resolve(this.size)}}class sV extends sO{constructor(e){super(),this.Xn=e}applyChanges(e){let t=[];return this.changes.forEach((r,n)=>{n.isValidDocument()?t.push(this.Xn.addEntry(e,n)):this.Xn.removeEntry(r)}),ns.waitFor(t)}getFromCache(e,t){return this.Xn.getEntry(e,t)}getAllFromCache(e,t){return this.Xn.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sB{constructor(e){this.persistence=e,this.vs=new iW(e=>ie(e),it),this.lastRemoteSnapshotVersion=r5.min(),this.highestTargetId=0,this.bs=0,this.Vs=new sM,this.targetCount=0,this.Ss=sk.Vn()}forEachTarget(e,t){return this.vs.forEach((e,r)=>t(r)),ns.resolve()}getLastRemoteSnapshotVersion(e){return ns.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ns.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.Ss.next(),ns.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),ns.resolve()}xn(e){this.vs.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.Ss=new sk(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.xn(t),this.targetCount+=1,ns.resolve()}updateTargetData(e,t){return this.xn(t),ns.resolve()}removeTargetData(e,t){return this.vs.delete(t.target),this.Vs.ds(t.targetId),this.targetCount-=1,ns.resolve()}removeTargets(e,t,r){let n=0,i=[];return this.vs.forEach((s,o)=>{o.sequenceNumber<=t&&null===r.get(o.targetId)&&(this.vs.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),n++)}),ns.waitFor(i).next(()=>n)}getTargetCount(e){return ns.resolve(this.targetCount)}getTargetData(e,t){let r=this.vs.get(t)||null;return ns.resolve(r)}addMatchingKeys(e,t,r){return this.Vs.hs(t,r),ns.resolve()}removeMatchingKeys(e,t,r){this.Vs.fs(t,r);let n=this.persistence.referenceDelegate,i=[];return n&&t.forEach(t=>{i.push(n.markPotentiallyOrphaned(e,t))}),ns.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Vs.ds(t),ns.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Vs.ws(t);return ns.resolve(r)}containsKey(e,t){return ns.resolve(this.Vs.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sq{constructor(e,t){var r;this.Ds={},this.overlays={},this.Cs=new na(0),this.xs=!1,this.xs=!0,this.referenceDelegate=e(this),this.Ns=new sB(this),this.indexManager=new sS,this.remoteDocumentCache=(r=e=>this.referenceDelegate.ks(e),new sF(r)),this.Tt=new sx(t),this.$s=new sL(this.Tt)}start(){return Promise.resolve()}shutdown(){return this.xs=!1,Promise.resolve()}get started(){return this.xs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new sP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ds[e.toKey()];return r||(r=new sU(t,this.referenceDelegate),this.Ds[e.toKey()]=r),r}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$s}runTransaction(e,t,r){rV("MemoryPersistence","Starting transaction:",e);let n=new sz(this.Cs.next());return this.referenceDelegate.Ms(),r(n).next(e=>this.referenceDelegate.Os(n).next(()=>e)).toPromise().then(e=>(n.raiseOnCommittedEvent(),e))}Fs(e,t){return ns.or(Object.values(this.Ds).map(r=>()=>r.containsKey(e,t)))}}class sz extends nn{constructor(e){super(),this.currentSequenceNumber=e}}class s${constructor(e){this.persistence=e,this.Bs=new sM,this.Ls=null}static qs(e){return new s$(e)}get Us(){if(this.Ls)return this.Ls;throw r$()}addReference(e,t,r){return this.Bs.addReference(r,t),this.Us.delete(r.toString()),ns.resolve()}removeReference(e,t,r){return this.Bs.removeReference(r,t),this.Us.add(r.toString()),ns.resolve()}markPotentiallyOrphaned(e,t){return this.Us.add(t.toString()),ns.resolve()}removeTarget(e,t){this.Bs.ds(t.targetId).forEach(e=>this.Us.add(e.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Us.add(e.toString()))}).next(()=>r.removeTargetData(e,t))}Ms(){this.Ls=new Set}Os(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ns.forEach(this.Us,r=>{let n=nt.fromPath(r);return this.Ks(e,n).next(e=>{e||t.removeEntry(n,r5.min())})}).next(()=>(this.Ls=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ks(e,t).next(e=>{e?this.Us.delete(t.toString()):this.Us.add(t.toString())})}ks(e){return 0}Ks(e,t){return ns.or([()=>ns.resolve(this.Bs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Fs(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sH{constructor(e,t,r,n){this.targetId=e,this.fromCache=t,this.Ci=r,this.xi=n}static Ni(e,t){let r=i2(),n=i2();for(let e of t.docChanges)switch(e.type){case 0:r=r.add(e.doc.key);break;case 1:n=n.add(e.doc.key)}return new sH(e,t.fromCache,r,n)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sK{constructor(){this.ki=!1}initialize(e,t){this.$i=e,this.indexManager=t,this.ki=!0}getDocumentsMatchingQuery(e,t,r,n){return this.Mi(e,t).next(i=>i||this.Oi(e,t,n,r)).next(r=>r||this.Fi(e,t))}Mi(e,t){if(io(t))return ns.resolve(null);let r=ih(t);return this.indexManager.getIndexType(e,r).next(n=>0===n?null:(null!==t.limit&&1===n&&(r=ih(t=ip(t,null,"F"))),this.indexManager.getDocumentsMatchingTarget(e,r).next(n=>{let i=i2(...n);return this.$i.getDocuments(e,i).next(n=>this.indexManager.getMinOffset(e,r).next(r=>{let s=this.Bi(t,n);return this.Li(t,s,i,r.readTime)?this.Mi(e,ip(t,null,"F")):this.qi(e,s,t,r)}))})))}Oi(e,t,r,n){return io(t)||n.isEqual(r5.min())?this.Fi(e,t):this.$i.getDocuments(e,r).next(i=>{let s=this.Bi(t,i);return this.Li(t,s,r,n)?this.Fi(e,t):(rF()<=f.in.DEBUG&&rV("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),iy(t)),this.qi(e,s,t,function(e,t){let r=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1,i=r5.fromTimestamp(1e9===n?new r6(r+1,0):new r6(r,n));return new nr(i,nt.empty(),-1)}(n,0)))})}Bi(e,t){let r=new n3(iw(e));return t.forEach((t,n)=>{iv(e,n)&&(r=r.add(n))}),r}Li(e,t,r,n){if(null===e.limit)return!1;if(r.size!==t.size)return!0;let i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(n)>0)}Fi(e,t){return rF()<=f.in.DEBUG&&rV("QueryEngine","Using full collection scan to execute query:",iy(t)),this.$i.getDocumentsMatchingQuery(e,t,nr.min())}qi(e,t,r,n){return this.$i.getDocumentsMatchingQuery(e,r,n).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sG{constructor(e,t,r,n){this.persistence=e,this.Ui=t,this.Tt=n,this.Ki=new n0(r3),this.Gi=new iW(e=>ie(e),it),this.Qi=new Map,this.ji=e.getRemoteDocumentCache(),this.Ns=e.getTargetCache(),this.$s=e.getBundleCache(),this.zi(r)}zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sD(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ki))}}async function sW(e,t){return await e.persistence.runTransaction("Handle user change","readonly",r=>{let n;return e.mutationQueue.getAllMutationBatches(r).next(i=>(n=i,e.zi(t),e.mutationQueue.getAllMutationBatches(r))).next(t=>{let i=[],s=[],o=i2();for(let e of n)for(let t of(i.push(e.batchId),e.mutations))o=o.add(t.key);for(let e of t)for(let t of(s.push(e.batchId),e.mutations))o=o.add(t.key);return e.localDocuments.getDocuments(r,o).next(e=>({Wi:e,removedBatchIds:i,addedBatchIds:s}))})})}function sQ(e){return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ns.getLastRemoteSnapshotVersion(t))}async function sX(e,t,r){let n=e,i=n.Ki.get(t);try{r||await n.persistence.runTransaction("Release target",r?"readwrite":"readwrite-primary",e=>n.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!no(e))throw e;rV("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}n.Ki=n.Ki.remove(t),n.Gi.delete(i.target)}function sJ(e,t,r){let n=r5.min(),i=i2();return e.persistence.runTransaction("Execute query","readonly",s=>(function(e,t,r){let n=e.Gi.get(r);return void 0!==n?ns.resolve(e.Ki.get(n)):e.Ns.getTargetData(t,r)})(e,s,ih(t)).next(t=>{if(t)return n=t.lastLimboFreeSnapshotVersion,e.Ns.getMatchingKeysForTargetId(s,t.targetId).next(e=>{i=e})}).next(()=>e.Ui.getDocumentsMatchingQuery(s,t,r?n:r5.min(),r?i:i2())).next(r=>{var n;let s;return n=t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2)),s=e.Qi.get(n)||r5.min(),r.forEach((e,t)=>{t.readTime.compareTo(s)>0&&(s=t.readTime)}),e.Qi.set(n,s),{documents:r,Yi:i}}))}class sY{constructor(){this.activeTargetIds=i3}sr(e){this.activeTargetIds=this.activeTargetIds.add(e)}ir(e){this.activeTargetIds=this.activeTargetIds.delete(e)}nr(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sZ{constructor(){this.Ur=new sY,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}updateQueryState(e,t,r){this.Kr[e]=t}removeLocalQueryTarget(e){this.Ur.ir(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.Kr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new sY,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{Gr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(){this.Qr=()=>this.jr(),this.zr=()=>this.Wr(),this.Hr=[],this.Jr()}Gr(e){this.Hr.push(e)}shutdown(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}Jr(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}jr(){for(let e of(rV("ConnectivityMonitor","Network connectivity changed: AVAILABLE"),this.Hr))e(0)}Wr(){for(let e of(rV("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE"),this.Hr))e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let s2=null;function s3(){return null===s2?s2=268435456+Math.round(2147483648*Math.random()):s2++,"0x"+s2.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let s4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(e){this.Yr=e.Yr,this.Zr=e.Zr}Xr(e){this.eo=e}no(e){this.so=e}onMessage(e){this.io=e}close(){this.Zr()}send(e){this.Yr(e)}ro(){this.eo()}oo(e){this.so(e)}uo(e){this.io(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let s5="WebChannelConnection";class s8 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http";this.co=t+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get ho(){return!1}lo(e,t,r,n,i){let s=s3(),o=this.fo(e,t);rV("RestConnection",`Sending RPC '${e}' ${s}:`,o,r);let a={};return this._o(a,n,i),this.wo(e,o,a,r).then(t=>(rV("RestConnection",`Received RPC '${e}' ${s}: `,t),t),t=>{throw rq("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",r),t})}mo(e,t,r,n,i,s){return this.lo(e,t,r,n,i)}_o(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+rj,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,r)=>e[r]=t),r&&r.headers.forEach((t,r)=>e[r]=t)}fo(e,t){let r=s4[e];return`${this.co}/v1/${t}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}wo(e,t,r,n){let i=s3();return new Promise((s,o)=>{let a=new rL;a.setWithCredentials(!0),a.listenOnce(rA.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case rN.NO_ERROR:let t=a.getResponseJson();rV(s5,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case rN.TIMEOUT:rV(s5,`RPC '${e}' ${i} timed out`),o(new rK(rH.DEADLINE_EXCEEDED,"Request time out"));break;case rN.HTTP_ERROR:let r=a.getStatus();if(rV(s5,`RPC '${e}' ${i} failed with status:`,r,"response text:",a.getResponseText()),r>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);let t=null==e?void 0:e.error;if(t&&t.status&&t.message){let e=function(e){let t=e.toLowerCase().replace(/_/g,"-");return Object.values(rH).indexOf(t)>=0?t:rH.UNKNOWN}(t.status);o(new rK(e,t.message))}else o(new rK(rH.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new rK(rH.UNAVAILABLE,"Connection failed."));break;default:r$()}}finally{rV(s5,`RPC '${e}' ${i} completed.`)}});let l=JSON.stringify(n);rV(s5,`RPC '${e}' ${i} sending request:`,n),a.send(t,"POST",l,r,15)})}yo(e,t,r){let n=s3(),i=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=rC(),o=rS(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new rR({})),this._o(a.initMessageHeaders,t,r),a.encodeInitMessageHeaders=!0;let u=i.join("");rV(s5,`Creating RPC '${e}' stream ${n}: ${u}`,a);let c=s.createWebChannel(u,a),h=!1,d=!1,f=new s6({Yr:t=>{d?rV(s5,`Not sending because RPC '${e}' stream ${n} is closed:`,t):(h||(rV(s5,`Opening RPC '${e}' stream ${n} transport.`),c.open(),h=!0),rV(s5,`RPC '${e}' stream ${n} sending:`,t),c.send(t))},Zr:()=>c.close()}),p=(e,t,r)=>{e.listen(t,e=>{try{r(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(c,rD.EventType.OPEN,()=>{d||rV(s5,`RPC '${e}' stream ${n} transport opened.`)}),p(c,rD.EventType.CLOSE,()=>{d||(d=!0,rV(s5,`RPC '${e}' stream ${n} transport closed`),f.oo())}),p(c,rD.EventType.ERROR,t=>{d||(d=!0,rq(s5,`RPC '${e}' stream ${n} transport errored:`,t),f.oo(new rK(rH.UNAVAILABLE,"The operation could not be completed")))}),p(c,rD.EventType.MESSAGE,t=>{var r;if(!d){let i=t.data[0];i||r$();let s=i.error||(null===(r=i[0])||void 0===r?void 0:r.error);if(s){rV(s5,`RPC '${e}' stream ${n} received error:`,s);let t=s.status,r=function(e){let t=l[e];if(void 0!==t)return iG(t)}(t),i=s.message;void 0===r&&(r=rH.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),d=!0,f.oo(new rK(r,i)),c.close()}else rV(s5,`RPC '${e}' stream ${n} received:`,i),f.uo(i)}}),p(o,rk.STAT_EVENT,t=>{t.stat===rO.PROXY?rV(s5,`RPC '${e}' stream ${n} detected buffering proxy`):t.stat===rO.NOPROXY&&rV(s5,`RPC '${e}' stream ${n} detected no buffering proxy`)}),setTimeout(()=>{f.ro()},0),f}}function s9(){return"undefined"!=typeof document?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s7(e){return new so(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e,t,r=1e3,n=1.5,i=6e4){this.Ys=e,this.timerId=t,this.po=r,this.Io=n,this.To=i,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}Po(){this.Eo=this.To}vo(e){this.cancel();let t=Math.floor(this.Eo+this.bo()),r=Math.max(0,Date.now()-this.Ro),n=Math.max(0,t-r);n>0&&rV("ExponentialBackoff",`Backing off for ${n} ms (base delay: ${this.Eo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,n,()=>(this.Ro=Date.now(),e())),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){null!==this.Ao&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){null!==this.Ao&&(this.Ao.cancel(),this.Ao=null)}bo(){return(Math.random()-.5)*this.Eo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,t,r,n,i,s,o,a){this.Ys=e,this.So=r,this.Do=n,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new oe(e,t)}$o(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}async stop(){this.$o()&&await this.close(0)}Fo(){this.state=0,this.ko.reset()}Bo(){this.Mo()&&null===this.xo&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,()=>this.Lo()))}qo(e){this.Uo(),this.stream.send(e)}async Lo(){if(this.Mo())return this.close(0)}Uo(){this.xo&&(this.xo.cancel(),this.xo=null)}Ko(){this.No&&(this.No.cancel(),this.No=null)}async close(e,t){this.Uo(),this.Ko(),this.ko.cancel(),this.Co++,4!==e?this.ko.reset():t&&t.code===rH.RESOURCE_EXHAUSTED?(rB(t.toString()),rB("Using maximum backoff delay to prevent overloading the backend."),this.ko.Po()):t&&t.code===rH.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Go(),this.stream.close(),this.stream=null),this.state=e,await this.listener.no(t)}Go(){}auth(){this.state=1;let e=this.Qo(this.Co),t=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,r])=>{this.Co===t&&this.jo(e,r)},t=>{e(()=>{let e=new rK(rH.UNKNOWN,"Fetching auth token failed: "+t.message);return this.zo(e)})})}jo(e,t){let r=this.Qo(this.Co);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.No=this.Ys.enqueueAfterDelay(this.Do,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.no(e=>{r(()=>this.zo(e))}),this.stream.onMessage(e=>{r(()=>this.onMessage(e))})}Oo(){this.state=5,this.ko.vo(async()=>{this.state=0,this.start()})}zo(e){return rV("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Qo(e){return t=>{this.Ys.enqueueAndForget(()=>this.Co===e?t():(rV("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class or extends ot{constructor(e,t,r,n,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,n,s),this.Tt=i}Wo(e,t){return this.connection.yo("Listen",e,t)}onMessage(e){this.ko.reset();let t=function(e,t){let r;if("targetChange"in t){var n,i;t.targetChange;let s="NO_CHANGE"===(n=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===n?1:"REMOVE"===n?2:"CURRENT"===n?3:"RESET"===n?4:r$(),o=t.targetChange.targetIds||[],a=(i=t.targetChange.resumeToken,e.yt?(void 0===i||"string"==typeof i||r$(),nm.fromBase64String(i||"")):(void 0===i||i instanceof Uint8Array||r$(),nm.fromUint8Array(i||new Uint8Array))),l=t.targetChange.cause,u=l&&function(e){let t=void 0===e.code?rH.UNKNOWN:iG(e.code);return new rK(t,e.message||"")}(l);r=new i9(s,o,a,u||null)}else if("documentChange"in t){t.documentChange;let n=t.documentChange;n.document,n.document.name,n.document.updateTime;let i=sf(e,n.document.name),s=su(n.document.updateTime),o=n.document.createTime?su(n.document.createTime):r5.min(),a=new n5({mapValue:{fields:n.document.fields}}),l=n8.newFoundDocument(i,s,o,a),u=n.targetIds||[],c=n.removedTargetIds||[];r=new i5(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;let n=t.documentDelete;n.document;let i=sf(e,n.document),s=n.readTime?su(n.readTime):r5.min(),o=n8.newNoDocument(i,s),a=n.removedTargetIds||[];r=new i5([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;let n=t.documentRemove;n.document;let i=sf(e,n.document),s=n.removedTargetIds||[];r=new i5([],s,i,null)}else{if(!("filter"in t))return r$();{t.filter;let e=t.filter;e.targetId;let n=e.count||0,i=new iK(n),s=e.targetId;r=new i8(s,i)}}return r}(this.Tt,e),r=function(e){if(!("targetChange"in e))return r5.min();let t=e.targetChange;return t.targetIds&&t.targetIds.length?r5.min():t.readTime?su(t.readTime):r5.min()}(e);return this.listener.Ho(t,r)}Jo(e){let t={};t.database=sm(this.Tt),t.addTarget=function(e,t){let r;let n=t.target;return(r=ir(n)?{documents:{documents:[sp(e,n.path)]}}:{query:function(e,t){var r,n,i;let s={structuredQuery:{}},o=t.path;null!==t.collectionGroup?(s.parent=sp(e,o),s.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s.parent=sp(e,o.popLast()),s.structuredQuery.from=[{collectionId:o.lastSegment()}]);let a=function(e){if(0!==e.length)return function e(t){return t instanceof nB?function(e){if("=="===e.op){if(nD(e.value))return{unaryFilter:{field:sv(e.field),op:"IS_NAN"}};if(nR(e.value))return{unaryFilter:{field:sv(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(nD(e.value))return{unaryFilter:{field:sv(e.field),op:"IS_NOT_NAN"}};if(nR(e.value))return{unaryFilter:{field:sv(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sv(e.field),op:si[e.op],value:e.value}}}(t):t instanceof nq?function(t){let r=t.getFilters().map(t=>e(t));return 1===r.length?r[0]:{compositeFilter:{op:ss[t.op],filters:r}}}(t):r$()}(nq.create(e,"and"))}(t.filters);a&&(s.structuredQuery.where=a);let l=function(e){if(0!==e.length)return e.map(e=>({field:sv(e.field),direction:sn[e.dir]}))}(t.orderBy);l&&(s.structuredQuery.orderBy=l);let u=(n=t.limit,e.yt||null==n?n:{value:n});return null!==u&&(s.structuredQuery.limit=u),t.startAt&&(s.structuredQuery.startAt={before:(r=t.startAt).inclusive,values:r.position}),t.endAt&&(s.structuredQuery.endAt={before:!(i=t.endAt).inclusive,values:i.position}),s}(e,n)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?r.resumeToken=sl(e,t.resumeToken):t.snapshotVersion.compareTo(r5.min())>0&&(r.readTime=sa(e,t.snapshotVersion.toTimestamp())),r}(this.Tt,e);let r=function(e,t){let r=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return r$()}}(0,t.purpose);return null==r?null:{"goog-listen-tags":r}}(this.Tt,e);r&&(t.labels=r),this.qo(t)}Yo(e){let t={};t.database=sm(this.Tt),t.removeTarget=e,this.qo(t)}}class on extends ot{constructor(e,t,r,n,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,n,s),this.Tt=i,this.Zo=!1}get Xo(){return this.Zo}start(){this.Zo=!1,this.lastStreamToken=void 0,super.start()}Go(){this.Zo&&this.tu([])}Wo(e,t){return this.connection.yo("Write",e,t)}onMessage(e){var t,r;if(e.streamToken||r$(),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();let n=(t=e.writeResults,r=e.commitTime,t&&t.length>0?(void 0!==r||r$(),t.map(e=>{let t;return(t=e.updateTime?su(e.updateTime):su(r)).isEqual(r5.min())&&(t=su(r)),new iR(t,e.transformResults||[])})):[]),i=su(e.commitTime);return this.listener.eu(i,n)}return e.writeResults&&0!==e.writeResults.length&&r$(),this.Zo=!0,this.listener.nu()}su(){let e={};e.database=sm(this.Tt),this.qo(e)}tu(e){let t={streamToken:this.lastStreamToken,writes:e.map(e=>(function(e,t){var r;let n;if(t instanceof iF)n={update:sy(e,t.key,t.value)};else if(t instanceof i$)n={delete:sd(e,t.key)};else if(t instanceof iV)n={update:sy(e,t.key,t.data),updateMask:function(e){let t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}(t.fieldMask)};else{if(!(t instanceof iH))return r$();n={verify:sd(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>(function(e,t){let r=t.transform;if(r instanceof iI)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(r instanceof ix)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:r.elements}};if(r instanceof iS)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:r.elements}};if(r instanceof iA)return{fieldPath:t.field.canonicalString(),increment:r.It};throw r$()})(0,e))),t.precondition.isNone||(n.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:sa(e,r.updateTime.toTimestamp())}:void 0!==r.exists?{exists:r.exists}:r$()),n})(this.Tt,e))};this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi extends class{}{constructor(e,t,r,n){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.Tt=n,this.iu=!1}ru(){if(this.iu)throw new rK(rH.FAILED_PRECONDITION,"The client has already been terminated.")}lo(e,t,r){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([n,i])=>this.connection.lo(e,t,r,n,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===rH.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new rK(rH.UNKNOWN,e.toString())})}mo(e,t,r,n){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.mo(e,t,r,i,s,n)).catch(e=>{throw"FirebaseError"===e.name?(e.code===rH.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new rK(rH.UNKNOWN,e.toString())})}terminate(){this.iu=!0}}class os{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}au(){0===this.ou&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.uu=null,this.lu("Backend didn't respond within 10 seconds."),this.hu("Offline"),Promise.resolve())))}fu(e){"Online"===this.state?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.hu("Offline")))}set(e){this.du(),this.ou=0,"Online"===e&&(this.cu=!1),this.hu(e)}hu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}lu(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.cu?(rB(t),this.cu=!1):rV("OnlineStateTracker",t)}du(){null!==this.uu&&(this.uu.cancel(),this.uu=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,t,r,n,i){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=i,this.yu.Gr(e=>{r.enqueueAndForget(async()=>{om(this)&&(rV("RemoteStore","Restarting streams for network reachability change."),await async function(e){e.mu.add(4),await ol(e),e.pu.set("Unknown"),e.mu.delete(4),await oa(e)}(this))})}),this.pu=new os(r,n)}}async function oa(e){if(om(e))for(let t of e.gu)await t(!0)}async function ol(e){for(let t of e.gu)await t(!1)}function ou(e,t){e.wu.has(t.targetId)||(e.wu.set(t.targetId,t),op(e)?of(e):ok(e).Mo()&&oh(e,t))}function oc(e,t){let r=ok(e);e.wu.delete(t),r.Mo()&&od(e,t),0===e.wu.size&&(r.Mo()?r.Bo():om(e)&&e.pu.set("Unknown"))}function oh(e,t){e.Iu.Ot(t.targetId),ok(e).Jo(t)}function od(e,t){e.Iu.Ot(t),ok(e).Yo(t)}function of(e){e.Iu=new se({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ie:t=>e.wu.get(t)||null}),ok(e).start(),e.pu.au()}function op(e){return om(e)&&!ok(e).$o()&&e.wu.size>0}function om(e){return 0===e.mu.size}async function og(e){e.wu.forEach((t,r)=>{oh(e,t)})}async function oy(e,t){e.Iu=void 0,op(e)?(e.pu.fu(t),of(e)):e.pu.set("Unknown")}async function ov(e,t,r){if(e.pu.set("Online"),t instanceof i9&&2===t.state&&t.cause)try{await async function(e,t){let r=t.cause;for(let n of t.targetIds)e.wu.has(n)&&(await e.remoteSyncer.rejectListen(n,r),e.wu.delete(n),e.Iu.removeTarget(n))}(e,t)}catch(r){rV("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await ow(e,r)}else if(t instanceof i5?e.Iu.Qt(t):t instanceof i8?e.Iu.Zt(t):e.Iu.Wt(t),!r.isEqual(r5.min()))try{let t=await sQ(e.localStore);r.compareTo(t)>=0&&await function(e,t){let r=e.Iu.ee(t);return r.targetChanges.forEach((r,n)=>{if(r.resumeToken.approximateByteSize()>0){let i=e.wu.get(n);i&&e.wu.set(n,i.withResumeToken(r.resumeToken,t))}}),r.targetMismatches.forEach(t=>{let r=e.wu.get(t);if(!r)return;e.wu.set(t,r.withResumeToken(nm.EMPTY_BYTE_STRING,r.snapshotVersion)),od(e,t);let n=new sI(r.target,t,1,r.sequenceNumber);oh(e,n)}),e.remoteSyncer.applyRemoteEvent(r)}(e,r)}catch(t){rV("RemoteStore","Failed to raise snapshot:",t),await ow(e,t)}}async function ow(e,t,r){if(!no(t))throw t;e.mu.add(1),await ol(e),e.pu.set("Offline"),r||(r=()=>sQ(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{rV("RemoteStore","Retrying IndexedDB access"),await r(),e.mu.delete(1),await oa(e)})}function ob(e,t){return t().catch(r=>ow(e,r,t))}async function oE(e){let t=oO(e),r=e._u.length>0?e._u[e._u.length-1].batchId:-1;for(;om(e)&&e._u.length<10;)try{let n=await function(e,t){return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}(e.localStore,r);if(null===n){0===e._u.length&&t.Bo();break}r=n.batchId,function(e,t){e._u.push(t);let r=oO(e);r.Mo()&&r.Xo&&r.tu(t.mutations)}(e,n)}catch(t){await ow(e,t)}o_(e)&&oT(e)}function o_(e){return om(e)&&!oO(e).$o()&&e._u.length>0}function oT(e){oO(e).start()}async function oI(e){oO(e).su()}async function ox(e){let t=oO(e);for(let r of e._u)t.tu(r.mutations)}async function oC(e,t,r){let n=e._u.shift(),i=s_.from(n,t,r);await ob(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await oE(e)}async function oS(e,t){t&&oO(e).Xo&&await async function(e,t){var r;if(function(e){switch(e){default:return r$();case rH.CANCELLED:case rH.UNKNOWN:case rH.DEADLINE_EXCEEDED:case rH.RESOURCE_EXHAUSTED:case rH.INTERNAL:case rH.UNAVAILABLE:case rH.UNAUTHENTICATED:return!1;case rH.INVALID_ARGUMENT:case rH.NOT_FOUND:case rH.ALREADY_EXISTS:case rH.PERMISSION_DENIED:case rH.FAILED_PRECONDITION:case rH.ABORTED:case rH.OUT_OF_RANGE:case rH.UNIMPLEMENTED:case rH.DATA_LOSS:return!0}}(r=t.code)&&r!==rH.ABORTED){let r=e._u.shift();oO(e).Fo(),await ob(e,()=>e.remoteSyncer.rejectFailedWrite(r.batchId,t)),await oE(e)}}(e,t),o_(e)&&oT(e)}async function oN(e,t){e.asyncQueue.verifyOperationInProgress(),rV("RemoteStore","RemoteStore received new credentials");let r=om(e);e.mu.add(3),await ol(e),r&&e.pu.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.mu.delete(3),await oa(e)}async function oA(e,t){t?(e.mu.delete(2),await oa(e)):t||(e.mu.add(2),await ol(e),e.pu.set("Unknown"))}function ok(e){var t,r,n;return e.Tu||(e.Tu=(t=e.datastore,r=e.asyncQueue,n={Xr:og.bind(null,e),no:oy.bind(null,e),Ho:ov.bind(null,e)},t.ru(),new or(r,t.connection,t.authCredentials,t.appCheckCredentials,t.Tt,n)),e.gu.push(async t=>{t?(e.Tu.Fo(),op(e)?of(e):e.pu.set("Unknown")):(await e.Tu.stop(),e.Iu=void 0)})),e.Tu}function oO(e){var t,r,n;return e.Eu||(e.Eu=(t=e.datastore,r=e.asyncQueue,n={Xr:oI.bind(null,e),no:oS.bind(null,e),nu:ox.bind(null,e),eu:oC.bind(null,e)},t.ru(),new on(r,t.connection,t.authCredentials,t.appCheckCredentials,t.Tt,n)),e.gu.push(async t=>{t?(e.Eu.Fo(),await oE(e)):(await e.Eu.stop(),e._u.length>0&&(rV("RemoteStore",`Stopping write stream with ${e._u.length} pending writes`),e._u=[]))})),e.Eu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e,t,r,n,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=n,this.removalCallback=i,this.deferred=new rG,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,r,n,i){let s=Date.now()+r,o=new oR(e,t,s,n,i);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new rK(rH.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function oD(e,t){if(rB("AsyncQueue",`${t}: ${e}`),no(e))return new rK(rH.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e){this.comparator=e?(t,r)=>e(t,r)||nt.comparator(t.key,r.key):(e,t)=>nt.comparator(e.key,t.key),this.keyedMap=iJ(),this.sortedSet=new n0(this.comparator)}static emptySet(e){return new oL(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof oL)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let e=t.getNext().key,n=r.getNext().key;if(!e.isEqual(n))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){let r=new oL;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(){this.Au=new n0(nt.comparator)}track(e){let t=e.doc.key,r=this.Au.get(t);r?0!==e.type&&3===r.type?this.Au=this.Au.insert(t,e):3===e.type&&1!==r.type?this.Au=this.Au.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Au=this.Au.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Au=this.Au.remove(t):1===e.type&&2===r.type?this.Au=this.Au.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):r$():this.Au=this.Au.insert(t,e)}Ru(){let e=[];return this.Au.inorderTraversal((t,r)=>{e.push(r)}),e}}class oM{constructor(e,t,r,n,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=n,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,n,i){let s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new oM(e,t,oL.emptySet(t),s,r,n,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&im(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==r[e].type||!t[e].doc.isEqual(r[e].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(){this.Pu=void 0,this.listeners=[]}}class oU{constructor(){this.queries=new iW(e=>ig(e),im),this.onlineState="Unknown",this.vu=new Set}}async function oF(e,t){let r=t.query,n=!1,i=e.queries.get(r);if(i||(n=!0,i=new oj),n)try{i.Pu=await e.onListen(r)}catch(r){let e=oD(r,`Initialization of query '${iy(t.query)}' failed`);return void t.onError(e)}e.queries.set(r,i),i.listeners.push(t),t.bu(e.onlineState),i.Pu&&t.Vu(i.Pu)&&oz(e)}async function oV(e,t){let r=t.query,n=!1,i=e.queries.get(r);if(i){let e=i.listeners.indexOf(t);e>=0&&(i.listeners.splice(e,1),n=0===i.listeners.length)}if(n)return e.queries.delete(r),e.onUnlisten(r)}function oB(e,t){let r=!1;for(let n of t){let t=n.query,i=e.queries.get(t);if(i){for(let e of i.listeners)e.Vu(n)&&(r=!0);i.Pu=n}}r&&oz(e)}function oq(e,t,r){let n=e.queries.get(t);if(n)for(let e of n.listeners)e.onError(r);e.queries.delete(t)}function oz(e){e.vu.forEach(e=>{e.next()})}class o${constructor(e,t,r){this.query=e,this.Su=t,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){let t=[];for(let r of e.docChanges)3!==r.type&&t.push(r);e=new oM(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Du?this.xu(e)&&(this.Su.next(e),t=!0):this.Nu(e,this.onlineState)&&(this.ku(e),t=!0),this.Cu=e,t}onError(e){this.Su.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),t=!0),t}Nu(e,t){return!e.fromCache||(!this.options.$u||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}xu(e){if(e.docChanges.length>0)return!0;let t=this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ku(e){e=oM.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oH{constructor(e){this.key=e}}class oK{constructor(e){this.key=e}}class oG{constructor(e,t){this.query=e,this.Ku=t,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=i2(),this.mutatedKeys=i2(),this.ju=iw(e),this.zu=new oL(this.ju)}get Wu(){return this.Ku}Hu(e,t){let r=t?t.Ju:new oP,n=t?t.zu:this.zu,i=t?t.mutatedKeys:this.mutatedKeys,s=n,o=!1,a="F"===this.query.limitType&&n.size===this.query.limit?n.last():null,l="L"===this.query.limitType&&n.size===this.query.limit?n.first():null;if(e.inorderTraversal((e,t)=>{let u=n.get(e),c=iv(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations),f=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(r.track({type:3,doc:c}),f=!0):this.Yu(u,c)||(r.track({type:2,doc:c}),f=!0,(a&&this.ju(c,a)>0||l&&0>this.ju(c,l))&&(o=!0)):!u&&c?(r.track({type:0,doc:c}),f=!0):u&&!c&&(r.track({type:1,doc:u}),f=!0,(a||l)&&(o=!0)),f&&(c?(s=s.add(c),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){let e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),r.track({type:1,doc:e})}return{zu:s,Ju:r,Li:o,mutatedKeys:i}}Yu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){let n=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;let i=e.Ju.Ru();i.sort((e,t)=>(function(e,t){let r=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return r$()}};return r(e)-r(t)})(e.type,t.type)||this.ju(e.doc,t.doc)),this.Zu(r);let s=t?this.Xu():[],o=0===this.Qu.size&&this.current?1:0,a=o!==this.Gu;return(this.Gu=o,0!==i.length||a)?{snapshot:new oM(this.query,e.zu,n,i,e.mutatedKeys,0===o,a,!1,!!r&&r.resumeToken.approximateByteSize()>0),tc:s}:{tc:s}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new oP,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}ec(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}Zu(e){e&&(e.addedDocuments.forEach(e=>this.Ku=this.Ku.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ku=this.Ku.delete(e)),this.current=e.current)}Xu(){if(!this.current)return[];let e=this.Qu;this.Qu=i2(),this.zu.forEach(e=>{this.ec(e.key)&&(this.Qu=this.Qu.add(e.key))});let t=[];return e.forEach(e=>{this.Qu.has(e)||t.push(new oK(e))}),this.Qu.forEach(r=>{e.has(r)||t.push(new oH(r))}),t}nc(e){this.Ku=e.Yi,this.Qu=i2();let t=this.Hu(e.documents);return this.applyChanges(t,!0)}sc(){return oM.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,0===this.Gu,this.hasCachedResults)}}class oW{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class oQ{constructor(e){this.key=e,this.ic=!1}}class oX{constructor(e,t,r,n,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=n,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.rc={},this.oc=new iW(e=>ig(e),im),this.uc=new Map,this.cc=new Set,this.ac=new n0(nt.comparator),this.hc=new Map,this.lc=new sM,this.fc={},this.dc=new Map,this._c=sk.Sn(),this.onlineState="Unknown",this.wc=void 0}get isPrimaryClient(){return!0===this.wc}}async function oJ(e,t){let r,n;let i=function(e){let t=e;return t.remoteStore.remoteSyncer.applyRemoteEvent=o1.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ai.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=o3.bind(null,t),t.rc.Ho=oB.bind(null,t.eventManager),t.rc.gc=oq.bind(null,t.eventManager),t}(e),s=i.oc.get(t);if(s)r=s.targetId,i.sharedClientState.addLocalQueryTarget(r),n=s.view.sc();else{let e=await function(e,t){let r=e;return r.persistence.runTransaction("Allocate target","readwrite",e=>{let n;return r.Ns.getTargetData(e,t).next(i=>i?(n=i,ns.resolve(n)):r.Ns.allocateTargetId(e).next(i=>(n=new sI(t,i,0,e.currentSequenceNumber),r.Ns.addTargetData(e,n).next(()=>n))))}).then(e=>{let n=r.Ki.get(e.targetId);return(null===n||e.snapshotVersion.compareTo(n.snapshotVersion)>0)&&(r.Ki=r.Ki.insert(e.targetId,e),r.Gi.set(t,e.targetId)),e})}(i.localStore,ih(t));i.isPrimaryClient&&ou(i.remoteStore,e);let s=i.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,n=await oY(i,t,r,"current"===s,e.resumeToken)}return n}async function oY(e,t,r,n,i){e.mc=(t,r,n)=>(async function(e,t,r,n){let i=t.view.Hu(r);i.Li&&(i=await sJ(e.localStore,t.query,!1).then(({documents:e})=>t.view.Hu(e,i)));let s=n&&n.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return ae(e,t.targetId,o.tc),o.snapshot})(e,t,r,n);let s=await sJ(e.localStore,t,!0),o=new oG(t,s.Yi),a=o.Hu(s.documents),l=i6.createSynthesizedTargetChangeForCurrentChange(r,n&&"Offline"!==e.onlineState,i),u=o.applyChanges(a,e.isPrimaryClient,l);ae(e,r,u.tc);let c=new oW(t,r,o);return e.oc.set(t,c),e.uc.has(r)?e.uc.get(r).push(t):e.uc.set(r,[t]),u.snapshot}async function oZ(e,t){let r=e.oc.get(t),n=e.uc.get(r.targetId);if(n.length>1)return e.uc.set(r.targetId,n.filter(e=>!im(e,t))),void e.oc.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(r.targetId),e.sharedClientState.isActiveQueryTarget(r.targetId)||await sX(e.localStore,r.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(r.targetId),oc(e.remoteStore,r.targetId),o9(e,r.targetId)}).catch(ni)):(o9(e,r.targetId),await sX(e.localStore,r.targetId,!0))}async function o0(e,t,r){let n=function(e){let t=e;return t.remoteStore.remoteSyncer.applySuccessfulWrite=o4.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=o6.bind(null,t),t}(e);try{var i,s;let e;let o=await function(e,t){let r,n;let i=r6.now(),s=t.reduce((e,t)=>e.add(t.key),i2());return e.persistence.runTransaction("Locally write mutations","readwrite",o=>{let a=iQ,l=i2();return e.ji.getEntries(o,s).next(e=>{(a=e).forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>e.localDocuments.getOverlayedDocuments(o,a)).next(n=>{r=n;let s=[];for(let e of t){let t=function(e,t){let r=null;for(let n of e.fieldTransforms){let e=t.data.field(n.field),i=iT(n.transform,e||null);null!=i&&(null===r&&(r=n5.empty()),r.set(n.field,i))}return r||null}(e,r.get(e.key).overlayedDocument);null!=t&&s.push(new iV(e.key,t,function e(t){let r=[];return nh(t.fields,(t,n)=>{let i=new ne([t]);if(nL(n)){let t=e(n.mapValue).fields;if(0===t.length)r.push(i);else for(let e of t)r.push(i.child(e))}else r.push(i)}),new n6(r)}(t.value.mapValue),iD.exists(!0)))}return e.mutationQueue.addMutationBatch(o,i,s,t)}).next(t=>{n=t;let i=t.applyToLocalDocumentSet(r,l);return e.documentOverlayCache.saveOverlays(o,t.batchId,i)})}).then(()=>({batchId:n.batchId,changes:iY(r)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(o.batchId),i=n,s=o.batchId,(e=i.fc[i.currentUser.toKey()])||(e=new n0(r3)),e=e.insert(s,r),i.fc[i.currentUser.toKey()]=e,await ar(n,o.changes),await oE(n.remoteStore)}catch(t){let e=oD(t,"Failed to persist write");r.reject(e)}}async function o1(e,t){try{let r=await function(e,t){let r=e,n=t.snapshotVersion,i=r.Ki;return r.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{var s;let o,a;let l=r.ji.newChangeBuffer({trackRemovals:!0});i=r.Ki;let u=[];t.targetChanges.forEach((s,o)=>{var a;let l=i.get(o);if(!l)return;u.push(r.Ns.removeMatchingKeys(e,s.removedDocuments,o).next(()=>r.Ns.addMatchingKeys(e,s.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(o)?c=c.withResumeToken(nm.EMPTY_BYTE_STRING,r5.min()).withLastLimboFreeSnapshotVersion(r5.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,n)),i=i.insert(o,c),a=c,(0===l.resumeToken.approximateByteSize()||a.snapshotVersion.toMicroseconds()-l.snapshotVersion.toMicroseconds()>=3e8||s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size>0)&&u.push(r.Ns.updateTargetData(e,c))});let c=iQ,h=i2();if(t.documentUpdates.forEach(n=>{t.resolvedLimboDocuments.has(n)&&u.push(r.persistence.referenceDelegate.updateLimboDocument(e,n))}),u.push((s=t.documentUpdates,o=i2(),a=i2(),s.forEach(e=>o=o.add(e)),l.getEntries(e,o).next(e=>{let t=iQ;return s.forEach((r,n)=>{let i=e.get(r);n.isFoundDocument()!==i.isFoundDocument()&&(a=a.add(r)),n.isNoDocument()&&n.version.isEqual(r5.min())?(l.removeEntry(r,n.readTime),t=t.insert(r,n)):!i.isValidDocument()||n.version.compareTo(i.version)>0||0===n.version.compareTo(i.version)&&i.hasPendingWrites?(l.addEntry(n),t=t.insert(r,n)):rV("LocalStore","Ignoring outdated watch update for ",r,". Current version:",i.version," Watch version:",n.version)}),{Hi:t,Ji:a}})).next(e=>{c=e.Hi,h=e.Ji})),!n.isEqual(r5.min())){let t=r.Ns.getLastRemoteSnapshotVersion(e).next(t=>r.Ns.setTargetsMetadata(e,e.currentSequenceNumber,n));u.push(t)}return ns.waitFor(u).next(()=>l.apply(e)).next(()=>r.localDocuments.getLocalViewOfDocuments(e,c,h)).next(()=>c)}).then(e=>(r.Ki=i,e))}(e.localStore,t);t.targetChanges.forEach((t,r)=>{let n=e.hc.get(r);n&&(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1||r$(),t.addedDocuments.size>0?n.ic=!0:t.modifiedDocuments.size>0?n.ic||r$():t.removedDocuments.size>0&&(n.ic||r$(),n.ic=!1))}),await ar(e,r,t)}catch(e){await ni(e)}}function o2(e,t,r){let n=e;if(n.isPrimaryClient&&0===r||!n.isPrimaryClient&&1===r){let e=[];n.oc.forEach((r,n)=>{let i=n.view.bu(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){let r=e;r.onlineState=t;let n=!1;r.queries.forEach((e,r)=>{for(let e of r.listeners)e.bu(t)&&(n=!0)}),n&&oz(r)}(n.eventManager,t),e.length&&n.rc.Ho(e),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function o3(e,t,r){let n=e;n.sharedClientState.updateQueryState(t,"rejected",r);let i=n.hc.get(t),s=i&&i.key;if(s){let e=new n0(nt.comparator);e=e.insert(s,n8.newNoDocument(s,r5.min()));let r=i2().add(s),i=new i4(r5.min(),new Map,new n3(r3),e,r);await o1(n,i),n.ac=n.ac.remove(s),n.hc.delete(t),at(n)}else await sX(n.localStore,t,!1).then(()=>o9(n,t,r)).catch(ni)}async function o4(e,t){var r;let n=t.batch.batchId;try{let i=await (r=e.localStore).persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{let n=t.batch.keys(),i=r.ji.newChangeBuffer({trackRemovals:!0});return(function(e,t,r,n){let i=r.batch,s=i.keys(),o=ns.resolve();return s.forEach(e=>{o=o.next(()=>n.getEntry(t,e)).next(t=>{let s=r.docVersions.get(e);null!==s||r$(),0>t.version.compareTo(s)&&(i.applyToRemoteDocument(t,r),t.isValidDocument()&&(t.setReadTime(r.commitVersion),n.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,i))})(r,e,t,i).next(()=>i.apply(e)).next(()=>r.mutationQueue.performConsistencyCheck(e)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(e,n,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=i2();for(let r=0;r<e.mutationResults.length;++r)e.mutationResults[r].transformResults.length>0&&(t=t.add(e.batch.mutations[r].key));return t}(t))).next(()=>r.localDocuments.getDocuments(e,n))});o8(e,n,null),o5(e,n),e.sharedClientState.updateMutationState(n,"acknowledged"),await ar(e,i)}catch(e){await ni(e)}}async function o6(e,t,r){var n;try{let i=await (n=e.localStore).persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(null!==t||r$(),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))});o8(e,t,r),o5(e,t),e.sharedClientState.updateMutationState(t,"rejected",r),await ar(e,i)}catch(e){await ni(e)}}function o5(e,t){(e.dc.get(t)||[]).forEach(e=>{e.resolve()}),e.dc.delete(t)}function o8(e,t,r){let n=e,i=n.fc[n.currentUser.toKey()];if(i){let e=i.get(t);e&&(r?e.reject(r):e.resolve(),i=i.remove(t)),n.fc[n.currentUser.toKey()]=i}}function o9(e,t,r=null){for(let n of(e.sharedClientState.removeLocalQueryTarget(t),e.uc.get(t)))e.oc.delete(n),r&&e.rc.gc(n,r);e.uc.delete(t),e.isPrimaryClient&&e.lc.ds(t).forEach(t=>{e.lc.containsKey(t)||o7(e,t)})}function o7(e,t){e.cc.delete(t.path.canonicalString());let r=e.ac.get(t);null!==r&&(oc(e.remoteStore,r),e.ac=e.ac.remove(t),e.hc.delete(r),at(e))}function ae(e,t,r){for(let n of r)n instanceof oH?(e.lc.addReference(n.key,t),function(e,t){let r=t.key,n=r.path.canonicalString();e.ac.get(r)||e.cc.has(n)||(rV("SyncEngine","New document in limbo: "+r),e.cc.add(n),at(e))}(e,n)):n instanceof oK?(rV("SyncEngine","Document no longer in limbo: "+n.key),e.lc.removeReference(n.key,t),e.lc.containsKey(n.key)||o7(e,n.key)):r$()}function at(e){for(;e.cc.size>0&&e.ac.size<e.maxConcurrentLimboResolutions;){let t=e.cc.values().next().value;e.cc.delete(t);let r=new nt(r9.fromString(t)),n=e._c.next();e.hc.set(n,new oQ(r)),e.ac=e.ac.insert(r,n),ou(e.remoteStore,new sI(ih(is(r.path)),n,2,na.at))}}async function ar(e,t,r){let n=[],i=[],s=[];e.oc.isEmpty()||(e.oc.forEach((o,a)=>{s.push(e.mc(a,t,r).then(t=>{if((t||r)&&e.isPrimaryClient&&e.sharedClientState.updateQueryState(a.targetId,(null==t?void 0:t.fromCache)?"not-current":"current"),t){n.push(t);let e=sH.Ni(a.targetId,t);i.push(e)}}))}),await Promise.all(s),e.rc.Ho(n),await async function(e,t){let r=e;try{await r.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>ns.forEach(t,t=>ns.forEach(t.Ci,n=>r.persistence.referenceDelegate.addReference(e,t.targetId,n)).next(()=>ns.forEach(t.xi,n=>r.persistence.referenceDelegate.removeReference(e,t.targetId,n)))))}catch(e){if(!no(e))throw e;rV("LocalStore","Failed to update sequence numbers: "+e)}for(let e of t){let t=e.targetId;if(!e.fromCache){let e=r.Ki.get(t),n=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(n);r.Ki=r.Ki.insert(t,i)}}}(e.localStore,i))}async function an(e,t){let r=e;if(!r.currentUser.isEqual(t)){rV("SyncEngine","User change. New user:",t.toKey());let e=await sW(r.localStore,t);r.currentUser=t,r.dc.forEach(e=>{e.forEach(e=>{e.reject(new rK(rH.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.dc.clear(),r.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await ar(r,e.Wi)}}function ai(e,t){let r=e.hc.get(t);if(r&&r.ic)return i2().add(r.key);{let r=i2(),n=e.uc.get(t);if(!n)return r;for(let t of n){let n=e.oc.get(t);r=r.unionWith(n.view.Wu)}return r}}class as{constructor(){this.synchronizeTabs=!1}async initialize(e){this.Tt=s7(e.databaseInfo.databaseId),this.sharedClientState=this.Ic(e),this.persistence=this.Tc(e),await this.persistence.start(),this.localStore=this.Ec(e),this.gcScheduler=this.Ac(e,this.localStore),this.indexBackfillerScheduler=this.Rc(e,this.localStore)}Ac(e,t){return null}Rc(e,t){return null}Ec(e){var t,r,n,i;return t=this.persistence,r=new sK,n=e.initialUser,i=this.Tt,new sG(t,r,n,i)}Tc(e){return new sq(s$.qs,this.Tt)}Ic(e){return new sZ}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class ao{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>o2(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=an.bind(null,this.syncEngine),await oA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new oU}createDatastore(e){var t,r,n;let i=s7(e.databaseInfo.databaseId),s=(t=e.databaseInfo,new s8(t));return r=e.authCredentials,n=e.appCheckCredentials,new oi(r,n,s,i)}createRemoteStore(e){var t,r,n,i,s;return t=this.localStore,r=this.datastore,n=e.asyncQueue,i=e=>o2(this.syncEngine,e,0),s=s1.C()?new s1:new s0,new oo(t,r,n,i,s)}createSyncEngine(e,t){return function(e,t,r,n,i,s,o){let a=new oX(e,t,r,n,i,s);return o&&(a.wc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){rV("RemoteStore","RemoteStore shutting down."),e.mu.add(5),await ol(e),e.yu.shutdown(),e.pu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.vc(this.observer.next,e)}error(e){this.observer.error?this.vc(this.observer.error,e):rB("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}vc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,t,r,n){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=n,this.user=rM.UNAUTHENTICATED,this.clientId=r2.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async e=>{rV("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(r,e=>(rV("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new rK(rH.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new rG;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){let t=oD(r,"Failed to shutdown persistence");e.reject(t)}}),e.promise}}async function au(e,t){e.asyncQueue.verifyOperationInProgress(),rV("FirestoreClient","Initializing OfflineComponentProvider");let r=await e.getConfiguration();await t.initialize(r);let n=r.initialUser;e.setCredentialChangeListener(async e=>{n.isEqual(e)||(await sW(t.localStore,e),n=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e.offlineComponents=t}async function ac(e,t){e.asyncQueue.verifyOperationInProgress();let r=await ah(e);rV("FirestoreClient","Initializing OnlineComponentProvider");let n=await e.getConfiguration();await t.initialize(r,n),e.setCredentialChangeListener(e=>oN(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,r)=>oN(t.remoteStore,r)),e.onlineComponents=t}async function ah(e){return e.offlineComponents||(rV("FirestoreClient","Using default OfflineComponentProvider"),await au(e,new as)),e.offlineComponents}async function ad(e){return e.onlineComponents||(rV("FirestoreClient","Using default OnlineComponentProvider"),await ac(e,new ao)),e.onlineComponents}async function af(e){let t=await ad(e),r=t.eventManager;return r.onListen=oJ.bind(null,t.syncEngine),r.onUnlisten=oZ.bind(null,t.syncEngine),r}let ap=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(e,t,r){if(!r)throw new rK(rH.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function ag(e){if(!nt.isDocumentKey(e))throw new rK(rH.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function ay(e){if(nt.isDocumentKey(e))throw new rK(rH.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function av(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{var t;let r=(t=e).constructor?t.constructor.name:null;return r?`a custom ${r} object`:"an object"}}return"function"==typeof e?"a function":r$()}function aw(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new rK(rH.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let r=av(e);throw new rK(rH.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new rK(rH.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new rK(rH.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,function(e,t,r,n){if(!0===t&&!0===n)throw new rK(rH.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)}("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e,t,r,n){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ab({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new rK(rH.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new rK(rH.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ab(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new rQ;switch(e.type){case"gapi":let t=e.client;return new rZ(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new rK(rH.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let t=ap.get(e);t&&(rV("ComponentProvider","Removing Datastore"),ap.delete(e),t.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new aI(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new a_(this.firestore,e,this._key)}}class aT{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new aT(this.firestore,e,this._query)}}class aI extends aT{constructor(e,t,r){super(e,t,is(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new a_(this.firestore,null,new nt(e))}withConverter(e){return new aI(this.firestore,e,this._path)}}function ax(e,t,...r){if(e=(0,p.m9)(e),am("collection","path",t),e instanceof aE){let n=r9.fromString(t,...r);return ay(n),new aI(e,null,n)}{if(!(e instanceof a_||e instanceof aI))throw new rK(rH.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=e._path.child(r9.fromString(t,...r));return ay(n),new aI(e.firestore,null,n)}}function aC(e,t,...r){if(e=(0,p.m9)(e),1==arguments.length&&(t=r2.R()),am("doc","path",t),e instanceof aE){let n=r9.fromString(t,...r);return ag(n),new a_(e,null,new nt(n))}{if(!(e instanceof a_||e instanceof aI))throw new rK(rH.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=e._path.child(r9.fromString(t,...r));return ag(n),new a_(e.firestore,e instanceof aI?e.converter:null,new nt(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new oe(this,"async_queue_retry"),this.Hc=()=>{let e=s9();e&&rV("AsyncQueue","Visibility state changed to "+e.visibilityState),this.ko.Vo()};let e=s9();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Jc(),this.Yc(e)}enterRestrictedMode(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;let t=s9();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Hc)}}enqueue(e){if(this.Jc(),this.Kc)return new Promise(()=>{});let t=new rG;return this.Yc(()=>this.Kc&&this.zc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Uc.push(e),this.Zc()))}async Zc(){if(0!==this.Uc.length){try{await this.Uc[0](),this.Uc.shift(),this.ko.reset()}catch(e){if(!no(e))throw e;rV("AsyncQueue","Operation failed with retryable error: "+e)}this.Uc.length>0&&this.ko.vo(()=>this.Zc())}}Yc(e){let t=this.qc.then(()=>(this.jc=!0,e().catch(e=>{let t;this.Qc=e,this.jc=!1;let r=(t=e.message||"",e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t);throw rB("INTERNAL UNHANDLED ERROR: ",r),e}).then(e=>(this.jc=!1,e))));return this.qc=t,t}enqueueAfterDelay(e,t,r){this.Jc(),this.Wc.indexOf(e)>-1&&(t=0);let n=oR.createAndSchedule(this,e,t,r,e=>this.Xc(e));return this.Gc.push(n),n}Jc(){this.Qc&&r$()}verifyOperationInProgress(){}async ta(){let e;do e=this.qc,await e;while(e!==this.qc)}ea(e){for(let t of this.Gc)if(t.timerId===e)return!0;return!1}na(e){return this.ta().then(()=>{for(let t of(this.Gc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs),this.Gc))if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ta()})}sa(e){this.Wc.push(e)}Xc(e){let t=this.Gc.indexOf(e);this.Gc.splice(t,1)}}function aN(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(let r of t)if(r in e&&"function"==typeof e[r])return!0;return!1}(e,["next","error","complete"])}class aA extends aE{constructor(e,t,r,n){super(e,t,r,n),this.type="firestore",this._queue=new aS,this._persistenceKey=(null==n?void 0:n.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||aR(this),this._firestoreClient.terminate()}}function ak(e,t){let r="object"==typeof e?e:(0,h.Mq)(),n=(0,h.qX)(r,"firestore").getImmediate({identifier:"string"==typeof e?e:t||"(default)"});if(!n._initialized){let e=(0,p.P0)("firestore");e&&function(e,t,r,n={}){var i;let s=(e=aw(e,aE))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&rq("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${r}`,ssl:!1})),n.mockUserToken){let t,r;if("string"==typeof n.mockUserToken)t=n.mockUserToken,r=rM.MOCK_USER;else{t=(0,p.Sg)(n.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);let s=n.mockUserToken.sub||n.mockUserToken.user_id;if(!s)throw new rK(rH.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");r=new rM(s)}e._authCredentials=new rX(new rW(t,r))}}(n,...e)}return n}function aO(e){return e._firestoreClient||aR(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function aR(e){var t,r,n,i;let s=e._freezeSettings(),o=(r=e._databaseId,n=(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",i=e._persistenceKey,new nl(r,n,i,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,s.useFetchStreams));e._firestoreClient=new al(e._authCredentials,e._appCheckCredentials,e._queue,o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e){this._byteString=e}static fromBase64String(e){try{return new aD(nm.fromBase64String(e))}catch(e){throw new rK(rH.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new aD(nm.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new rK(rH.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ne(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new rK(rH.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new rK(rH.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return r3(this._lat,e._lat)||r3(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aj=/^__.*__$/;class aU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new iV(e,this.data,this.fieldMask,t,this.fieldTransforms):new iF(e,this.data,t,this.fieldTransforms)}}function aF(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw r$()}}class aV{constructor(e,t,r,n,i,s){this.settings=e,this.databaseId=t,this.Tt=r,this.ignoreUndefinedProperties=n,void 0===i&&this.ia(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get ra(){return this.settings.ra}oa(e){return new aV(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ua(e){var t;let r=null===(t=this.path)||void 0===t?void 0:t.child(e),n=this.oa({path:r,ca:!1});return n.aa(e),n}ha(e){var t;let r=null===(t=this.path)||void 0===t?void 0:t.child(e),n=this.oa({path:r,ca:!1});return n.ia(),n}la(e){return this.oa({path:void 0,ca:!0})}fa(e){return aQ(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ia(){if(this.path)for(let e=0;e<this.path.length;e++)this.aa(this.path.get(e))}aa(e){if(0===e.length)throw this.fa("Document fields must not be empty");if(aF(this.ra)&&aj.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}class aB{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.Tt=r||s7(e)}wa(e,t,r,n=!1){return new aV({ra:e,methodName:t,_a:r,path:ne.emptyPath(),ca:!1,da:n},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}function aq(e){let t=e._freezeSettings(),r=s7(e._databaseId);return new aB(e._databaseId,!!t.ignoreUndefinedProperties,r)}function az(e,t){if(aH(e=(0,p.m9)(e)))return aK("Unsupported field value:",t,e),a$(e,t);if(e instanceof aP)return function(e,t){if(!aF(t.ra))throw t.fa(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.fa(`${e._methodName}() is not currently supported inside arrays`);let r=e._toFieldTransform(t);r&&t.fieldTransforms.push(r)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ca&&4!==t.ra)throw t.fa("Nested arrays are not supported");return function(e,t){let r=[],n=0;for(let i of e){let e=az(i,t.la(n));null==e&&(e={nullValue:"NULL_VALUE"}),r.push(e),n++}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=(0,p.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e){var r,n,i;return r=t.Tt,"number"==typeof(i=n=e)&&Number.isInteger(i)&&!nf(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER?iE(n):ib(r,n)}if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){let r=r6.fromDate(e);return{timestampValue:sa(t.Tt,r)}}if(e instanceof r6){let r=new r6(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:sa(t.Tt,r)}}if(e instanceof aM)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof aD)return{bytesValue:sl(t.Tt,e._byteString)};if(e instanceof a_){let r=t.databaseId,n=e.firestore._databaseId;if(!n.isEqual(r))throw t.fa(`Document reference is for database ${n.projectId}/${n.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:sc(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.fa(`Unsupported field value: ${av(e)}`)}(e,t)}function a$(e,t){let r={};return nd(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):nh(e,(e,n)=>{let i=az(n,t.ua(e));null!=i&&(r[e]=i)}),{mapValue:{fields:r}}}function aH(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof r6||e instanceof aM||e instanceof aD||e instanceof a_||e instanceof aP)}function aK(e,t,r){if(!aH(r)||!("object"==typeof r&&null!==r&&(Object.getPrototypeOf(r)===Object.prototype||null===Object.getPrototypeOf(r)))){let n=av(r);throw"an object"===n?t.fa(e+" a custom object"):t.fa(e+" "+n)}}let aG=RegExp("[~\\*/\\[\\]]");function aW(e,t,r){if(t.search(aG)>=0)throw aQ(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new aL(...t.split("."))._internalPath}catch(n){throw aQ(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function aQ(e,t,r,n,i){let s=n&&!n.isEmpty(),o=void 0!==i,a=`Function ${t}() called with invalid data`;r&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${n}`),o&&(l+=` in document ${i}`),l+=")"),new rK(rH.INVALID_ARGUMENT,a+e+l)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aX{constructor(e,t,r,n,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=n,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new a_(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){let e=new aJ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(aY("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class aJ extends aX{data(){return super.data()}}function aY(e,t){return"string"==typeof t?aW(e,t):t instanceof aL?t._internalPath:t._delegate._internalPath}class aZ{}class a0 extends aZ{}function a1(e,t,...r){let n=[];for(let i of(t instanceof aZ&&n.push(t),function(e){let t=e.filter(e=>e instanceof a4).length,r=e.filter(e=>e instanceof a2).length;if(t>1||t>0&&r>0)throw new rK(rH.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(r)),n))e=i._apply(e);return e}class a2 extends a0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new a2(e,t,r)}_apply(e){let t=this._parse(e);return a8(e._query,t),new aT(e.firestore,e.converter,id(e._query,t))}_parse(e){let t=aq(e.firestore),r=function(e,t,r,n,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new rK(rH.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){a5(o,s);let t=[];for(let r of o)t.push(a6(n,e,r));a={arrayValue:{values:t}}}else a=a6(n,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||a5(o,s),a=function(e,t,r,n=!1){return az(r,e.wa(n?4:3,t))}(r,t,o,"in"===s||"not-in"===s);return nB.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return r}}function a3(e,t,r){let n=aY("where",e);return a2._create(n,t,r)}class a4 extends aZ{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new a4(e,t)}_parse(e){let t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:nq.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let r=e,n=t.getFlattenedFilters();for(let e of n)a8(r,e),r=id(r,e)}(e._query,t),new aT(e.firestore,e.converter,id(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function a6(e,t,r){if("string"==typeof(r=(0,p.m9)(r))){if(""===r)throw new rK(rH.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!iu(t)&&-1!==r.indexOf("/"))throw new rK(rH.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);let n=t.path.child(r9.fromString(r));if(!nt.isDocumentKey(n))throw new rK(rH.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return nA(e,new nt(n))}if(r instanceof a_)return nA(e,r._key);throw new rK(rH.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${av(r)}.`)}function a5(e,t){if(!Array.isArray(e)||0===e.length)throw new rK(rH.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function a8(e,t){if(t.isInequality()){let r=il(e),n=t.field;if(null!==r&&!r.isEqual(n))throw new rK(rH.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${n.toString()}'`);let i=ia(e);null!==i&&function(e,t,r){if(!r.isEqual(t))throw new rK(rH.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${r.toString()}' instead.`)}(0,n,i)}let r=function(e,t){for(let r of e)for(let e of r.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==r)throw r===t.op?new rK(rH.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new rK(rH.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class a9{convertValue(e,t="none"){switch(nT(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nv(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(nw(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw r$()}}convertObject(e,t){let r={};return nh(e.fields,(e,n)=>{r[e]=this.convertValue(n,t)}),r}convertGeoPoint(e){return new aM(nv(e.latitude),nv(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=function e(t){let r=t.mapValue.fields.__previous_value__;return nb(r)?e(r):r}(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(nE(e));default:return null}}convertTimestamp(e){let t=ny(e);return new r6(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=r9.fromString(e);sb(r)||r$();let n=new nu(r.get(1),r.get(3)),i=new nt(r.popFirst(5));return n.isEqual(t)||rB(`Document ${i} contains a document reference within a different database (${n.projectId}/${n.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a7{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class le extends aX{constructor(e,t,r,n,i,s){super(e,t,r,n,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new lt(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(aY("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class lt extends le{data(e={}){return super.data(e)}}class lr{constructor(e,t,r,n){this._firestore=e,this._userDataWriter=t,this._snapshot=n,this.metadata=new a7(n.hasPendingWrites,n.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new lt(this._firestore,this._userDataWriter,r.key,r,new a7(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new rK(rH.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(r=>{let n=new lt(e._firestore,e._userDataWriter,r.doc.key,r.doc,new a7(e._snapshot.mutatedKeys.has(r.doc.key),e._snapshot.fromCache),e.query.converter);return r.doc,{type:"added",doc:n,oldIndex:-1,newIndex:t++}})}{let r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{let n=new lt(e._firestore,e._userDataWriter,t.doc.key,t.doc,new a7(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,s=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(s=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:function(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return r$()}}(t.type),doc:n,oldIndex:i,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(e){e=aw(e,a_);let t=aw(e.firestore,aA);return(function(e,t,r={}){let n=new rG;return e.asyncQueue.enqueueAndForget(async()=>(function(e,t,r,n,i){let s=new aa({next:s=>{t.enqueueAndForget(()=>oV(e,o));let a=s.docs.has(r);!a&&s.fromCache?i.reject(new rK(rH.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&n&&"server"===n.source?i.reject(new rK(rH.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new o$(is(r.path),s,{includeMetadataChanges:!0,$u:!0});return oF(e,o)})(await af(e),e.asyncQueue,t,r,n)),n.promise})(aO(t),e._key).then(r=>la(t,e,r))}class li extends a9{constructor(e){super(),this.firestore=e}convertBytes(e){return new aD(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new a_(this.firestore,null,t)}}function ls(e,t,r){var n,i;e=aw(e,a_);let s=aw(e.firestore,aA),o=(n=e.converter)?r&&(r.merge||r.mergeFields)?n.toFirestore(t,r):n.toFirestore(t):t;return i=[(function(e,t,r,n,i,s={}){let o,a;let l=e.wa(s.merge||s.mergeFields?2:0,t,r,i);aK("Data must be an object, but it was:",l,n);let u=a$(n,l);if(s.merge)o=new n6(l.fieldMask),a=l.fieldTransforms;else if(s.mergeFields){let e=[];for(let n of s.mergeFields){let i=function(e,t,r){if((t=(0,p.m9)(t))instanceof aL)return t._internalPath;if("string"==typeof t)return aW(e,t);throw aQ("Field path arguments must be of type string or ",e,!1,void 0,r)}(t,n,r);if(!l.contains(i))throw new rK(rH.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);(function(e,t){return e.some(e=>e.isEqual(t))})(e,i)||e.push(i)}o=new n6(e),a=l.fieldTransforms.filter(e=>o.covers(e.field))}else o=null,a=l.fieldTransforms;return new aU(new n5(u),o,a)})(aq(s),"setDoc",e._key,o,null!==e.converter,r).toMutation(e._key,iD.none())],function(e,t){let r=new rG;return e.asyncQueue.enqueueAndForget(async()=>o0(await ad(e).then(e=>e.syncEngine),t,r)),r.promise}(aO(s),i)}function lo(e,...t){var r,n,i;let s,o,a;e=(0,p.m9)(e);let l={includeMetadataChanges:!1},u=0;"object"!=typeof t[0]||aN(t[u])||(l=t[u],u++);let c={includeMetadataChanges:l.includeMetadataChanges};if(aN(t[u])){let e=t[u];t[u]=null===(r=e.next)||void 0===r?void 0:r.bind(e),t[u+1]=null===(n=e.error)||void 0===n?void 0:n.bind(e),t[u+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}if(e instanceof a_)o=aw(e.firestore,aA),a=is(e._key.path),s={next:r=>{t[u]&&t[u](la(o,e,r))},error:t[u+1],complete:t[u+2]};else{let r=aw(e,aT);o=aw(r.firestore,aA),a=r._query;let n=new li(o);s={next:e=>{t[u]&&t[u](new lr(o,n,r,e))},error:t[u+1],complete:t[u+2]},/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new rK(rH.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(e._query)}return function(e,t,r,n){let i=new aa(n),s=new o$(t,i,r);return e.asyncQueue.enqueueAndForget(async()=>oF(await af(e),s)),()=>{i.bc(),e.asyncQueue.enqueueAndForget(async()=>oV(await af(e),s))}}(aO(o),a,c,s)}function la(e,t,r){let n=r.docs.get(t._key),i=new li(e);return new le(e,i,t._key,n,new a7(r.hasPendingWrites,r.fromCache),t.converter)}!function(e,t=!0){rj=h.Jn,(0,h.Xd)(new d.wA("firestore",(e,{instanceIdentifier:r,options:n})=>{let i=e.getProvider("app").getImmediate(),s=new aA(new rJ(e.getProvider("auth-internal")),new r1(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new rK(rH.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nu(e.options.projectId,t)}(i,r),i);return n=Object.assign({useFetchStreams:t},n),s._setSettings(n),s},"PUBLIC").setMultipleInstances(!0)),(0,h.KN)(rP,"3.9.0",void 0),(0,h.KN)(rP,"3.9.0","esm2017")}()}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[774,179],function(){return t(1118),t(6885)}),_N_E=e.O()}]);